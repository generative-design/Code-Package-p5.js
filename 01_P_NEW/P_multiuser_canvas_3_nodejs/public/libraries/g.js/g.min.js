(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.g = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (process,global){
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.async=n.async||{})}(this,function(n){"use strict";function t(n,t,e){switch(e.length){case 0:return n.call(t);case 1:return n.call(t,e[0]);case 2:return n.call(t,e[0],e[1]);case 3:return n.call(t,e[0],e[1],e[2])}return n.apply(t,e)}function e(n,e,r){return e=rt(void 0===e?n.length-1:e,0),function(){for(var u=arguments,o=-1,i=rt(u.length-e,0),c=Array(i);++o<i;)c[o]=u[e+o];o=-1;for(var f=Array(e+1);++o<e;)f[o]=u[o];return f[e]=r(c),t(n,this,f)}}function r(n){return n}function u(n,t){return e(n,t,r)}function o(n){return u(function(t,e){var r=ut(function(e,r){var u=this;return n(t,function(n,t){n.apply(u,e.concat([t]))},r)});return e.length?r.apply(this,e):r})}function i(n){var t=lt.call(n,pt),e=n[pt];try{n[pt]=void 0;var r=!0}catch(n){}var u=st.call(n);return r&&(t?n[pt]=e:delete n[pt]),u}function c(n){return yt.call(n)}function f(n){return null==n?void 0===n?dt:vt:(n=Object(n),mt&&mt in n?i(n):c(n))}function a(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function l(n){if(!a(n))return!1;var t=f(n);return t==bt||t==jt||t==gt||t==St}function s(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=kt}function p(n){return null!=n&&s(n.length)&&!l(n)}function h(){}function y(n){return function(){if(null!==n){var t=n;n=null,t.apply(this,arguments)}}}function v(n,t){for(var e=-1,r=Array(n);++e<n;)r[e]=t(e);return r}function d(n){return null!=n&&"object"==typeof n}function m(n){return d(n)&&f(n)==Ot}function g(){return!1}function b(n,t){return t=null==t?Vt:t,!!t&&("number"==typeof n||Pt.test(n))&&n>-1&&n%1==0&&n<t}function j(n){return d(n)&&s(n.length)&&!!ae[f(n)]}function S(n){return function(t){return n(t)}}function k(n,t){var e=Ft(n),r=!e&&Tt(n),u=!e&&!r&&zt(n),o=!e&&!r&&!u&&me(n),i=e||r||u||o,c=i?v(n.length,String):[],f=c.length;for(var a in n)!t&&!be.call(n,a)||i&&("length"==a||u&&("offset"==a||"parent"==a)||o&&("buffer"==a||"byteLength"==a||"byteOffset"==a)||b(a,f))||c.push(a);return c}function w(n){var t=n&&n.constructor,e="function"==typeof t&&t.prototype||je;return n===e}function x(n,t){return function(e){return n(t(e))}}function O(n){if(!w(n))return Se(n);var t=[];for(var e in Object(n))we.call(n,e)&&"constructor"!=e&&t.push(e);return t}function E(n){return p(n)?k(n):O(n)}function L(n){var t=-1,e=n.length;return function(){return++t<e?{value:n[t],key:t}:null}}function A(n){var t=-1;return function(){var e=n.next();return e.done?null:(t++,{value:e.value,key:t})}}function T(n){var t=E(n),e=-1,r=t.length;return function(){var u=t[++e];return e<r?{value:n[u],key:u}:null}}function F(n){if(p(n))return L(n);var t=xt(n);return t?A(t):T(n)}function I(n){return function(){if(null===n)throw new Error("Callback was already called.");var t=n;n=null,t.apply(this,arguments)}}function _(n){return function(t,e,r){function u(n,t){if(f-=1,n)c=!0,r(n);else{if(t===xe||c&&f<=0)return c=!0,r(null);o()}}function o(){for(;f<n&&!c;){var t=i();if(null===t)return c=!0,void(f<=0&&r(null));f+=1,e(t.value,t.key,I(u))}}if(r=y(r||h),n<=0||!t)return r(null);var i=F(t),c=!1,f=0;o()}}function B(n,t,e,r){_(t)(n,e,r)}function M(n,t){return function(e,r,u){return n(e,t,r,u)}}function U(n,t,e){function r(n){n?e(n):++o===i&&e(null)}e=y(e||h);var u=0,o=0,i=n.length;for(0===i&&e(null);u<i;u++)t(n[u],u,I(r))}function z(n){return function(t,e,r){return n(Ee,t,e,r)}}function V(n,t,e,r){r=r||h,t=t||[];var u=[],o=0;n(t,function(n,t,r){var i=o++;e(n,function(n,t){u[i]=t,r(n)})},function(n){r(n,u)})}function P(n){return function(t,e,r,u){return n(_(e),t,r,u)}}function q(n){return ut(function(t,e){var r;try{r=n.apply(this,t)}catch(n){return e(n)}a(r)&&"function"==typeof r.then?r.then(function(n){e(null,n)},function(n){e(n.message?n:new Error(n))}):e(null,r)})}function D(n,t){for(var e=-1,r=null==n?0:n.length;++e<r&&t(n[e],e,n)!==!1;);return n}function R(n){return function(t,e,r){for(var u=-1,o=Object(t),i=r(t),c=i.length;c--;){var f=i[n?c:++u];if(e(o[f],f,o)===!1)break}return t}}function C(n,t){return n&&Be(n,t,E)}function $(n,t,e,r){for(var u=n.length,o=e+(r?1:-1);r?o--:++o<u;)if(t(n[o],o,n))return o;return-1}function W(n){return n!==n}function N(n,t,e){for(var r=e-1,u=n.length;++r<u;)if(n[r]===t)return r;return-1}function Q(n,t,e){return t===t?N(n,t,e):$(n,W,e)}function G(n,t){for(var e=-1,r=null==n?0:n.length,u=Array(r);++e<r;)u[e]=t(n[e],e,n);return u}function H(n){return"symbol"==typeof n||d(n)&&f(n)==Ue}function J(n){if("string"==typeof n)return n;if(Ft(n))return G(n,J)+"";if(H(n))return Pe?Pe.call(n):"";var t=n+"";return"0"==t&&1/n==-ze?"-0":t}function K(n,t,e){var r=-1,u=n.length;t<0&&(t=-t>u?0:u+t),e=e>u?u:e,e<0&&(e+=u),u=t>e?0:e-t>>>0,t>>>=0;for(var o=Array(u);++r<u;)o[r]=n[r+t];return o}function X(n,t,e){var r=n.length;return e=void 0===e?r:e,!t&&e>=r?n:K(n,t,e)}function Y(n,t){for(var e=n.length;e--&&Q(t,n[e],0)>-1;);return e}function Z(n,t){for(var e=-1,r=n.length;++e<r&&Q(t,n[e],0)>-1;);return e}function nn(n){return n.split("")}function tn(n){return We.test(n)}function en(n){return n.match(fr)||[]}function rn(n){return tn(n)?en(n):nn(n)}function un(n){return null==n?"":J(n)}function on(n,t,e){if(n=un(n),n&&(e||void 0===t))return n.replace(ar,"");if(!n||!(t=J(t)))return n;var r=rn(n),u=rn(t),o=Z(r,u),i=Y(r,u)+1;return X(r,o,i).join("")}function cn(n){return n=n.toString().replace(hr,""),n=n.match(lr)[2].replace(" ",""),n=n?n.split(sr):[],n=n.map(function(n){return on(n.replace(pr,""))})}function fn(n,t){var e={};C(n,function(n,t){function r(t,e){var r=G(u,function(n){return t[n]});r.push(e),n.apply(null,r)}var u;if(Ft(n))u=n.slice(0,-1),n=n[n.length-1],e[t]=u.concat(u.length>0?r:n);else if(1===n.length)e[t]=n;else{if(u=cn(n),0===n.length&&0===u.length)throw new Error("autoInject task functions require explicit parameters.");u.pop(),e[t]=u.concat(r)}}),Me(e,t)}function an(n){setTimeout(n,0)}function ln(n){return u(function(t,e){n(function(){t.apply(null,e)})})}function sn(){this.head=this.tail=null,this.length=0}function pn(n,t){n.length=1,n.head=n.tail=t}function hn(n,t,e){function r(n,t,e){if(null!=e&&"function"!=typeof e)throw new Error("task callback must be a function");if(f.started=!0,Ft(n)||(n=[n]),0===n.length&&f.idle())return dr(function(){f.drain()});for(var r=0,u=n.length;r<u;r++){var o={data:n[r],callback:e||h};t?f._tasks.unshift(o):f._tasks.push(o)}dr(f.process)}function o(n){return u(function(t){i-=1;for(var e=0,r=n.length;e<r;e++){var u=n[e],o=Q(c,u,0);o>=0&&c.splice(o),u.callback.apply(u,t),null!=t[0]&&f.error(t[0],u.data)}i<=f.concurrency-f.buffer&&f.unsaturated(),f.idle()&&f.drain(),f.process()})}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var i=0,c=[],f={_tasks:new sn,concurrency:t,payload:e,saturated:h,unsaturated:h,buffer:t/4,empty:h,drain:h,error:h,started:!1,paused:!1,push:function(n,t){r(n,!1,t)},kill:function(){f.drain=h,f._tasks.empty()},unshift:function(n,t){r(n,!0,t)},process:function(){for(;!f.paused&&i<f.concurrency&&f._tasks.length;){var t=[],e=[],r=f._tasks.length;f.payload&&(r=Math.min(r,f.payload));for(var u=0;u<r;u++){var a=f._tasks.shift();t.push(a),e.push(a.data)}0===f._tasks.length&&f.empty(),i+=1,c.push(t[0]),i===f.concurrency&&f.saturated();var l=I(o(t));n(e,l)}},length:function(){return f._tasks.length},running:function(){return i},workersList:function(){return c},idle:function(){return f._tasks.length+i===0},pause:function(){f.paused=!0},resume:function(){if(f.paused!==!1){f.paused=!1;for(var n=Math.min(f.concurrency,f._tasks.length),t=1;t<=n;t++)dr(f.process)}}};return f}function yn(n,t){return hn(n,1,t)}function vn(n,t,e,r){r=y(r||h),gr(n,function(n,r,u){e(t,n,function(n,e){t=e,u(n)})},function(n){r(n,t)})}function dn(n,t,e,r){var u=[];n(t,function(n,t,r){e(n,function(n,t){u=u.concat(t||[]),r(n)})},function(n){r(n,u)})}function mn(n){return function(t,e,r){return n(gr,t,e,r)}}function gn(n,t,e){return function(r,u,o,i){function c(){i&&i(null,e(!1))}function f(n,r,u){return i?void o(n,function(r,c){i&&(r||t(c))?(r?i(r):i(r,e(!0,n)),i=o=!1,u(r,xe)):u()}):u()}arguments.length>3?(i=i||h,n(r,u,f,c)):(i=o,i=i||h,o=u,n(r,f,c))}}function bn(n,t){return t}function jn(n){return u(function(t,e){t.apply(null,e.concat([u(function(t,e){"object"==typeof console&&(t?console.error&&console.error(t):console[n]&&D(e,function(t){console[n](t)}))})]))})}function Sn(n,t,e){function r(t,r){return t?e(t):r?void n(o):e(null)}e=I(e||h);var o=u(function(n,u){return n?e(n):(u.push(r),void t.apply(this,u))});r(null,!0)}function kn(n,t,e){e=I(e||h);var r=u(function(u,o){return u?e(u):t.apply(this,o)?n(r):void e.apply(null,[null].concat(o))});n(r)}function wn(n,t,e){kn(n,function(){return!t.apply(this,arguments)},e)}function xn(n,t,e){function r(t){return t?e(t):void n(u)}function u(n,u){return n?e(n):u?void t(r):e(null)}e=I(e||h),n(u)}function On(n){return function(t,e,r){return n(t,r)}}function En(n,t,e){Ee(n,On(t),e)}function Ln(n,t,e,r){_(t)(n,On(e),r)}function An(n){return ut(function(t,e){var r=!0;t.push(function(){var n=arguments;r?dr(function(){e.apply(null,n)}):e.apply(null,n)}),n.apply(this,t),r=!1})}function Tn(n){return!n}function Fn(n){return function(t){return null==t?void 0:t[n]}}function In(n,t,e,r){var u=new Array(t.length);n(t,function(n,t,r){e(n,function(n,e){u[t]=!!e,r(n)})},function(n){if(n)return r(n);for(var e=[],o=0;o<t.length;o++)u[o]&&e.push(t[o]);r(null,e)})}function _n(n,t,e,r){var u=[];n(t,function(n,t,r){e(n,function(e,o){e?r(e):(o&&u.push({index:t,value:n}),r())})},function(n){n?r(n):r(null,G(u.sort(function(n,t){return n.index-t.index}),Fn("value")))})}function Bn(n,t,e,r){var u=p(t)?In:_n;u(n,t,e,r||h)}function Mn(n,t){function e(n){return n?r(n):void u(e)}var r=I(t||h),u=An(n);e()}function Un(n,t,e,r){r=y(r||h);var u={};B(n,t,function(n,t,r){e(n,t,function(n,e){return n?r(n):(u[t]=e,void r())})},function(n){r(n,u)})}function zn(n,t){return t in n}function Vn(n,t){var e=Object.create(null),o=Object.create(null);t=t||r;var i=ut(function(r,i){var c=t.apply(null,r);zn(e,c)?dr(function(){i.apply(null,e[c])}):zn(o,c)?o[c].push(i):(o[c]=[i],n.apply(null,r.concat([u(function(n){e[c]=n;var t=o[c];delete o[c];for(var r=0,u=t.length;r<u;r++)t[r].apply(null,n)})])))});return i.memo=e,i.unmemoized=n,i}function Pn(n,t,e){e=e||h;var r=p(t)?[]:{};n(t,function(n,t,e){n(u(function(n,u){u.length<=1&&(u=u[0]),r[t]=u,e(n)}))},function(n){e(n,r)})}function qn(n,t){Pn(Ee,n,t)}function Dn(n,t,e){Pn(_(t),n,e)}function Rn(n,t){if(t=y(t||h),!Ft(n))return t(new TypeError("First argument to race must be an array of functions"));if(!n.length)return t();for(var e=0,r=n.length;e<r;e++)n[e](t)}function Cn(n,t,e,r){var u=Rr.call(n).reverse();vn(u,t,e,r)}function $n(n){return ut(function(t,e){return t.push(u(function(n,t){if(n)e(null,{error:n});else{var r=null;1===t.length?r=t[0]:t.length>1&&(r=t),e(null,{value:r})}})),n.apply(this,t)})}function Wn(n,t,e,r){Bn(n,t,function(n,t){e(n,function(n,e){t(n,!e)})},r)}function Nn(n){var t;return Ft(n)?t=G(n,$n):(t={},C(n,function(n,e){t[e]=$n.call(this,n)})),t}function Qn(n){return function(){return n}}function Gn(n,t,e){function r(n,t){if("object"==typeof t)n.times=+t.times||o,n.intervalFunc="function"==typeof t.interval?t.interval:Qn(+t.interval||i),n.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");n.times=+t||o}}function u(){t(function(n){n&&f++<c.times&&("function"!=typeof c.errorFilter||c.errorFilter(n))?setTimeout(u,c.intervalFunc(f)):e.apply(null,arguments)})}var o=5,i=0,c={times:o,intervalFunc:Qn(i)};if(arguments.length<3&&"function"==typeof n?(e=t||h,t=n):(r(c,n),e=e||h),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var f=1;u()}function Hn(n,t){Pn(gr,n,t)}function Jn(n,t,e){function r(n,t){var e=n.criteria,r=t.criteria;return e<r?-1:e>r?1:0}Le(n,function(n,e){t(n,function(t,r){return t?e(t):void e(null,{value:n,criteria:r})})},function(n,t){return n?e(n):void e(null,G(t.sort(r),Fn("value")))})}function Kn(n,t,e){function r(){c||(o.apply(null,arguments),clearTimeout(i))}function u(){var t=n.name||"anonymous",r=new Error('Callback function "'+t+'" timed out.');r.code="ETIMEDOUT",e&&(r.info=e),c=!0,o(r)}var o,i,c=!1;return ut(function(e,c){o=c,i=setTimeout(u,t),n.apply(null,e.concat(r))})}function Xn(n,t,e,r){for(var u=-1,o=Kr(Jr((t-n)/(e||1)),0),i=Array(o);o--;)i[r?o:++u]=n,n+=e;return i}function Yn(n,t,e,r){Te(Xn(0,n,1),t,e,r)}function Zn(n,t,e,r){3===arguments.length&&(r=e,e=t,t=Ft(n)?[]:{}),r=y(r||h),Ee(n,function(n,r,u){e(t,n,r,u)},function(n){r(n,t)})}function nt(n){return function(){return(n.unmemoized||n).apply(null,arguments)}}function tt(n,t,e){if(e=I(e||h),!n())return e(null);var r=u(function(u,o){return u?e(u):n()?t(r):void e.apply(null,[null].concat(o))});t(r)}function et(n,t,e){tt(function(){return!n.apply(this,arguments)},t,e)}var rt=Math.max,ut=function(n){return u(function(t){var e=t.pop();n.call(this,t,e)})},ot="object"==typeof global&&global&&global.Object===Object&&global,it="object"==typeof self&&self&&self.Object===Object&&self,ct=ot||it||Function("return this")(),ft=ct.Symbol,at=Object.prototype,lt=at.hasOwnProperty,st=at.toString,pt=ft?ft.toStringTag:void 0,ht=Object.prototype,yt=ht.toString,vt="[object Null]",dt="[object Undefined]",mt=ft?ft.toStringTag:void 0,gt="[object AsyncFunction]",bt="[object Function]",jt="[object GeneratorFunction]",St="[object Proxy]",kt=9007199254740991,wt="function"==typeof Symbol&&Symbol.iterator,xt=function(n){return wt&&n[wt]&&n[wt]()},Ot="[object Arguments]",Et=Object.prototype,Lt=Et.hasOwnProperty,At=Et.propertyIsEnumerable,Tt=m(function(){return arguments}())?m:function(n){return d(n)&&Lt.call(n,"callee")&&!At.call(n,"callee")},Ft=Array.isArray,It="object"==typeof n&&n&&!n.nodeType&&n,_t=It&&"object"==typeof module&&module&&!module.nodeType&&module,Bt=_t&&_t.exports===It,Mt=Bt?ct.Buffer:void 0,Ut=Mt?Mt.isBuffer:void 0,zt=Ut||g,Vt=9007199254740991,Pt=/^(?:0|[1-9]\d*)$/,qt="[object Arguments]",Dt="[object Array]",Rt="[object Boolean]",Ct="[object Date]",$t="[object Error]",Wt="[object Function]",Nt="[object Map]",Qt="[object Number]",Gt="[object Object]",Ht="[object RegExp]",Jt="[object Set]",Kt="[object String]",Xt="[object WeakMap]",Yt="[object ArrayBuffer]",Zt="[object DataView]",ne="[object Float32Array]",te="[object Float64Array]",ee="[object Int8Array]",re="[object Int16Array]",ue="[object Int32Array]",oe="[object Uint8Array]",ie="[object Uint8ClampedArray]",ce="[object Uint16Array]",fe="[object Uint32Array]",ae={};ae[ne]=ae[te]=ae[ee]=ae[re]=ae[ue]=ae[oe]=ae[ie]=ae[ce]=ae[fe]=!0,ae[qt]=ae[Dt]=ae[Yt]=ae[Rt]=ae[Zt]=ae[Ct]=ae[$t]=ae[Wt]=ae[Nt]=ae[Qt]=ae[Gt]=ae[Ht]=ae[Jt]=ae[Kt]=ae[Xt]=!1;var le,se="object"==typeof n&&n&&!n.nodeType&&n,pe=se&&"object"==typeof module&&module&&!module.nodeType&&module,he=pe&&pe.exports===se,ye=he&&ot.process,ve=function(){try{return ye&&ye.binding("util")}catch(n){}}(),de=ve&&ve.isTypedArray,me=de?S(de):j,ge=Object.prototype,be=ge.hasOwnProperty,je=Object.prototype,Se=x(Object.keys,Object),ke=Object.prototype,we=ke.hasOwnProperty,xe={},Oe=M(B,1/0),Ee=function(n,t,e){var r=p(n)?U:Oe;r(n,t,e)},Le=z(V),Ae=o(Le),Te=P(V),Fe=M(Te,1),Ie=o(Fe),_e=u(function(n,t){return u(function(e){return n.apply(null,t.concat(e))})}),Be=R(),Me=function(n,t,e){function r(n,t){b.push(function(){f(n,t)})}function o(){if(0===b.length&&0===d)return e(null,v);for(;b.length&&d<t;){var n=b.shift();n()}}function i(n,t){var e=g[n];e||(e=g[n]=[]),e.push(t)}function c(n){var t=g[n]||[];D(t,function(n){n()}),o()}function f(n,t){if(!m){var r=I(u(function(t,r){if(d--,r.length<=1&&(r=r[0]),t){var u={};C(v,function(n,t){u[t]=n}),u[n]=r,m=!0,g=[],e(t,u)}else v[n]=r,c(n)}));d++;var o=t[t.length-1];t.length>1?o(v,r):o(r)}}function a(){for(var n,t=0;j.length;)n=j.pop(),t++,D(l(n),function(n){0===--S[n]&&j.push(n)});if(t!==p)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}function l(t){var e=[];return C(n,function(n,r){Ft(n)&&Q(n,t,0)>=0&&e.push(r)}),e}"function"==typeof t&&(e=t,t=null),e=y(e||h);var s=E(n),p=s.length;if(!p)return e(null);t||(t=p);var v={},d=0,m=!1,g={},b=[],j=[],S={};C(n,function(t,e){if(!Ft(t))return r(e,[t]),void j.push(e);var u=t.slice(0,t.length-1),o=u.length;return 0===o?(r(e,t),void j.push(e)):(S[e]=o,void D(u,function(c){if(!n[c])throw new Error("async.auto task `"+e+"` has a non-existent dependency in "+u.join(", "));i(c,function(){o--,0===o&&r(e,t)})}))}),a(),o()},Ue="[object Symbol]",ze=1/0,Ve=ft?ft.prototype:void 0,Pe=Ve?Ve.toString:void 0,qe="\\ud800-\\udfff",De="\\u0300-\\u036f\\ufe20-\\ufe23",Re="\\u20d0-\\u20f0",Ce="\\ufe0e\\ufe0f",$e="\\u200d",We=RegExp("["+$e+qe+De+Re+Ce+"]"),Ne="\\ud800-\\udfff",Qe="\\u0300-\\u036f\\ufe20-\\ufe23",Ge="\\u20d0-\\u20f0",He="\\ufe0e\\ufe0f",Je="["+Ne+"]",Ke="["+Qe+Ge+"]",Xe="\\ud83c[\\udffb-\\udfff]",Ye="(?:"+Ke+"|"+Xe+")",Ze="[^"+Ne+"]",nr="(?:\\ud83c[\\udde6-\\uddff]){2}",tr="[\\ud800-\\udbff][\\udc00-\\udfff]",er="\\u200d",rr=Ye+"?",ur="["+He+"]?",or="(?:"+er+"(?:"+[Ze,nr,tr].join("|")+")"+ur+rr+")*",ir=ur+rr+or,cr="(?:"+[Ze+Ke+"?",Ke,nr,tr,Je].join("|")+")",fr=RegExp(Xe+"(?="+Xe+")|"+cr+ir,"g"),ar=/^\s+|\s+$/g,lr=/^(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,sr=/,/,pr=/(=.+)?(\s*)$/,hr=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,yr="function"==typeof setImmediate&&setImmediate,vr="object"==typeof process&&"function"==typeof process.nextTick;le=yr?setImmediate:vr?process.nextTick:an;var dr=ln(le);sn.prototype.removeLink=function(n){return n.prev?n.prev.next=n.next:this.head=n.next,n.next?n.next.prev=n.prev:this.tail=n.prev,n.prev=n.next=null,this.length-=1,n},sn.prototype.empty=sn,sn.prototype.insertAfter=function(n,t){t.prev=n,t.next=n.next,n.next?n.next.prev=t:this.tail=t,n.next=t,this.length+=1},sn.prototype.insertBefore=function(n,t){t.prev=n.prev,t.next=n,n.prev?n.prev.next=t:this.head=t,n.prev=t,this.length+=1},sn.prototype.unshift=function(n){this.head?this.insertBefore(this.head,n):pn(this,n)},sn.prototype.push=function(n){this.tail?this.insertAfter(this.tail,n):pn(this,n)},sn.prototype.shift=function(){return this.head&&this.removeLink(this.head)},sn.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)};var mr,gr=M(B,1),br=u(function(n){return u(function(t){var e=this,r=t[t.length-1];"function"==typeof r?t.pop():r=h,vn(n,t,function(n,t,r){t.apply(e,n.concat([u(function(n,t){r(n,t)})]))},function(n,t){r.apply(e,[n].concat(t))})})}),jr=u(function(n){return br.apply(null,n.reverse())}),Sr=z(dn),kr=mn(dn),wr=u(function(n){var t=[null].concat(n);return ut(function(n,e){return e.apply(this,t)})}),xr=gn(Ee,r,bn),Or=gn(B,r,bn),Er=gn(gr,r,bn),Lr=jn("dir"),Ar=M(Ln,1),Tr=gn(Ee,Tn,Tn),Fr=gn(B,Tn,Tn),Ir=M(Fr,1),_r=z(Bn),Br=P(Bn),Mr=M(Br,1),Ur=jn("log"),zr=M(Un,1/0),Vr=M(Un,1);mr=vr?process.nextTick:yr?setImmediate:an;var Pr=ln(mr),qr=function(n,t){return hn(function(t,e){n(t[0],e)},t,1)},Dr=function(n,t){var e=qr(n,t);return e.push=function(n,t,r){if(null==r&&(r=h),"function"!=typeof r)throw new Error("task callback must be a function");if(e.started=!0,Ft(n)||(n=[n]),0===n.length)return dr(function(){e.drain()});t=t||0;for(var u=e._tasks.head;u&&t>=u.priority;)u=u.next;for(var o=0,i=n.length;o<i;o++){var c={data:n[o],priority:t,callback:r};u?e._tasks.insertBefore(u,c):e._tasks.push(c)}dr(e.process)},delete e.unshift,e},Rr=Array.prototype.slice,Cr=z(Wn),$r=P(Wn),Wr=M($r,1),Nr=function(n,t){return t||(t=n,n=null),ut(function(e,r){function u(n){t.apply(null,e.concat([n]))}n?Gn(n,u,r):Gn(u,r)})},Qr=gn(Ee,Boolean,r),Gr=gn(B,Boolean,r),Hr=M(Gr,1),Jr=Math.ceil,Kr=Math.max,Xr=M(Yn,1/0),Yr=M(Yn,1),Zr=function(n,t){function e(o){if(r===n.length)return t.apply(null,[null].concat(o));var i=I(u(function(n,r){return n?t.apply(null,[n].concat(r)):void e(r)}));o.push(i);var c=n[r++];c.apply(null,o)}if(t=y(t||h),!Ft(n))return t(new Error("First argument to waterfall must be an array of functions"));if(!n.length)return t();var r=0;e([])},nu={applyEach:Ae,applyEachSeries:Ie,apply:_e,asyncify:q,auto:Me,autoInject:fn,cargo:yn,compose:jr,concat:Sr,concatSeries:kr,constant:wr,detect:xr,detectLimit:Or,detectSeries:Er,dir:Lr,doDuring:Sn,doUntil:wn,doWhilst:kn,during:xn,each:En,eachLimit:Ln,eachOf:Ee,eachOfLimit:B,eachOfSeries:gr,eachSeries:Ar,ensureAsync:An,every:Tr,everyLimit:Fr,everySeries:Ir,filter:_r,filterLimit:Br,filterSeries:Mr,forever:Mn,log:Ur,map:Le,mapLimit:Te,mapSeries:Fe,mapValues:zr,mapValuesLimit:Un,mapValuesSeries:Vr,memoize:Vn,nextTick:Pr,parallel:qn,parallelLimit:Dn,priorityQueue:Dr,queue:qr,race:Rn,reduce:vn,reduceRight:Cn,reflect:$n,reflectAll:Nn,reject:Cr,rejectLimit:$r,rejectSeries:Wr,retry:Gn,retryable:Nr,seq:br,series:Hn,setImmediate:dr,some:Qr,someLimit:Gr,someSeries:Hr,sortBy:Jn,timeout:Kn,times:Xr,timesLimit:Yn,timesSeries:Yr,transform:Zn,unmemoize:nt,until:et,waterfall:Zr,whilst:tt,all:Tr,any:Qr,forEach:En,forEachSeries:Ar,forEachLimit:Ln,forEachOf:Ee,forEachOfSeries:gr,forEachOfLimit:B,inject:vn,foldl:vn,foldr:Cn,select:_r,selectLimit:Br,selectSeries:Mr,wrapSync:q};n.default=nu,n.applyEach=Ae,n.applyEachSeries=Ie,n.apply=_e,n.asyncify=q,n.auto=Me,n.autoInject=fn,n.cargo=yn,n.compose=jr,n.concat=Sr,n.concatSeries=kr,n.constant=wr,n.detect=xr,n.detectLimit=Or,n.detectSeries=Er,n.dir=Lr,n.doDuring=Sn,n.doUntil=wn,n.doWhilst=kn,n.during=xn,n.each=En,n.eachLimit=Ln,n.eachOf=Ee,n.eachOfLimit=B,n.eachOfSeries=gr,n.eachSeries=Ar,n.ensureAsync=An,n.every=Tr,n.everyLimit=Fr,n.everySeries=Ir,n.filter=_r,n.filterLimit=Br,n.filterSeries=Mr,n.forever=Mn,n.log=Ur,n.map=Le,n.mapLimit=Te,n.mapSeries=Fe,n.mapValues=zr,n.mapValuesLimit=Un,n.mapValuesSeries=Vr,n.memoize=Vn,n.nextTick=Pr,n.parallel=qn,n.parallelLimit=Dn,n.priorityQueue=Dr,n.queue=qr,n.race=Rn,n.reduce=vn,n.reduceRight=Cn,n.reflect=$n,n.reflectAll=Nn,n.reject=Cr,n.rejectLimit=$r,n.rejectSeries=Wr,n.retry=Gn,n.retryable=Nr,n.seq=br,n.series=Hn,n.setImmediate=dr,n.some=Qr,n.someLimit=Gr,n.someSeries=Hr,n.sortBy=Jn,n.timeout=Kn,n.times=Xr,n.timesLimit=Yn,n.timesSeries=Yr,n.transform=Zn,n.unmemoize=nt,n.until=et,n.waterfall=Zr,n.whilst=tt,n.all=Tr,n.allLimit=Fr,n.allSeries=Ir,n.any=Qr,n.anyLimit=Gr,n.anySeries=Hr,n.find=xr,n.findLimit=Or,n.findSeries=Er,n.forEach=En,n.forEachSeries=Ar,n.forEachLimit=Ln,n.forEachOf=Ee,n.forEachOfSeries=gr,n.forEachOfLimit=B,n.inject=vn,n.foldl=vn,n.foldr=Cn,n.select=_r,n.selectLimit=Br,n.selectSeries=Mr,n.wrapSync=q,Object.defineProperty(n,"__esModule",{value:!0})});

}).call(this,require('_process'),typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"_process":8}],2:[function(require,module,exports){
function apply(r,e,n){switch(n.length){case 0:return r.call(e);case 1:return r.call(e,n[0]);case 2:return r.call(e,n[0],n[1]);case 3:return r.call(e,n[0],n[1],n[2])}return r.apply(e,n)}function baseTimes(r,e){for(var n=-1,t=Array(r);++n<r;)t[n]=e(n);return t}function arrayLikeKeys(r,e){var n=isArray(r)||isArguments(r)?baseTimes(r.length,String):[],t=n.length,i=!!t;for(var o in r)!e&&!hasOwnProperty.call(r,o)||i&&("length"==o||isIndex(o,t))||n.push(o);return n}function assignValue(r,e,n){var t=r[e];hasOwnProperty.call(r,e)&&eq(t,n)&&(void 0!==n||e in r)||(r[e]=n)}function baseKeysIn(r){if(!isObject(r))return nativeKeysIn(r);var e=isPrototype(r),n=[];for(var t in r)("constructor"!=t||!e&&hasOwnProperty.call(r,t))&&n.push(t);return n}function baseRest(r,e){return e=nativeMax(void 0===e?r.length-1:e,0),function(){for(var n=arguments,t=-1,i=nativeMax(n.length-e,0),o=Array(i);++t<i;)o[t]=n[e+t];t=-1;for(var a=Array(e+1);++t<e;)a[t]=n[t];return a[e]=o,apply(r,this,a)}}function copyObject(r,e,n,t){n||(n={});for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t?t(n[a],r[a],a,n,r):void 0;assignValue(n,a,void 0===s?r[a]:s)}return n}function createAssigner(r){return baseRest(function(e,n){var t=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=r.length>3&&"function"==typeof o?(i--,o):void 0,a&&isIterateeCall(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++t<i;){var s=n[t];s&&r(e,s,t,o)}return e})}function isIndex(r,e){return e=null==e?MAX_SAFE_INTEGER:e,!!e&&("number"==typeof r||reIsUint.test(r))&&r>-1&&r%1==0&&r<e}function isIterateeCall(r,e,n){if(!isObject(n))return!1;var t=typeof e;return!!("number"==t?isArrayLike(n)&&isIndex(e,n.length):"string"==t&&e in n)&&eq(n[e],r)}function isPrototype(r){var e=r&&r.constructor,n="function"==typeof e&&e.prototype||objectProto;return r===n}function nativeKeysIn(r){var e=[];if(null!=r)for(var n in Object(r))e.push(n);return e}function eq(r,e){return r===e||r!==r&&e!==e}function isArguments(r){return isArrayLikeObject(r)&&hasOwnProperty.call(r,"callee")&&(!propertyIsEnumerable.call(r,"callee")||objectToString.call(r)==argsTag)}function isArrayLike(r){return null!=r&&isLength(r.length)&&!isFunction(r)}function isArrayLikeObject(r){return isObjectLike(r)&&isArrayLike(r)}function isFunction(r){var e=isObject(r)?objectToString.call(r):"";return e==funcTag||e==genTag}function isLength(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=MAX_SAFE_INTEGER}function isObject(r){var e=typeof r;return!!r&&("object"==e||"function"==e)}function isObjectLike(r){return!!r&&"object"==typeof r}function keysIn(r){return isArrayLike(r)?arrayLikeKeys(r,!0):baseKeysIn(r)}var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",reIsUint=/^(?:0|[1-9]\d*)$/,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,propertyIsEnumerable=objectProto.propertyIsEnumerable,nativeMax=Math.max,isArray=Array.isArray,assignIn=createAssigner(function(r,e){copyObject(e,keysIn(e),r)});module.exports=assignIn;
},{}],3:[function(require,module,exports){
(function (global){
function arrayPush(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}function baseFlatten(e,t,r,n,o){var a=-1,l=e.length;for(r||(r=isFlattenable),o||(o=[]);++a<l;){var b=e[a];t>0&&r(b)?t>1?baseFlatten(b,t-1,r,n,o):arrayPush(o,b):n||(o[o.length]=b)}return o}function isFlattenable(e){return isArray(e)||isArguments(e)||!!(spreadableSymbol&&e&&e[spreadableSymbol])}function flatten(e){var t=e?e.length:0;return t?baseFlatten(e,1):[]}function isArguments(e){return isArrayLikeObject(e)&&hasOwnProperty.call(e,"callee")&&(!propertyIsEnumerable.call(e,"callee")||objectToString.call(e)==argsTag)}function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?objectToString.call(e):"";return t==funcTag||t==genTag}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,Symbol=root.Symbol,propertyIsEnumerable=objectProto.propertyIsEnumerable,spreadableSymbol=Symbol?Symbol.isConcatSpreadable:void 0,isArray=Array.isArray;module.exports=flatten;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],4:[function(require,module,exports){
(function (global){
function arrayAggregator(e,t,r,a){for(var n=-1,o=e?e.length:0;++n<o;){var s=e[n];t(a,s,r(s),e)}return a}function arraySome(e,t){for(var r=-1,a=e?e.length:0;++r<a;)if(t(e[r],r,e))return!0;return!1}function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function baseTimes(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}function baseUnary(e){return function(t){return e(t)}}function getValue(e,t){return null==e?void 0:e[t]}function isHostObject(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function mapToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e,a){r[++t]=[a,e]}),r}function overArg(e,t){return function(r){return e(t(r))}}function setToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function Hash(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(e){return this.has(e)&&delete this.__data__[e]}function hashGet(e){var t=this.__data__;if(nativeCreate){var r=t[e];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty.call(t,e)?t[e]:void 0}function hashHas(e){var t=this.__data__;return nativeCreate?void 0!==t[e]:hasOwnProperty.call(t,e)}function hashSet(e,t){var r=this.__data__;return r[e]=nativeCreate&&void 0===t?HASH_UNDEFINED:t,this}function ListCache(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(e){var t=this.__data__,r=assocIndexOf(t,e);if(r<0)return!1;var a=t.length-1;return r==a?t.pop():splice.call(t,r,1),!0}function listCacheGet(e){var t=this.__data__,r=assocIndexOf(t,e);return r<0?void 0:t[r][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,t){var r=this.__data__,a=assocIndexOf(r,e);return a<0?r.push([e,t]):r[a][1]=t,this}function MapCache(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(e){return getMapData(this,e).delete(e)}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,t){return getMapData(this,e).set(e,t),this}function SetCache(e){var t=-1,r=e?e.length:0;for(this.__data__=new MapCache;++t<r;)this.add(e[t])}function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED),this}function setCacheHas(e){return this.__data__.has(e)}function Stack(e){this.__data__=new ListCache(e)}function stackClear(){this.__data__=new ListCache}function stackDelete(e){return this.__data__.delete(e)}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}function stackSet(e,t){var r=this.__data__;if(r instanceof ListCache){var a=r.__data__;if(!Map||a.length<LARGE_ARRAY_SIZE-1)return a.push([e,t]),this;r=this.__data__=new MapCache(a)}return r.set(e,t),this}function arrayLikeKeys(e,t){var r=isArray(e)||isArguments(e)?baseTimes(e.length,String):[],a=r.length,n=!!a;for(var o in e)!t&&!hasOwnProperty.call(e,o)||n&&("length"==o||isIndex(o,a))||r.push(o);return r}function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq(e[r][0],t))return r;return-1}function baseAggregator(e,t,r,a){return baseEach(e,function(e,n,o){t(a,e,r(e),o)}),a}function baseForOwn(e,t){return e&&baseFor(e,t,keys)}function baseGet(e,t){t=isKey(t,e)?[t]:castPath(t);for(var r=0,a=t.length;null!=e&&r<a;)e=e[toKey(t[r++])];return r&&r==a?e:void 0}function baseGetTag(e){return objectToString.call(e)}function baseHasIn(e,t){return null!=e&&t in Object(e)}function baseIsEqual(e,t,r,a,n){return e===t||(null==e||null==t||!isObject(e)&&!isObjectLike(t)?e!==e&&t!==t:baseIsEqualDeep(e,t,baseIsEqual,r,a,n))}function baseIsEqualDeep(e,t,r,a,n,o){var s=isArray(e),i=isArray(t),c=arrayTag,u=arrayTag;s||(c=getTag(e),c=c==argsTag?objectTag:c),i||(u=getTag(t),u=u==argsTag?objectTag:u);var g=c==objectTag&&!isHostObject(e),l=u==objectTag&&!isHostObject(t),y=c==u;if(y&&!g)return o||(o=new Stack),s||isTypedArray(e)?equalArrays(e,t,r,a,n,o):equalByTag(e,t,c,r,a,n,o);if(!(n&PARTIAL_COMPARE_FLAG)){var f=g&&hasOwnProperty.call(e,"__wrapped__"),p=l&&hasOwnProperty.call(t,"__wrapped__");if(f||p){var h=f?e.value():e,b=p?t.value():t;return o||(o=new Stack),r(h,b,a,n,o)}}return!!y&&(o||(o=new Stack),equalObjects(e,t,r,a,n,o))}function baseIsMatch(e,t,r,a){var n=r.length,o=n,s=!a;if(null==e)return!o;for(e=Object(e);n--;){var i=r[n];if(s&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++n<o;){i=r[n];var c=i[0],u=e[c],g=i[1];if(s&&i[2]){if(void 0===u&&!(c in e))return!1}else{var l=new Stack;if(a)var y=a(u,g,c,e,t,l);if(!(void 0===y?baseIsEqual(g,u,a,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG,l):y))return!1}}return!0}function baseIsNative(e){if(!isObject(e)||isMasked(e))return!1;var t=isFunction(e)||isHostObject(e)?reIsNative:reIsHostCtor;return t.test(toSource(e))}function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[objectToString.call(e)]}function baseIteratee(e){return"function"==typeof e?e:null==e?identity:"object"==typeof e?isArray(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e):property(e)}function baseKeys(e){if(!isPrototype(e))return nativeKeys(e);var t=[];for(var r in Object(e))hasOwnProperty.call(e,r)&&"constructor"!=r&&t.push(r);return t}function baseMatches(e){var t=getMatchData(e);return 1==t.length&&t[0][2]?matchesStrictComparable(t[0][0],t[0][1]):function(r){return r===e||baseIsMatch(r,e,t)}}function baseMatchesProperty(e,t){return isKey(e)&&isStrictComparable(t)?matchesStrictComparable(toKey(e),t):function(r){var a=get(r,e);return void 0===a&&a===t?hasIn(r,e):baseIsEqual(t,a,void 0,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG)}}function basePropertyDeep(e){return function(t){return baseGet(t,e)}}function baseToString(e){if("string"==typeof e)return e;if(isSymbol(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}function castPath(e){return isArray(e)?e:stringToPath(e)}function createAggregator(e,t){return function(r,a){var n=isArray(r)?arrayAggregator:baseAggregator,o=t?t():{};return n(r,e,baseIteratee(a,2),o)}}function createBaseEach(e,t){return function(r,a){if(null==r)return r;if(!isArrayLike(r))return e(r,a);for(var n=r.length,o=t?n:-1,s=Object(r);(t?o--:++o<n)&&a(s[o],o,s)!==!1;);return r}}function createBaseFor(e){return function(t,r,a){for(var n=-1,o=Object(t),s=a(t),i=s.length;i--;){var c=s[e?i:++n];if(r(o[c],c,o)===!1)break}return t}}function equalArrays(e,t,r,a,n,o){var s=n&PARTIAL_COMPARE_FLAG,i=e.length,c=t.length;if(i!=c&&!(s&&c>i))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var g=-1,l=!0,y=n&UNORDERED_COMPARE_FLAG?new SetCache:void 0;for(o.set(e,t),o.set(t,e);++g<i;){var f=e[g],p=t[g];if(a)var h=s?a(p,f,g,t,e,o):a(f,p,g,e,t,o);if(void 0!==h){if(h)continue;l=!1;break}if(y){if(!arraySome(t,function(e,t){if(!y.has(t)&&(f===e||r(f,e,a,n,o)))return y.add(t)})){l=!1;break}}else if(f!==p&&!r(f,p,a,n,o)){l=!1;break}}return o.delete(e),o.delete(t),l}function equalByTag(e,t,r,a,n,o,s){switch(r){case dataViewTag:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case arrayBufferTag:return!(e.byteLength!=t.byteLength||!a(new Uint8Array(e),new Uint8Array(t)));case boolTag:case dateTag:case numberTag:return eq(+e,+t);case errorTag:return e.name==t.name&&e.message==t.message;case regexpTag:case stringTag:return e==t+"";case mapTag:var i=mapToArray;case setTag:var c=o&PARTIAL_COMPARE_FLAG;if(i||(i=setToArray),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;o|=UNORDERED_COMPARE_FLAG,s.set(e,t);var g=equalArrays(i(e),i(t),a,n,o,s);return s.delete(e),g;case symbolTag:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(t)}return!1}function equalObjects(e,t,r,a,n,o){var s=n&PARTIAL_COMPARE_FLAG,i=keys(e),c=i.length,u=keys(t),g=u.length;if(c!=g&&!s)return!1;for(var l=c;l--;){var y=i[l];if(!(s?y in t:hasOwnProperty.call(t,y)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var p=!0;o.set(e,t),o.set(t,e);for(var h=s;++l<c;){y=i[l];var b=e[y],T=t[y];if(a)var d=s?a(T,b,y,t,e,o):a(b,T,y,e,t,o);if(!(void 0===d?b===T||r(b,T,a,n,o):d)){p=!1;break}h||(h="constructor"==y)}if(p&&!h){var _=e.constructor,A=t.constructor;_!=A&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof A&&A instanceof A)&&(p=!1)}return o.delete(e),o.delete(t),p}function getMapData(e,t){var r=e.__data__;return isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}function getMatchData(e){for(var t=keys(e),r=t.length;r--;){var a=t[r],n=e[a];t[r]=[a,n,isStrictComparable(n)]}return t}function getNative(e,t){var r=getValue(e,t);return baseIsNative(r)?r:void 0}function hasPath(e,t,r){t=isKey(t,e)?[t]:castPath(t);for(var a,n=-1,o=t.length;++n<o;){var s=toKey(t[n]);if(!(a=null!=e&&r(e,s)))break;e=e[s]}if(a)return a;var o=e?e.length:0;return!!o&&isLength(o)&&isIndex(s,o)&&(isArray(e)||isArguments(e))}function isIndex(e,t){return t=null==t?MAX_SAFE_INTEGER:t,!!t&&("number"==typeof e||reIsUint.test(e))&&e>-1&&e%1==0&&e<t}function isKey(e,t){if(isArray(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol(e))||(reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t))}function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}function isPrototype(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||objectProto;return e===r}function isStrictComparable(e){return e===e&&!isObject(e)}function matchesStrictComparable(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}function toKey(e){if("string"==typeof e||isSymbol(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function memoize(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);var r=function(){var a=arguments,n=t?t.apply(this,a):a[0],o=r.cache;if(o.has(n))return o.get(n);var s=e.apply(this,a);return r.cache=o.set(n,s),s};return r.cache=new(memoize.Cache||MapCache),r}function eq(e,t){return e===t||e!==e&&t!==t}function isArguments(e){return isArrayLikeObject(e)&&hasOwnProperty.call(e,"callee")&&(!propertyIsEnumerable.call(e,"callee")||objectToString.call(e)==argsTag)}function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?objectToString.call(e):"";return t==funcTag||t==genTag}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toString(e){return null==e?"":baseToString(e)}function get(e,t,r){var a=null==e?void 0:baseGet(e,t);return void 0===a?r:a}function hasIn(e,t){return null!=e&&hasPath(e,t,baseHasIn)}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function identity(e){return e}function property(e){return isKey(e)?baseProperty(toKey(e)):basePropertyDeep(e)}var LARGE_ARRAY_SIZE=200,FUNC_ERROR_TEXT="Expected a function",HASH_UNDEFINED="__lodash_hash_undefined__",UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2,INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",promiseTag="[object Promise]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reEscapeChar=/\\(\\)?/g,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,nativeKeys=overArg(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var baseEach=createBaseEach(baseForOwn),baseFor=createBaseFor(),getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(e){var t=objectToString.call(e),r=t==objectTag?e.constructor:void 0,a=r?toSource(r):void 0;if(a)switch(a){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return t});var stringToPath=memoize(function(e){e=toString(e);var t=[];return reLeadingDot.test(e)&&t.push(""),e.replace(rePropName,function(e,r,a,n){t.push(a?n.replace(reEscapeChar,"$1"):r||e)}),t}),groupBy=createAggregator(function(e,t,r){hasOwnProperty.call(e,r)?e[r].push(t):e[r]=[t]});memoize.Cache=MapCache;var isArray=Array.isArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=groupBy;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],5:[function(require,module,exports){
(function (global){
function getValue(e,t){return null==e?void 0:e[t]}function isHostObject(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function overArg(e,t){return function(r){return e(t(r))}}function baseGetTag(e){return objectToString.call(e)}function baseIsNative(e){if(!isObject(e)||isMasked(e))return!1;var t=isFunction(e)||isHostObject(e)?reIsNative:reIsHostCtor;return t.test(toSource(e))}function getNative(e,t){var r=getValue(e,t);return baseIsNative(r)?r:void 0}function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}function isPrototype(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||objectProto;return e===r}function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function isArguments(e){return isArrayLikeObject(e)&&hasOwnProperty.call(e,"callee")&&(!propertyIsEnumerable.call(e,"callee")||objectToString.call(e)==argsTag)}function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isEmpty(e){if(isArrayLike(e)&&(isArray(e)||"string"==typeof e||"function"==typeof e.splice||isBuffer(e)||isArguments(e)))return!e.length;var t=getTag(e);if(t==mapTag||t==setTag)return!e.size;if(nonEnumShadows||isPrototype(e))return!nativeKeys(e).length;for(var r in e)if(hasOwnProperty.call(e,r))return!1;return!0}function isFunction(e){var t=isObject(e)?objectToString.call(e):"";return t==funcTag||t==genTag}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function stubFalse(){return!1}var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",objectTag="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Buffer=moduleExports?root.Buffer:void 0,propertyIsEnumerable=objectProto.propertyIsEnumerable,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,nativeKeys=overArg(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nonEnumShadows=!propertyIsEnumerable.call({valueOf:1},"valueOf"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(e){var t=objectToString.call(e),r=t==objectTag?e.constructor:void 0,o=r?toSource(r):void 0;if(o)switch(o){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return t});var isArray=Array.isArray,isBuffer=nativeIsBuffer||stubFalse;module.exports=isEmpty;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],6:[function(require,module,exports){
(function (global){
function arrayReduce(e,t,r,a){var n=-1,o=e?e.length:0;for(a&&o&&(r=e[++n]);++n<o;)r=t(r,e[n],n,e);return r}function arraySome(e,t){for(var r=-1,a=e?e.length:0;++r<a;)if(t(e[r],r,e))return!0;return!1}function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function baseReduce(e,t,r,a,n){return n(e,function(e,n,o){r=a?(a=!1,e):t(r,e,n,o)}),r}function baseTimes(e,t){for(var r=-1,a=Array(e);++r<e;)a[r]=t(r);return a}function baseUnary(e){return function(t){return e(t)}}function getValue(e,t){return null==e?void 0:e[t]}function isHostObject(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function mapToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e,a){r[++t]=[a,e]}),r}function overArg(e,t){return function(r){return e(t(r))}}function setToArray(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function Hash(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{}}function hashDelete(e){return this.has(e)&&delete this.__data__[e]}function hashGet(e){var t=this.__data__;if(nativeCreate){var r=t[e];return r===HASH_UNDEFINED?void 0:r}return hasOwnProperty.call(t,e)?t[e]:void 0}function hashHas(e){var t=this.__data__;return nativeCreate?void 0!==t[e]:hasOwnProperty.call(t,e)}function hashSet(e,t){var r=this.__data__;return r[e]=nativeCreate&&void 0===t?HASH_UNDEFINED:t,this}function ListCache(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function listCacheClear(){this.__data__=[]}function listCacheDelete(e){var t=this.__data__,r=assocIndexOf(t,e);if(r<0)return!1;var a=t.length-1;return r==a?t.pop():splice.call(t,r,1),!0}function listCacheGet(e){var t=this.__data__,r=assocIndexOf(t,e);return r<0?void 0:t[r][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,t){var r=this.__data__,a=assocIndexOf(r,e);return a<0?r.push([e,t]):r[a][1]=t,this}function MapCache(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var a=e[t];this.set(a[0],a[1])}}function mapCacheClear(){this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function mapCacheDelete(e){return getMapData(this,e).delete(e)}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,t){return getMapData(this,e).set(e,t),this}function SetCache(e){var t=-1,r=e?e.length:0;for(this.__data__=new MapCache;++t<r;)this.add(e[t])}function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED),this}function setCacheHas(e){return this.__data__.has(e)}function Stack(e){this.__data__=new ListCache(e)}function stackClear(){this.__data__=new ListCache}function stackDelete(e){return this.__data__.delete(e)}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}function stackSet(e,t){var r=this.__data__;if(r instanceof ListCache){var a=r.__data__;if(!Map||a.length<LARGE_ARRAY_SIZE-1)return a.push([e,t]),this;r=this.__data__=new MapCache(a)}return r.set(e,t),this}function arrayLikeKeys(e,t){var r=isArray(e)||isArguments(e)?baseTimes(e.length,String):[],a=r.length,n=!!a;for(var o in e)!t&&!hasOwnProperty.call(e,o)||n&&("length"==o||isIndex(o,a))||r.push(o);return r}function assocIndexOf(e,t){for(var r=e.length;r--;)if(eq(e[r][0],t))return r;return-1}function baseForOwn(e,t){return e&&baseFor(e,t,keys)}function baseGet(e,t){t=isKey(t,e)?[t]:castPath(t);for(var r=0,a=t.length;null!=e&&r<a;)e=e[toKey(t[r++])];return r&&r==a?e:void 0}function baseGetTag(e){return objectToString.call(e)}function baseHasIn(e,t){return null!=e&&t in Object(e)}function baseIsEqual(e,t,r,a,n){return e===t||(null==e||null==t||!isObject(e)&&!isObjectLike(t)?e!==e&&t!==t:baseIsEqualDeep(e,t,baseIsEqual,r,a,n))}function baseIsEqualDeep(e,t,r,a,n,o){var s=isArray(e),i=isArray(t),c=arrayTag,u=arrayTag;s||(c=getTag(e),c=c==argsTag?objectTag:c),i||(u=getTag(t),u=u==argsTag?objectTag:u);var l=c==objectTag&&!isHostObject(e),y=u==objectTag&&!isHostObject(t),f=c==u;if(f&&!l)return o||(o=new Stack),s||isTypedArray(e)?equalArrays(e,t,r,a,n,o):equalByTag(e,t,c,r,a,n,o);if(!(n&PARTIAL_COMPARE_FLAG)){var g=l&&hasOwnProperty.call(e,"__wrapped__"),p=y&&hasOwnProperty.call(t,"__wrapped__");if(g||p){var h=g?e.value():e,b=p?t.value():t;return o||(o=new Stack),r(h,b,a,n,o)}}return!!f&&(o||(o=new Stack),equalObjects(e,t,r,a,n,o))}function baseIsMatch(e,t,r,a){var n=r.length,o=n,s=!a;if(null==e)return!o;for(e=Object(e);n--;){var i=r[n];if(s&&i[2]?i[1]!==e[i[0]]:!(i[0]in e))return!1}for(;++n<o;){i=r[n];var c=i[0],u=e[c],l=i[1];if(s&&i[2]){if(void 0===u&&!(c in e))return!1}else{var y=new Stack;if(a)var f=a(u,l,c,e,t,y);if(!(void 0===f?baseIsEqual(l,u,a,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG,y):f))return!1}}return!0}function baseIsNative(e){if(!isObject(e)||isMasked(e))return!1;var t=isFunction(e)||isHostObject(e)?reIsNative:reIsHostCtor;return t.test(toSource(e))}function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[objectToString.call(e)]}function baseIteratee(e){return"function"==typeof e?e:null==e?identity:"object"==typeof e?isArray(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e):property(e)}function baseKeys(e){if(!isPrototype(e))return nativeKeys(e);var t=[];for(var r in Object(e))hasOwnProperty.call(e,r)&&"constructor"!=r&&t.push(r);return t}function baseMatches(e){var t=getMatchData(e);return 1==t.length&&t[0][2]?matchesStrictComparable(t[0][0],t[0][1]):function(r){return r===e||baseIsMatch(r,e,t)}}function baseMatchesProperty(e,t){return isKey(e)&&isStrictComparable(t)?matchesStrictComparable(toKey(e),t):function(r){var a=get(r,e);return void 0===a&&a===t?hasIn(r,e):baseIsEqual(t,a,void 0,UNORDERED_COMPARE_FLAG|PARTIAL_COMPARE_FLAG)}}function basePropertyDeep(e){return function(t){return baseGet(t,e)}}function baseToString(e){if("string"==typeof e)return e;if(isSymbol(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}function castPath(e){return isArray(e)?e:stringToPath(e)}function createBaseEach(e,t){return function(r,a){if(null==r)return r;if(!isArrayLike(r))return e(r,a);for(var n=r.length,o=t?n:-1,s=Object(r);(t?o--:++o<n)&&a(s[o],o,s)!==!1;);return r}}function createBaseFor(e){return function(t,r,a){for(var n=-1,o=Object(t),s=a(t),i=s.length;i--;){var c=s[e?i:++n];if(r(o[c],c,o)===!1)break}return t}}function equalArrays(e,t,r,a,n,o){var s=n&PARTIAL_COMPARE_FLAG,i=e.length,c=t.length;if(i!=c&&!(s&&c>i))return!1;var u=o.get(e);if(u&&o.get(t))return u==t;var l=-1,y=!0,f=n&UNORDERED_COMPARE_FLAG?new SetCache:void 0;for(o.set(e,t),o.set(t,e);++l<i;){var g=e[l],p=t[l];if(a)var h=s?a(p,g,l,t,e,o):a(g,p,l,e,t,o);if(void 0!==h){if(h)continue;y=!1;break}if(f){if(!arraySome(t,function(e,t){if(!f.has(t)&&(g===e||r(g,e,a,n,o)))return f.add(t)})){y=!1;break}}else if(g!==p&&!r(g,p,a,n,o)){y=!1;break}}return o.delete(e),o.delete(t),y}function equalByTag(e,t,r,a,n,o,s){switch(r){case dataViewTag:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case arrayBufferTag:return!(e.byteLength!=t.byteLength||!a(new Uint8Array(e),new Uint8Array(t)));case boolTag:case dateTag:case numberTag:return eq(+e,+t);case errorTag:return e.name==t.name&&e.message==t.message;case regexpTag:case stringTag:return e==t+"";case mapTag:var i=mapToArray;case setTag:var c=o&PARTIAL_COMPARE_FLAG;if(i||(i=setToArray),e.size!=t.size&&!c)return!1;var u=s.get(e);if(u)return u==t;o|=UNORDERED_COMPARE_FLAG,s.set(e,t);var l=equalArrays(i(e),i(t),a,n,o,s);return s.delete(e),l;case symbolTag:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(t)}return!1}function equalObjects(e,t,r,a,n,o){var s=n&PARTIAL_COMPARE_FLAG,i=keys(e),c=i.length,u=keys(t),l=u.length;if(c!=l&&!s)return!1;for(var y=c;y--;){var f=i[y];if(!(s?f in t:hasOwnProperty.call(t,f)))return!1}var g=o.get(e);if(g&&o.get(t))return g==t;var p=!0;o.set(e,t),o.set(t,e);for(var h=s;++y<c;){f=i[y];var b=e[f],T=t[f];if(a)var d=s?a(T,b,f,t,e,o):a(b,T,f,e,t,o);if(!(void 0===d?b===T||r(b,T,a,n,o):d)){p=!1;break}h||(h="constructor"==f)}if(p&&!h){var _=e.constructor,A=t.constructor;_!=A&&"constructor"in e&&"constructor"in t&&!("function"==typeof _&&_ instanceof _&&"function"==typeof A&&A instanceof A)&&(p=!1)}return o.delete(e),o.delete(t),p}function getMapData(e,t){var r=e.__data__;return isKeyable(t)?r["string"==typeof t?"string":"hash"]:r.map}function getMatchData(e){for(var t=keys(e),r=t.length;r--;){var a=t[r],n=e[a];t[r]=[a,n,isStrictComparable(n)]}return t}function getNative(e,t){var r=getValue(e,t);return baseIsNative(r)?r:void 0}function hasPath(e,t,r){t=isKey(t,e)?[t]:castPath(t);for(var a,n=-1,o=t.length;++n<o;){var s=toKey(t[n]);if(!(a=null!=e&&r(e,s)))break;e=e[s]}if(a)return a;var o=e?e.length:0;return!!o&&isLength(o)&&isIndex(s,o)&&(isArray(e)||isArguments(e))}function isIndex(e,t){return t=null==t?MAX_SAFE_INTEGER:t,!!t&&("number"==typeof e||reIsUint.test(e))&&e>-1&&e%1==0&&e<t}function isKey(e,t){if(isArray(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!isSymbol(e))||(reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t))}function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}function isPrototype(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||objectProto;return e===r}function isStrictComparable(e){return e===e&&!isObject(e)}function matchesStrictComparable(e,t){return function(r){return null!=r&&(r[e]===t&&(void 0!==t||e in Object(r)))}}function toKey(e){if("string"==typeof e||isSymbol(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function reduce(e,t,r){var a=isArray(e)?arrayReduce:baseReduce,n=arguments.length<3;return a(e,baseIteratee(t,4),r,n,baseEach)}function memoize(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT);var r=function(){var a=arguments,n=t?t.apply(this,a):a[0],o=r.cache;if(o.has(n))return o.get(n);var s=e.apply(this,a);return r.cache=o.set(n,s),s};return r.cache=new(memoize.Cache||MapCache),r}function eq(e,t){return e===t||e!==e&&t!==t}function isArguments(e){return isArrayLikeObject(e)&&hasOwnProperty.call(e,"callee")&&(!propertyIsEnumerable.call(e,"callee")||objectToString.call(e)==argsTag)}function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function isFunction(e){var t=isObject(e)?objectToString.call(e):"";return t==funcTag||t==genTag}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isObjectLike(e){return!!e&&"object"==typeof e}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&objectToString.call(e)==symbolTag}function toString(e){return null==e?"":baseToString(e)}function get(e,t,r){var a=null==e?void 0:baseGet(e,t);return void 0===a?r:a}function hasIn(e,t){return null!=e&&hasPath(e,t,baseHasIn)}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function identity(e){return e}function property(e){return isKey(e)?baseProperty(toKey(e)):basePropertyDeep(e)}var LARGE_ARRAY_SIZE=200,FUNC_ERROR_TEXT="Expected a function",HASH_UNDEFINED="__lodash_hash_undefined__",UNORDERED_COMPARE_FLAG=1,PARTIAL_COMPARE_FLAG=2,INFINITY=1/0,MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",promiseTag="[object Promise]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,reLeadingDot=/^\./,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reEscapeChar=/\\(\\)?/g,reIsHostCtor=/^\[object .+?Constructor\]$/,reIsUint=/^(?:0|[1-9]\d*)$/,typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,arrayProto=Array.prototype,funcProto=Function.prototype,objectProto=Object.prototype,coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Symbol=root.Symbol,Uint8Array=root.Uint8Array,propertyIsEnumerable=objectProto.propertyIsEnumerable,splice=arrayProto.splice,nativeKeys=overArg(Object.keys,Object),DataView=getNative(root,"DataView"),Map=getNative(root,"Map"),Promise=getNative(root,"Promise"),Set=getNative(root,"Set"),WeakMap=getNative(root,"WeakMap"),nativeCreate=getNative(Object,"create"),dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),symbolProto=Symbol?Symbol.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0,symbolToString=symbolProto?symbolProto.toString:void 0;Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet,ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet,MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet,SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas,Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var baseEach=createBaseEach(baseForOwn),baseFor=createBaseFor(),getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag||Map&&getTag(new Map)!=mapTag||Promise&&getTag(Promise.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(e){var t=objectToString.call(e),r=t==objectTag?e.constructor:void 0,a=r?toSource(r):void 0;if(a)switch(a){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return t});var stringToPath=memoize(function(e){e=toString(e);var t=[];return reLeadingDot.test(e)&&t.push(""),e.replace(rePropName,function(e,r,a,n){t.push(a?n.replace(reEscapeChar,"$1"):r||e)}),t});memoize.Cache=MapCache;var isArray=Array.isArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;module.exports=reduce;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],7:[function(require,module,exports){
function arrayMap(r,e){for(var t=-1,n=r?r.length:0,o=Array(n);++t<n;)o[t]=e(r[t],t,r);return o}function baseTimes(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}function baseValues(r,e){return arrayMap(e,function(e){return r[e]})}function overArg(r,e){return function(t){return r(e(t))}}function arrayLikeKeys(r,e){var t=isArray(r)||isArguments(r)?baseTimes(r.length,String):[],n=t.length,o=!!n;for(var i in r)!e&&!hasOwnProperty.call(r,i)||o&&("length"==i||isIndex(i,n))||t.push(i);return t}function baseKeys(r){if(!isPrototype(r))return nativeKeys(r);var e=[];for(var t in Object(r))hasOwnProperty.call(r,t)&&"constructor"!=t&&e.push(t);return e}function isIndex(r,e){return e=null==e?MAX_SAFE_INTEGER:e,!!e&&("number"==typeof r||reIsUint.test(r))&&r>-1&&r%1==0&&r<e}function isPrototype(r){var e=r&&r.constructor,t="function"==typeof e&&e.prototype||objectProto;return r===t}function isArguments(r){return isArrayLikeObject(r)&&hasOwnProperty.call(r,"callee")&&(!propertyIsEnumerable.call(r,"callee")||objectToString.call(r)==argsTag)}function isArrayLike(r){return null!=r&&isLength(r.length)&&!isFunction(r)}function isArrayLikeObject(r){return isObjectLike(r)&&isArrayLike(r)}function isFunction(r){var e=isObject(r)?objectToString.call(r):"";return e==funcTag||e==genTag}function isLength(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=MAX_SAFE_INTEGER}function isObject(r){var e=typeof r;return!!r&&("object"==e||"function"==e)}function isObjectLike(r){return!!r&&"object"==typeof r}function keys(r){return isArrayLike(r)?arrayLikeKeys(r):baseKeys(r)}function values(r){return r?baseValues(r,keys(r)):[]}var MAX_SAFE_INTEGER=9007199254740991,argsTag="[object Arguments]",funcTag="[object Function]",genTag="[object GeneratorFunction]",reIsUint=/^(?:0|[1-9]\d*)$/,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,objectToString=objectProto.toString,propertyIsEnumerable=objectProto.propertyIsEnumerable,nativeKeys=overArg(Object.keys,Object),isArray=Array.isArray;module.exports=values;

},{}],8:[function(require,module,exports){
function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var process=module.exports={},cachedSetTimeout,cachedClearTimeout;!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var u=1;u<arguments.length;u++)t[u-1]=arguments[u];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};
},{}],9:[function(require,module,exports){
function blur(r,t,a,n){if(!(isNaN(n)||n<1)){n|=0;var e,l,b,f,g,o,u,x,i,s,h,c,v,_,k,m,B,S,w,N,d,p,j,q,y=n+n+1,z=t-1,A=a-1,C=n+1,D=C*(C+1)/2,E=new BlurStack,F=E;for(b=1;b<y;b++)if(F=F.next=new BlurStack,b==C)var G=F;F.next=E;var H=null,I=null;u=o=0;var J=mul_table[n],K=shg_table[n];for(l=0;l<a;l++){for(m=B=S=w=x=i=s=h=0,c=C*(N=r[o]),v=C*(d=r[o+1]),_=C*(p=r[o+2]),k=C*(j=r[o+3]),x+=D*N,i+=D*d,s+=D*p,h+=D*j,F=E,b=0;b<C;b++)F.r=N,F.g=d,F.b=p,F.a=j,F=F.next;for(b=1;b<C;b++)f=o+((z<b?z:b)<<2),x+=(F.r=N=r[f])*(q=C-b),i+=(F.g=d=r[f+1])*q,s+=(F.b=p=r[f+2])*q,h+=(F.a=j=r[f+3])*q,m+=N,B+=d,S+=p,w+=j,F=F.next;for(H=E,I=G,e=0;e<t;e++)r[o+3]=j=h*J>>K,0!=j?(j=255/j,r[o]=(x*J>>K)*j,r[o+1]=(i*J>>K)*j,r[o+2]=(s*J>>K)*j):r[o]=r[o+1]=r[o+2]=0,x-=c,i-=v,s-=_,h-=k,c-=H.r,v-=H.g,_-=H.b,k-=H.a,f=u+((f=e+n+1)<z?f:z)<<2,m+=H.r=r[f],B+=H.g=r[f+1],S+=H.b=r[f+2],w+=H.a=r[f+3],x+=m,i+=B,s+=S,h+=w,H=H.next,c+=N=I.r,v+=d=I.g,_+=p=I.b,k+=j=I.a,m-=N,B-=d,S-=p,w-=j,I=I.next,o+=4;u+=t}for(e=0;e<t;e++){for(B=S=w=m=i=s=h=x=0,o=e<<2,c=C*(N=r[o]),v=C*(d=r[o+1]),_=C*(p=r[o+2]),k=C*(j=r[o+3]),x+=D*N,i+=D*d,s+=D*p,h+=D*j,F=E,b=0;b<C;b++)F.r=N,F.g=d,F.b=p,F.a=j,F=F.next;for(g=t,b=1;b<=n;b++)o=g+e<<2,x+=(F.r=N=r[o])*(q=C-b),i+=(F.g=d=r[o+1])*q,s+=(F.b=p=r[o+2])*q,h+=(F.a=j=r[o+3])*q,m+=N,B+=d,S+=p,w+=j,F=F.next,b<A&&(g+=t);for(o=e,H=E,I=G,l=0;l<a;l++)f=o<<2,r[f+3]=j=h*J>>K,j>0?(j=255/j,r[f]=(x*J>>K)*j,r[f+1]=(i*J>>K)*j,r[f+2]=(s*J>>K)*j):r[f]=r[f+1]=r[f+2]=0,x-=c,i-=v,s-=_,h-=k,c-=H.r,v-=H.g,_-=H.b,k-=H.a,f=e+((f=l+C)<A?f:A)*t<<2,x+=m+=H.r=r[f],i+=B+=H.g=r[f+1],s+=S+=H.b=r[f+2],h+=w+=H.a=r[f+3],H=H.next,c+=N=I.r,v+=d=I.g,_+=p=I.b,k+=j=I.a,m-=N,B-=d,S-=p,w-=j,I=I.next,o+=t}}}function BlurStack(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var mul_table=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],shg_table=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];module.exports=blur;
},{}],10:[function(require,module,exports){
function DOMParser(t){this.options=t||{locator:{}}}function buildErrorHandler(t,e,n){function r(e){var r=t[e];!r&&i&&(r=2==t.length?function(n){t(e,n)}:t),o[e]=r&&function(t){r("[xmldom "+e+"]\t"+t+_locator(n))}||function(){}}if(!t){if(e instanceof DOMHandler)return e;t=e}var o={},i=t instanceof Function;return n=n||{},r("warning"),r("error"),r("fatalError"),o}function DOMHandler(){this.cdata=!1}function position(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function _locator(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function _toString(t,e,n){return"string"==typeof t?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}function appendElement(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}DOMParser.prototype.parseFromString=function(t,e){var n=this.options,r=new XMLReader,o=n.domBuilder||new DOMHandler,i=n.errorHandler,a=n.locator,c=n.xmlns||{},l={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return a&&o.setDocumentLocator(a),r.errorHandler=buildErrorHandler(i,o,a),r.domBuilder=n.domBuilder||o,/\/x?html?$/.test(e)&&(l.nbsp="",l.copy="",c[""]="http://www.w3.org/1999/xhtml"),c.xml=c.xml||"http://www.w3.org/XML/1998/namespace",t?r.parse(t,c,l):r.errorHandler.error("invalid doc source"),o.doc},DOMHandler.prototype={startDocument:function(){this.doc=(new DOMImplementation).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var o=this.doc,i=o.createElementNS(t,n||e),a=r.length;appendElement(this,i),this.currentElement=i,this.locator&&position(this.locator,i);for(var c=0;c<a;c++){var t=r.getURI(c),l=r.getValue(c),n=r.getQName(c),s=o.createAttributeNS(t,n);this.locator&&position(r.getLocator(c),s),s.value=s.nodeValue=l,i.setAttributeNode(s)}},endElement:function(t,e,n){var r=this.currentElement;r.tagName;this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&position(this.locator,n),appendElement(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=_toString.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(t);else var r=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(t)&&this.doc.appendChild(r),this.locator&&position(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=_toString.apply(this,arguments);var r=this.doc.createComment(t);this.locator&&position(this.locator,r),appendElement(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var o=r.createDocumentType(t,e,n);this.locator&&position(this.locator,o),appendElement(this,o)}},warning:function(t){console.warn("[xmldom warning]\t"+t,_locator(this.locator))},error:function(t){console.error("[xmldom error]\t"+t,_locator(this.locator))},fatalError:function(t){throw console.error("[xmldom fatalError]\t"+t,_locator(this.locator)),t}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){DOMHandler.prototype[t]=function(){return null}});var XMLReader=require("./sax").XMLReader,DOMImplementation=exports.DOMImplementation=require("./dom").DOMImplementation;exports.XMLSerializer=require("./dom").XMLSerializer,exports.DOMParser=DOMParser;
},{"./dom":11,"./sax":12}],11:[function(require,module,exports){
function copy(e,t){for(var n in e)t[n]=e[n]}function _extends(e,t){function n(){}var o=e.prototype;if(Object.create){var i=Object.create(t.prototype);o.__proto__=i}o instanceof t||(n.prototype=t.prototype,n=new n,copy(o,n),e.prototype=o=n),o.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),o.constructor=e)}function DOMException(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,ExceptionMessage[e]),this.message=ExceptionMessage[e],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return n.code=e,t&&(this.message=this.message+": "+t),n}function NodeList(){}function LiveNodeList(e,t){this._node=e,this._refresh=t,_updateLiveList(this)}function _updateLiveList(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);__set__(e,"length",n.length),copy(n,e),e._inc=t}}function NamedNodeMap(){}function _findNodeIndex(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function _addNamedNode(e,t,n,o){if(o?t[_findNodeIndex(t,o)]=n:t[t.length++]=n,e){n.ownerElement=e;var i=e.ownerDocument;i&&(o&&_onRemoveAttribute(i,e,o),_onAddAttribute(i,e,n))}}function _removeNamedNode(e,t,n){var o=_findNodeIndex(t,n);if(!(o>=0))throw DOMException(NOT_FOUND_ERR,new Error(e.tagName+"@"+n));for(var i=t.length-1;o<i;)t[o]=t[++o];if(t.length=i,e){var r=e.ownerDocument;r&&(_onRemoveAttribute(r,e,n),n.ownerElement=null)}}function DOMImplementation(e){if(this._features={},e)for(var t in e)this._features=e[t]}function Node(){}function _xmlEncoder(e){return"<"==e&&"&lt;"||">"==e&&"&gt;"||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function _visitNode(e,t){if(t(e))return!0;if(e=e.firstChild)do if(_visitNode(e,t))return!0;while(e=e.nextSibling)}function Document(){}function _onAddAttribute(e,t,n){e&&e._inc++;var o=n.namespaceURI;"http://www.w3.org/2000/xmlns/"==o&&(t._nsMap[n.prefix?n.localName:""]=n.value)}function _onRemoveAttribute(e,t,n,o){e&&e._inc++;var i=n.namespaceURI;"http://www.w3.org/2000/xmlns/"==i&&delete t._nsMap[n.prefix?n.localName:""]}function _onUpdateChild(e,t,n){if(e&&e._inc){e._inc++;var o=t.childNodes;if(n)o[o.length++]=n;else{for(var i=t.firstChild,r=0;i;)o[r++]=i,i=i.nextSibling;o.length=r}}}function _removeChild(e,t){var n=t.previousSibling,o=t.nextSibling;return n?n.nextSibling=o:e.firstChild=o,o?o.previousSibling=n:e.lastChild=n,_onUpdateChild(e.ownerDocument,e),t}function _insertBefore(e,t,n){var o=t.parentNode;if(o&&o.removeChild(t),t.nodeType===DOCUMENT_FRAGMENT_NODE){var i=t.firstChild;if(null==i)return t;var r=t.lastChild}else i=r=t;var a=n?n.previousSibling:e.lastChild;i.previousSibling=a,r.nextSibling=n,a?a.nextSibling=i:e.firstChild=i,null==n?e.lastChild=r:n.previousSibling=r;do i.parentNode=e;while(i!==r&&(i=i.nextSibling));return _onUpdateChild(e.ownerDocument||e,e),t.nodeType==DOCUMENT_FRAGMENT_NODE&&(t.firstChild=t.lastChild=null),t}function _appendSingleChild(e,t){var n=t.parentNode;if(n){var o=e.lastChild;n.removeChild(t);var o=e.lastChild}var o=e.lastChild;return t.parentNode=e,t.previousSibling=o,t.nextSibling=null,o?o.nextSibling=t:e.firstChild=t,e.lastChild=t,_onUpdateChild(e.ownerDocument,e,t),t}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function XMLSerializer(){}function nodeSerializeToString(e,t){var n=[],o=9==this.nodeType?this.documentElement:this,i=o.prefix,r=o.namespaceURI;if(r&&null==i){var i=o.lookupPrefix(r);if(null==i)var a=[{namespace:r,prefix:null}]}return serializeToString(this,n,e,t,a),n.join("")}function needNamespaceDefine(e,t,n){var o=e.prefix||"",i=e.namespaceURI;if(!o&&!i)return!1;if("xml"===o&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var r=n.length;r--;){var a=n[r];if(a.prefix==o)return a.namespace!=i}return!0}function serializeToString(e,t,n,o,i){if(o){if(e=o(e),!e)return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case ELEMENT_NODE:i||(i=[]);var r=(i.length,e.attributes),a=r.length,s=e.firstChild,u=e.tagName;n=htmlns===e.namespaceURI||n,t.push("<",u);for(var d=0;d<a;d++){var c=r.item(d);"xmlns"==c.prefix?i.push({prefix:c.localName,namespace:c.value}):"xmlns"==c.nodeName&&i.push({prefix:"",namespace:c.value})}for(var d=0;d<a;d++){var c=r.item(d);if(needNamespaceDefine(c,n,i)){var N=c.prefix||"",l=c.namespaceURI,p=N?" xmlns:"+N:" xmlns";t.push(p,'="',l,'"'),i.push({prefix:N,namespace:l})}serializeToString(c,t,n,o,i)}if(needNamespaceDefine(e,n,i)){var N=e.prefix||"",l=e.namespaceURI,p=N?" xmlns:"+N:" xmlns";t.push(p,'="',l,'"'),i.push({prefix:N,namespace:l})}if(s||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(t.push(">"),n&&/^script$/i.test(u))for(;s;)s.data?t.push(s.data):serializeToString(s,t,n,o,i),s=s.nextSibling;else for(;s;)serializeToString(s,t,n,o,i),s=s.nextSibling;t.push("</",u,">")}else t.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(var s=e.firstChild;s;)serializeToString(s,t,n,o,i),s=s.nextSibling;return;case ATTRIBUTE_NODE:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,_xmlEncoder),'"');case TEXT_NODE:return t.push(e.data.replace(/[<&]/g,_xmlEncoder));case CDATA_SECTION_NODE:return t.push("<![CDATA[",e.data,"]]>");case COMMENT_NODE:return t.push("<!--",e.data,"-->");case DOCUMENT_TYPE_NODE:var E=e.publicId,m=e.systemId;if(t.push("<!DOCTYPE ",e.name),E)t.push(' PUBLIC "',E),m&&"."!=m&&t.push('" "',m),t.push('">');else if(m&&"."!=m)t.push(' SYSTEM "',m,'">');else{var h=e.internalSubset;h&&t.push(" [",h,"]"),t.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return t.push("<?",e.target," ",e.data,"?>");case ENTITY_REFERENCE_NODE:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function importNode(e,t,n){var o;switch(t.nodeType){case ELEMENT_NODE:o=t.cloneNode(!1),o.ownerDocument=e;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:n=!0}if(o||(o=t.cloneNode(!1)),o.ownerDocument=e,o.parentNode=null,n)for(var i=t.firstChild;i;)o.appendChild(importNode(e,i,n)),i=i.nextSibling;return o}function cloneNode(e,t,n){var o=new t.constructor;for(var i in t){var r=t[i];"object"!=typeof r&&r!=o[i]&&(o[i]=r)}switch(t.childNodes&&(o.childNodes=new NodeList),o.ownerDocument=e,o.nodeType){case ELEMENT_NODE:var a=t.attributes,s=o.attributes=new NamedNodeMap,u=a.length;s._ownerElement=o;for(var d=0;d<u;d++)o.setAttributeNode(cloneNode(e,a.item(d),!0));break;case ATTRIBUTE_NODE:n=!0}if(n)for(var c=t.firstChild;c;)o.appendChild(cloneNode(e,c,n)),c=c.nextSibling;return o}function __set__(e,t,n){e[t]=n}function getTextContent(e){switch(e.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(getTextContent(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}var htmlns="http://www.w3.org/1999/xhtml",NodeType={},ELEMENT_NODE=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={},INDEX_SIZE_ERR=ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1),DOMSTRING_SIZE_ERR=ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2),HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3),WRONG_DOCUMENT_ERR=ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4),INVALID_CHARACTER_ERR=ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5),NO_DATA_ALLOWED_ERR=ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6),NO_MODIFICATION_ALLOWED_ERR=ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7),NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8),NOT_SUPPORTED_ERR=ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9),INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10),INVALID_STATE_ERR=ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11),SYNTAX_ERR=ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12),INVALID_MODIFICATION_ERR=ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13),NAMESPACE_ERR=ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14),INVALID_ACCESS_ERR=ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);DOMException.prototype=Error.prototype,copy(ExceptionCode,DOMException),NodeList.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],o=0;o<this.length;o++)serializeToString(this[o],n,e,t);return n.join("")}},LiveNodeList.prototype.item=function(e){return _updateLiveList(this),this[e]},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var n=this.getNamedItem(e.nodeName);return _addNamedNode(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);return t=this.getNamedItemNS(e.namespaceURI,e.localName),_addNamedNode(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return _removeNamedNode(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return _removeNamedNode(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var o=this[n];if(o.localName==t&&o.namespaceURI==e)return o}return null}},DOMImplementation.prototype={hasFeature:function(e,t){var n=this._features[e.toLowerCase()];return!(!n||t&&!(t in n))},createDocument:function(e,t,n){var o=new Document;if(o.implementation=this,o.childNodes=new NodeList,o.doctype=n,n&&o.appendChild(n),t){var i=o.createElementNS(e,t);o.appendChild(i)}return o},createDocumentType:function(e,t,n){var o=new DocumentType;return o.name=e,o.nodeName=e,o.publicId=t,o.systemId=n,o}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return _insertBefore(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return _removeChild(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return cloneNode(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==TEXT_NODE&&e.nodeType==TEXT_NODE?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var o in n)if(n[o]==e)return o;t=t.nodeType==ATTRIBUTE_NODE?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==ATTRIBUTE_NODE?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){var t=this.lookupPrefix(e);return null==t}},copy(NodeType,Node),copy(NodeType,Node.prototype),Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==DOCUMENT_FRAGMENT_NODE){for(var n=e.firstChild;n;){var o=n.nextSibling;this.insertBefore(n,t),n=o}return e}return null==this.documentElement&&e.nodeType==ELEMENT_NODE&&(this.documentElement=e),_insertBefore(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),_removeChild(this,e)},importNode:function(e,t){return importNode(this,e,t)},getElementById:function(e){var t=null;return _visitNode(this.documentElement,function(n){if(n.nodeType==ELEMENT_NODE&&n.getAttribute("id")==e)return t=n,!0}),t},createElement:function(e){var t=new Element;t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new NodeList;var n=t.attributes=new NamedNodeMap;return n._ownerElement=t,t},createDocumentFragment:function(){var e=new DocumentFragment;return e.ownerDocument=this,e.childNodes=new NodeList,e},createTextNode:function(e){var t=new Text;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new Comment;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new CDATASection;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new ProcessingInstruction;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new Attr;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new EntityReference;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new Element,o=t.split(":"),i=n.attributes=new NamedNodeMap;return n.childNodes=new NodeList,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,i._ownerElement=n,n},createAttributeNS:function(e,t){var n=new Attr,o=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==o.length?(n.prefix=o[0],n.localName=o[1]):n.localName=t,n}},_extends(Document,Node),Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(e,null):_appendSingleChild(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var o=this.ownerDocument.createAttributeNS(e,t);o.value=o.nodeValue=""+n,this.setAttributeNode(o)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new LiveNodeList(this,function(t){var n=[];return _visitNode(t,function(o){o===t||o.nodeType!=ELEMENT_NODE||"*"!==e&&o.tagName!=e||n.push(o)}),n})},getElementsByTagNameNS:function(e,t){return new LiveNodeList(this,function(n){var o=[];return _visitNode(n,function(i){i===n||i.nodeType!==ELEMENT_NODE||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||o.push(i)}),o})}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=ATTRIBUTE_NODE,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){var o=this.data.substring(0,e),i=this.data.substring(e+t);n=o+n+i,this.nodeValue=this.data=n,this.length=n.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var o=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(o,this.nextSibling),o}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE,_extends(DocumentType,Node),Notation.prototype.nodeType=NOTATION_NODE,_extends(Notation,Node),Entity.prototype.nodeType=ENTITY_NODE,_extends(Entity,Node),EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE,_extends(ProcessingInstruction,Node),XMLSerializer.prototype.serializeToString=function(e,t,n){return nodeSerializeToString.call(e,t,n)},Node.prototype.toString=nodeSerializeToString;try{Object.defineProperty&&(Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(e){switch(this.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),__set__=function(e,t,n){e["$$"+t]=n})}catch(e){}exports.DOMImplementation=DOMImplementation,exports.XMLSerializer=XMLSerializer;
},{}],12:[function(require,module,exports){
function XMLReader(){}function parse(e,t,r,a,n){function s(e){if(e>65535){e-=65536;var t=55296+(e>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}function c(e){var t=e.slice(1,-1);return t in r?r[t]:"#"===t.charAt(0)?s(parseInt(t.substr(1).replace("x","0x"))):(n.error("entity not found:"+e),e)}function i(t){if(t>p){var r=e.substring(p,t).replace(/&#?\w+;/g,c);m&&o(p),a.characters(r,0,t-p),p=t}}function o(t,r){for(;t>=l&&(r=_.exec(e));)u=r.index,l=u+r[0].length,m.lineNumber++;m.columnNumber=t-u+1}for(var u=0,l=0,_=/.*(?:\r\n?|\n)|.*$/g,m=a.locator,f=[{currentNSMap:t}],d={},p=0;;){try{var T=e.indexOf("<",p);if(T<0){if(!e.substr(p).match(/^\s*$/)){var S=a.doc,h=S.createTextNode(e.substr(p));S.appendChild(h),a.currentElement=h}return}switch(T>p&&i(T),e.charAt(T+1)){case"/":var A=e.indexOf(">",T+3),g=e.substring(T+2,A),w=f.pop();A<0?(g=e.substring(T+2).replace(/[\s<].*/,""),n.error("end tag name: "+g+" is not complete:"+w.tagName),A=T+1+g.length):g.match(/\s</)&&(g=g.replace(/[\s<].*/,""),n.error("end tag name: "+g+" maybe not complete"),A=T+1+g.length);var E=w.localNSMap,N=w.tagName==g,b=N||w.tagName&&w.tagName.toLowerCase()==g.toLowerCase();if(b){if(a.endElement(w.uri,w.localName,g),E)for(var v in E)a.endPrefixMapping(v);N||n.fatalError("end tag name: "+g+" is not match the current start tagName:"+w.tagName)}else f.push(w);A++;break;case"?":m&&o(T),A=parseInstruction(e,T,a);break;case"!":m&&o(T),A=parseDCC(e,T,a,n);break;default:m&&o(T);var x=new ElementAttributes,C=f[f.length-1].currentNSMap,A=parseElementStartPart(e,T,x,C,c,n),R=x.length;if(!x.closed&&fixSelfClosed(e,A,x.tagName,d)&&(x.closed=!0,r.nbsp||n.warning("unclosed xml attribute")),m&&R){for(var O=copyLocator(m,{}),D=0;D<R;D++){var L=x[D];o(L.offset),L.locator=copyLocator(m,{})}a.locator=O,appendElement(x,a,C)&&f.push(x),a.locator=m}else appendElement(x,a,C)&&f.push(x);"http://www.w3.org/1999/xhtml"!==x.uri||x.closed?A++:A=parseHtmlSpecialContent(e,A,x.tagName,c,a)}}catch(e){n.error("element parse error: "+e),A=-1}A>p?p=A:i(Math.max(T,p)+1)}}function copyLocator(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function parseElementStartPart(e,t,r,a,n,s){for(var c,i,o=++t,u=S_TAG;;){var l=e.charAt(o);switch(l){case"=":if(u===S_ATTR)c=e.slice(t,o),u=S_EQ;else{if(u!==S_ATTR_SPACE)throw new Error("attribute equal must after attrName");u=S_EQ}break;case"'":case'"':if(u===S_EQ||u===S_ATTR){if(u===S_ATTR&&(s.warning('attribute value must after "="'),c=e.slice(t,o)),t=o+1,o=e.indexOf(l,t),!(o>0))throw new Error("attribute value no end '"+l+"' match");i=e.slice(t,o).replace(/&#?\w+;/g,n),r.add(c,i,t-1),u=S_ATTR_END}else{if(u!=S_ATTR_NOQUOT_VALUE)throw new Error('attribute value must after "="');i=e.slice(t,o).replace(/&#?\w+;/g,n),r.add(c,i,t),s.warning('attribute "'+c+'" missed start quot('+l+")!!"),t=o+1,u=S_ATTR_END}break;case"/":switch(u){case S_TAG:r.setTagName(e.slice(t,o));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:u=S_TAG_CLOSE,r.closed=!0;case S_ATTR_NOQUOT_VALUE:case S_ATTR:case S_ATTR_SPACE:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),u==S_TAG&&r.setTagName(e.slice(t,o)),o;case">":switch(u){case S_TAG:r.setTagName(e.slice(t,o));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:break;case S_ATTR_NOQUOT_VALUE:case S_ATTR:i=e.slice(t,o),"/"===i.slice(-1)&&(r.closed=!0,i=i.slice(0,-1));case S_ATTR_SPACE:u===S_ATTR_SPACE&&(i=c),u==S_ATTR_NOQUOT_VALUE?(s.warning('attribute "'+i+'" missed quot(")!!'),r.add(c,i.replace(/&#?\w+;/g,n),t)):("http://www.w3.org/1999/xhtml"===a[""]&&i.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+i+'" missed value!! "'+i+'" instead!!'),r.add(i,i,t));break;case S_EQ:throw new Error("attribute value missed!!")}return o;case"":l=" ";default:if(l<=" ")switch(u){case S_TAG:r.setTagName(e.slice(t,o)),u=S_TAG_SPACE;break;case S_ATTR:c=e.slice(t,o),u=S_ATTR_SPACE;break;case S_ATTR_NOQUOT_VALUE:var i=e.slice(t,o).replace(/&#?\w+;/g,n);s.warning('attribute "'+i+'" missed quot(")!!'),r.add(c,i,t);case S_ATTR_END:u=S_TAG_SPACE}else switch(u){case S_ATTR_SPACE:r.tagName;"http://www.w3.org/1999/xhtml"===a[""]&&c.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+c+'" missed value!! "'+c+'" instead2!!'),r.add(c,c,t),t=o,u=S_ATTR;break;case S_ATTR_END:s.warning('attribute space is required"'+c+'"!!');case S_TAG_SPACE:u=S_ATTR,t=o;break;case S_EQ:u=S_ATTR_NOQUOT_VALUE,t=o;break;case S_TAG_CLOSE:throw new Error("elements closed character '/' and '>' must be connected to")}}o++}}function appendElement(e,t,r){for(var a=e.tagName,n=null,s=e.length;s--;){var c=e[s],i=c.qName,o=c.value,u=i.indexOf(":");if(u>0)var l=c.prefix=i.slice(0,u),_=i.slice(u+1),m="xmlns"===l&&_;else _=i,l=null,m="xmlns"===i&&"";c.localName=_,m!==!1&&(null==n&&(n={},_copy(r,r={})),r[m]=n[m]=o,c.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(m,o))}for(var s=e.length;s--;){c=e[s];var l=c.prefix;l&&("xml"===l&&(c.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==l&&(c.uri=r[l||""]))}var u=a.indexOf(":");u>0?(l=e.prefix=a.slice(0,u),_=e.localName=a.slice(u+1)):(l=null,_=e.localName=a);var f=e.uri=r[l||""];if(t.startElement(f,_,a,e),!e.closed)return e.currentNSMap=r,e.localNSMap=n,!0;if(t.endElement(f,_,a),n)for(l in n)t.endPrefixMapping(l)}function parseHtmlSpecialContent(e,t,r,a,n){if(/^(?:script|textarea)$/i.test(r)){var s=e.indexOf("</"+r+">",t),c=e.substring(t+1,s);if(/[&<]/.test(c))return/^script$/i.test(r)?(n.characters(c,0,c.length),s):(c=c.replace(/&#?\w+;/g,a),n.characters(c,0,c.length),s)}return t+1}function fixSelfClosed(e,t,r,a){var n=a[r];return null==n&&(n=e.lastIndexOf("</"+r+">"),n<t&&(n=e.lastIndexOf("</"+r)),a[r]=n),n<t}function _copy(e,t){for(var r in e)t[r]=e[r]}function parseDCC(e,t,r,a){var n=e.charAt(t+2);switch(n){case"-":if("-"===e.charAt(t+3)){var s=e.indexOf("-->",t+4);return s>t?(r.comment(e,t+4,s-t-4),s+3):(a.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==e.substr(t+3,6)){var s=e.indexOf("]]>",t+9);return r.startCDATA(),r.characters(e,t+9,s-t-9),r.endCDATA(),s+3}var c=split(e,t),i=c.length;if(i>1&&/!doctype/i.test(c[0][0])){var o=c[1][0],u=i>3&&/^public$/i.test(c[2][0])&&c[3][0],l=i>4&&c[4][0],_=c[i-1];return r.startDTD(o,u&&u.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),r.endDTD(),_.index+_[0].length}}return-1}function parseInstruction(e,t,r){var a=e.indexOf("?>",t);if(a){var n=e.substring(t,a).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(n){n[0].length;return r.processingInstruction(n[1],n[2]),a+2}return-1}return-1}function ElementAttributes(e){}function _set_proto_(e,t){return e.__proto__=t,e}function split(e,t){var r,a=[],n=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(n.lastIndex=t,n.exec(e);r=n.exec(e);)if(a.push(r),r[1])return a}var nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$"),S_TAG=0,S_ATTR=1,S_ATTR_SPACE=2,S_EQ=3,S_ATTR_NOQUOT_VALUE=4,S_ATTR_END=5,S_TAG_SPACE=6,S_TAG_CLOSE=7;XMLReader.prototype={parse:function(e,t,r){var a=this.domBuilder;a.startDocument(),_copy(t,t={}),parse(e,t,r,a,this.errorHandler),a.endDocument()}},ElementAttributes.prototype={setTagName:function(e){if(!tagNamePattern.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,r){if(!tagNamePattern.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},_set_proto_({},_set_proto_.prototype)instanceof _set_proto_||(_set_proto_=function(e,t){function r(){}r.prototype=t,r=new r;for(t in e)r[t]=e[t];return r}),exports.XMLReader=XMLReader;

},{}],13:[function(require,module,exports){
"use strict";function importCommands(r){for(var i in r)g[i]=r[i]}function splitRow(r,i){var e,t,n=[],m="",a=!1;for(r=r.trim(),t=0;t<r.length;t+=1)e=r[t],'"'===e?'"'===r[t+1]?(m+='"',t+=1):a=!a:e===i?a?m+=e:(n.push(m),m=""):m+=e;return n.push(m),n}var isEmpty=require("lodash.isempty"),flatten=require("lodash.flatten"),vg=require("./libraries/vg/vg"),img=require("./libraries/img/img"),g={};for(var k in vg)g[k]=vg[k];delete g.delete;for(var k in img)g[k]=img[k];importCommands(require("./libraries/math")),importCommands(require("./libraries/string")),importCommands(require("./libraries/list")),importCommands(require("./libraries/data")),importCommands(require("./libraries/image")),importCommands(require("./libraries/graphics")),importCommands(require("./libraries/easing")),g.importSVG=function(r){return g.svg.parseString(r)},g.importImage=function(r){var i=g.Layer.fromImage(r);return new g.Img(i.toCanvas())},g.importText=function(r){return r?String(r):""},g.importCSV=function(r,i){var e,t;if(i=i||",",!r)return null;e=r.split(/\r\n|\r|\n/g),t=splitRow(e[0],i),e=e.slice(1);for(var n,m,a,o,g,s=[],u=0;u<e.length;u+=1)if(n=e[u],!isEmpty(n)){for(m={},a=splitRow(n,i),g=0;g<a.length;g+=1)o=a[g],m[t[g]]=isNaN(o)?o:parseFloat(o);s.push(m)}return s},g.merge=function(){var r=flatten(arguments);if(Array.isArray(r)){for(var i=[],e=0;e<r.length;e+=1)isEmpty(r[e])||i.push(r[e]);if(i.length>0){var t=i[0];if(t&&(t.commands||t.shapes||t.fontFamily))return vg.merge(i);if(t instanceof img.Img)return img.merge(i)}}return null},g.mix=function(r,i,e){if(e=void 0!==e?e:.5,"number"==typeof r)return r*(1-e)+i*e;if("object"==typeof r){for(var t={},n=Object.keys(r),m=0,a=n.length;m<a;m+=1){var o=n[m],s=r[o],u=i[o];void 0!==s&&void 0!==u&&(t[o]=g.mix(s,u,e))}return t}return 0},module.exports=g;
},{"./libraries/data":14,"./libraries/easing":16,"./libraries/graphics":17,"./libraries/image":18,"./libraries/img/img":22,"./libraries/list":25,"./libraries/math":26,"./libraries/string":27,"./libraries/vg/vg":49,"lodash.flatten":3,"lodash.isempty":5}],14:[function(require,module,exports){
"use strict";var values=require("lodash.values"),groupBy=require("lodash.groupby"),list=require("./list"),g={};g.convert=function(t,r,e,o,n){var u=arguments.length;if(2===u){var i=arguments[1];r=i.inMin,e=i.inMax,o=i.outMin,n=i.outMax}else 3===u&&(r=arguments[1][0],e=arguments[1][1],o=arguments[2][0],n=arguments[2][1]);try{t=(t-r)/(e-r)}catch(e){t=r}return o+t*(n-o)},g.filterData=function(t,r,e,o){var n,u,i,l;if(null===o||void 0===o)return t;var a=[];if("=="===e)for(n=0,u=t.length;n<u;n++)i=t[n],l=i[r],l==o&&a.push(i);else if("!="===e)for(n=0,u=t.length;n<u;n++)i=t[n],l=i[r],l!=o&&a.push(i);else if(">"===e)for(n=0,u=t.length;n<u;n++)i=t[n],l=i[r],l>o&&a.push(i);else if(">="===e)for(n=0,u=t.length;n<u;n++)i=t[n],l=i[r],l>=o&&a.push(i);else if("<"===e)for(n=0,u=t.length;n<u;n++)i=t[n],l=i[r],l<o&&a.push(i);else{if("<="!==e)throw new Error("Invalid op "+e);for(n=0,u=t.length;n<u;n++)i=t[n],l=i[r],l<=o&&a.push(i)}return a},g.groupBy=function(t,r){return values(groupBy(t,r))},g.keys=function(t){for(var r=[],e=0;e<t.length;e++)r=r.concat(Object.keys(t[e]));return list.distinct(r)},g.lookup=function(t,r){var e,o;if(e=t,o=e[r],void 0!==o)return"function"==typeof o&&(o=o.call(e)),o;for(var n,u=r.split("."),i=0;i<u.length;i+=1)n=u[i],e&&("function"==typeof e[n]?(o=e[n],e=o.call(e)):e=e[n]);return e},g.dataScale=function(t,r,e){return{domain:t,outMin:r,outMax:e}},g.ticks=function(t,r,e){e=void 0!==e?e:10;var o,n=r-t,u=Math.pow(10,Math.floor(Math.log(n/e)/Math.LN10)),i=e/n*u,l=[];for(i<=.15?u*=10:i<=.35?u*=5:i<=.75&&(u*=2),t=Math.ceil(t/u)*u,r=Math.floor(r/u)*u+.5*u,o=t;o<r;o+=u)l.push(o);return l},module.exports=g;

},{"./list":25,"lodash.groupby":4,"lodash.values":7}],15:[function(require,module,exports){
"use strict";function isBuffer(){return!1}function isObject(e){return"object"==typeof e&&null!==e}function objectToString(e){return Object.prototype.toString.call(e)}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isNullOrUndefined(e){return null===e||void 0===e}var util={isObject:isObject,isRegExp:isRegExp,isDate:isDate,isNullOrUndefined:isNullOrUndefined,isBuffer:isBuffer},pSlice=Array.prototype.slice,deepEqual={},isArguments,_deepEqual,objEquiv;_deepEqual=function(e,t){if(e===t)return!0;if(util.isBuffer(e)&&util.isBuffer(t)){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}return util.isDate(e)&&util.isDate(t)?e.getTime()===t.getTime():util.isRegExp(e)&&util.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:util.isObject(e)||util.isObject(t)?objEquiv(e,t):e==t},deepEqual.deepEqual=_deepEqual,isArguments=function(e){return"[object Arguments]"===Object.prototype.toString.call(e)},objEquiv=function(e,t){if(util.isNullOrUndefined(e)||util.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;var i=isArguments(e),r=isArguments(t);if(i&&!r||!i&&r)return!1;if(i)return e=pSlice.call(e),t=pSlice.call(t),_deepEqual(e,t);var u,n,l,s;try{u=Object.keys(e),n=Object.keys(t)}catch(e){return!1}if(u.length!==n.length)return!1;for(u.sort(),n.sort(),s=u.length-1;s>=0;s--)if(u[s]!=n[s])return!1;for(s=u.length-1;s>=0;s--)if(l=u[s],!_deepEqual(e[l],t[l]))return!1;return!0},module.exports=deepEqual;

},{}],16:[function(require,module,exports){
"use strict";var g={};g.easeInQuad=function(t,n,e,u){return e*(t/=u)*t+n},g.easeOutQuad=function(t,n,e,u){return-e*(t/=u)*(t-2)+n},g.easeInOutQuad=function(t,n,e,u){return(t/=u/2)<1?e/2*t*t+n:-e/2*(--t*(t-2)-1)+n},g.easeInCubic=function(t,n,e,u){return e*(t/=u)*t*t+n},g.easeOutCubic=function(t,n,e,u){return e*((t=t/u-1)*t*t+1)+n},g.easeInOutCubic=function(t,n,e,u){return(t/=u/2)<1?e/2*t*t*t+n:e/2*((t-=2)*t*t+2)+n},g.easeInQuart=function(t,n,e,u){return e*(t/=u)*t*t*t+n},g.easeOutQuart=function(t,n,e,u){return-e*((t=t/u-1)*t*t*t-1)+n},g.easeInOutQuart=function(t,n,e,u){return(t/=u/2)<1?e/2*t*t*t*t+n:-e/2*((t-=2)*t*t*t-2)+n},g.easeInQuint=function(t,n,e,u){return e*(t/=u)*t*t*t*t+n},g.easeOutQuint=function(t,n,e,u){return e*((t=t/u-1)*t*t*t*t+1)+n},g.easeInOutQuint=function(t,n,e,u){return(t/=u/2)<1?e/2*t*t*t*t*t+n:e/2*((t-=2)*t*t*t*t+2)+n},g.easeInSine=function(t,n,e,u){return-e*Math.cos(t/u*(Math.PI/2))+e+n},g.easeOutSine=function(t,n,e,u){return e*Math.sin(t/u*(Math.PI/2))+n},g.easeInOutSine=function(t,n,e,u){return-e/2*(Math.cos(Math.PI*t/u)-1)+n},g.easeInExpo=function(t,n,e,u){return 0===t?n:e*Math.pow(2,10*(t/u-1))+n},g.easeOutExpo=function(t,n,e,u){return t===u?n+e:e*(-Math.pow(2,-10*t/u)+1)+n},g.easeInOutExpo=function(t,n,e,u){return 0===t?n:t===u?n+e:(t/=u/2)<1?e/2*Math.pow(2,10*(t-1))+n:e/2*(-Math.pow(2,-10*--t)+2)+n},g.easeInCirc=function(t,n,e,u){return-e*(Math.sqrt(1-(t/=u)*t)-1)+n},g.easeOutCirc=function(t,n,e,u){return e*Math.sqrt(1-(t=t/u-1)*t)+n},g.easeInOutCirc=function(t,n,e,u){return(t/=u/2)<1?-e/2*(Math.sqrt(1-t*t)-1)+n:e/2*(Math.sqrt(1-(t-=2)*t)+1)+n},g.easeInElastic=function(t,n,e,u){var a=1.70158,r=0,i=e;return 0===t?n:1===(t/=u)?n+e:(r||(r=.3*u),i<Math.abs(e)?(i=e,a=r/4):a=r/(2*Math.PI)*Math.asin(e/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*u-a)*(2*Math.PI)/r))+n)},g.easeOutElastic=function(t,n,e,u){var a=1.70158,r=0,i=e;return 0===t?n:1===(t/=u)?n+e:(r||(r=.3*u),i<Math.abs(e)?(i=e,a=r/4):a=r/(2*Math.PI)*Math.asin(e/i),i*Math.pow(2,-10*t)*Math.sin((t*u-a)*(2*Math.PI)/r)+e+n)},g.easeInOutElastic=function(t,n,e,u){var a=1.70158,r=0,i=e;return 0===t?n:2===(t/=u/2)?n+e:(r||(r=u*(.3*1.5)),i<Math.abs(e)?(i=e,a=r/4):a=r/(2*Math.PI)*Math.asin(e/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*u-a)*(2*Math.PI)/r))+n:i*Math.pow(2,-10*(t-=1))*Math.sin((t*u-a)*(2*Math.PI)/r)*.5+e+n)},g.easeInBack=function(t,n,e,u,a){return void 0===a&&(a=1.70158),e*(t/=u)*t*((a+1)*t-a)+n},g.easeOutBack=function(t,n,e,u,a){return void 0===a&&(a=1.70158),e*((t=t/u-1)*t*((a+1)*t+a)+1)+n},g.easeInOutBack=function(t,n,e,u,a){return void 0===a&&(a=1.70158),(t/=u/2)<1?e/2*(t*t*(((a*=1.525)+1)*t-a))+n:e/2*((t-=2)*t*(((a*=1.525)+1)*t+a)+2)+n},g.easeInBounce=function(t,n,e,u){return e-g.easeOutBounce(u-t,0,e,u)+n},g.easeOutBounce=function(t,n,e,u){return(t/=u)<1/2.75?e*(7.5625*t*t)+n:t<2/2.75?e*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?e*(7.5625*(t-=2.25/2.75)*t+.9375)+n:e*(7.5625*(t-=2.625/2.75)*t+.984375)+n},g.easeInOutBounce=function(t,n,e,u){return t<u/2?.5*g.easeInBounce(2*t,0,e,u)+n:.5*g.easeOutBounce(2*t-u,0,e,u)+.5*e+n},g.easing=function(t){var n=g[t],e=Array.prototype.slice.call(arguments,1);return n.apply(null,e)},module.exports=g;

},{}],17:[function(require,module,exports){
"use strict";function clamp(r,n,t){return Math.min(t,Math.max(n,r))}function transformShape(r,n){return n.transformShape(r)}function transformImage(r,n){return r._transform(n.m)}function transform(r,n){if(r instanceof vg.Path||r instanceof vg.Group||r instanceof vg.Text||void 0!==r.x&&void 0!==r.y)return transformShape(r,n);if(Array.isArray(r)){for(var t=[],e=0;e<r.length;e+=1)t.push(transform(r[e],n));return t}return r instanceof img.Img?transformImage(r,n):void 0}var vg=require("./vg/vg"),img=require("./img/img"),math=require("./math"),g={};g.HORIZONTAL="horizontal",g.VERTICAL="vertical",g.BOTH="both",g.LEFT="left",g.RIGHT="right",g.CENTER="center",g.TOP="top",g.BOTTOM="bottom",g.MIDDLE="middle",g.align=function(r,n,t,e){if(r){var o,a,i,s=n.x,f=n.y,u=vg.bounds(r);return o=t===g.LEFT?s-u.x:t===g.RIGHT?s-u.x-u.width:t===g.CENTER?s-u.x-u.width/2:0,a=e===g.TOP?f-u.y:e===g.BOTTOM?f-u.y-u.height:e===g.MIDDLE?f-u.y-u.height/2:0,i=(new vg.Transform).translate(o,a),transform(r,i)}},g.colorize=function(r,n){var t=arguments;if(("object"!=typeof n||n instanceof vg.Color)&&(n={},void 0!==t[1]&&(n.fill=t[1]),void 0!==t[2]&&(n.stroke=t[2]),void 0!==t[3]&&(n.strokeWidth=t[3])),r instanceof vg.Path||r instanceof vg.Group)return r.colorize(n);if(r instanceof img.Img||r instanceof vg.Text){if(n.fill||0===n.fill)return r.colorize(n.fill);throw new Error("No color given")}},g.copy=function(r,n,t,e,o,a){var i,g,s,f,u,v=[],l=0,h=0,c=0,m=1,d=1,p=!1;for(r instanceof vg.Path||r instanceof vg.Group||r instanceof vg.Text?u=transformShape:Array.isArray(r)&&r.length>0&&void 0!==r[0].x&&void 0!==r[0].y?(p=!0,u=transformShape):r instanceof img.Img&&(u=transformImage),i=0;i<n;i+=1){for(g=new vg.Transform,s=0;s<t.length;s+=1)f=t[s],"t"===f?g=g.translate(l,h):"r"===f?g=g.rotate(c):"s"===f&&(g=g.scale(m,d));p?v=v.concat(u(r,g)):v.push(u(r,g)),l+=e.x,h+=e.y,c+=o,m+=a.x,d+=a.y}return v},g.flip=function(r,n){if("none"===n)return r;if(r instanceof vg.Path||r instanceof vg.Group||r instanceof vg.Text||Array.isArray(r)&&r.length>0&&void 0!==r[0].x&&void 0!==r[0].y){var t=n===g.HORIZONTAL||n===g.BOTH?-1:1,e=n===g.VERTICAL||n===g.BOTH?-1:1;return vg.scale(r,new vg.Point(t,e),vg.centerPoint(r))}if(r instanceof img.Img){var o=r,a=o.toLayer(!1);return n!==g.HORIZONTAL&&n!==g.BOTH||a.flipHorizontal(),n!==g.VERTICAL&&n!==g.BOTH||a.flipVertical(),o.withCanvas(a.toCanvas())}},g.fit=function(r,n,t,e,o){if(r){o=void 0!==o&&o;var a,i,g,s=vg.bounds(r),f=s.x,u=s.y,v=s.width,l=s.height;return v=v>1e-12?v:0,l=l>1e-12?l:0,a=new vg.Transform,a=a.translate(n.x,n.y),o?(i=v>0?t/v:1,g=l>0?e/l:1):(i=v>0?t/v:Number.MAX_VALUE,g=l>0?e/l:Number.MAX_VALUE,i=g=Math.min(i,g)),a=a.scale(i,g),a=a.translate(-v/2-f,-l/2-u),transform(r,a)}},g.fitTo=function(r,n,t){if(r){if(!n)return r;var e=vg.bounds(n),o=e.x,a=e.y,i=e.width,s=e.height;return g.fit(r,{x:o+i/2,y:a+s/2},i,s,t)}},g.hslAdjust=function(r,n,t,e,o){function a(e){if(e instanceof vg.Group){for(var i=[],g=0;g<e.shapes.length;g+=1)i.push(a(e.shapes[g]));return new vg.Group(i)}if(e instanceof vg.Path){var b=e.clone();return b.fill=a(b.fill),b.stroke=a(b.stroke),b}var A=e;return A instanceof vg.Color||(A=vg.Color.parse(A)),s=A.r,f=A.g,u=A.b,0===n&&0===t||(v=s,f>v&&(v=f),u>v&&(v=u),l=s,f<l&&(l=f),u<l&&(l=u),h=v-l,d=(l+v)/2,d>0&&h>0&&(d<=.5?(m=h/(v+l)*w,m>1&&(m=1),r=d*(1+m)):(m=h/(2-v-l)*w,m>1&&(m=1),r=d+m-d*m),c=s===v?f===l?5+(v-u)/h+n:1-(v-f)/h+n:f===v?u===l?1+(v-s)/h+n:3-(v-u)/h+n:s===l?3+(v-f)/h+n:5-(v-s)/h+n,c<0&&(c+=6),c>=6&&(c-=6),p=d+d-r,T=c>>0,y=(r-p)*(c-T),0===T?(s=r,f=p+y,u=p):1===T?(s=r-y,f=r,u=p):2===T?(s=p,f=r,u=p+y):3===T?(s=p,f=r-y,u=r):4===T?(s=p+y,f=p,u=r):5===T&&(s=r,f=p,u=r-y))),s=s*x+C,f=f*x+C,u=u*x+C,s<0&&(s=0),f<0&&(f=0),u<0&&(u=0),s>1&&(s=1),f>1&&(f=1),u>1&&(u=1),new vg.Color(s,f,u,A.a+o)}if(o||(o=0),r instanceof img.Img){var i=r,g=i.toLayer(!1);return g.addFilter("hslAdjust",{h:n,s:t,l:e,a:o}),i.withCanvas(g.toCanvas())}n=clamp(n,-1,1),t=clamp(t,-1,1),e=clamp(e,-1,1),o=clamp(o,-1,1);var s,f,u,v,l,h,c,m,d,p,y,T,w=1+t*(t<0?1:2),x=e<0?1+e:1-e,C=e<0?0:e;return n=6*n%6,a(r)},g.rgbAdjust=function(r,n,t,e,o){function a(r){if(r instanceof img.Img){var i=r,g=i.toLayer(!1);return g.addFilter("rgbAdjust",{r:n,g:t,b:e,a:o}),i.withCanvas(g.toCanvas())}if(r instanceof vg.Group){for(var s=[],f=0;f<r.shapes.length;f+=1)s.push(a(r.shapes[f]));return new vg.Group(s)}if(r instanceof vg.Path){var u=r.clone();return u.fill=a(u.fill),u.stroke=a(u.stroke),u}var v=r;return v instanceof vg.Color||(v=vg.Color.parse(v)),new vg.Color(v.r+n,v.g+t,v.b+e,v.a+o)}return o||(o=0),n=clamp(n,-1,1),t=clamp(t,-1,1),e=clamp(e,-1,1),o=clamp(o,-1,1),a(r)},g.stack=function(r,n,t){if(!r)return[];if(r.length<=1)return r;var e,o,a,i,g,s,f=r[0].bounds(),u=[];if("e"===n)for(a=f.x,e=0;e<r.length;e+=1)o=r[e],s=o.bounds(),g=(new vg.Transform).translate(a-s.x,0),u.push(transform(o,g)),a+=s.width+t;else if("w"===n)for(a=f.x+f.width,e=0;e<r.length;e+=1)o=r[e],s=o.bounds(),g=(new vg.Transform).translate(a-(s.x+s.width),0),u.push(transform(o,g)),a-=s.width+t;else if("n"===n)for(i=f.y+f.height,e=0;e<r.length;e+=1)o=r[e],s=o.bounds(),g=(new vg.Transform).translate(0,i-(s.y+s.height)),u.push(transform(o,g)),i-=s.height+t;else if("s"===n)for(i=f.y,e=0;e<r.length;e+=1)o=r[e],s=o.bounds(),g=(new vg.Transform).translate(0,i-s.y),u.push(transform(o,g)),i+=s.height+t;return u},g.angle=function(r,n){var t=arguments;return 4===t.length?(r=vg.Point.read(t[0],t[1]),n=vg.Point.read(t[2],t[3])):(r=vg.Point.read(r),n=vg.Point.read(n)),math.degrees(Math.atan2(n.y-r.y,n.x-r.x))},g.coordinates=function(r,n,t){var e=arguments;return 4===e.length?(r=vg.Point.read(e[0],e[1]),n=e[2],t=e[3]):r=vg.Point.read(r),vg.geo.coordinates(r.x,r.y,n,t)},g.distance=function(r,n){var t=arguments;return 4===t.length?(r=vg.Point.read(t[0],t[1]),n=vg.Point.read(t[2],t[3])):(r=vg.Point.read(r),n=vg.Point.read(n)),Math.sqrt(Math.pow(n.x-r.x,2)+Math.pow(n.y-r.y,2))},g.grayColor=function(r,n){return n||0===n||(n=1),vg.Color.gray(r,n,1)},g.hexColor=function(r){function n(r){return!isNaN(parseFloat(r))&&isFinite(r)}return r=n(r)?r.toString(16):String(r),"#"!==r[0]&&(r="#"+r),vg.Color.parse(r)},g.hslColor=function(r,n,t,e){return e||0===e||(e=1),vg.Color.hsl(r,n,t,e,1)},g.rgbColor=function(r,n,t,e){return e||0===e||(e=1),vg.Color.rgb(r,n,t,e,1)},g.desaturate=function(r,n){return r?r.desaturate({method:n}):null},g.invert=function(r){if(!r)return null;if(r instanceof img.Img){var n=r,t=n.toLayer(!1);return t.addFilter("invert"),n.withCanvas(t.toCanvas())}return r.invert()},module.exports=g;

},{"./img/img":22,"./math":26,"./vg/vg":49}],18:[function(require,module,exports){
"use strict";var vg=require("./vg/vg"),img=require("./img/img"),Img=img.Img,Layer=img.Layer,ImageCanvas=img.ImageCanvas,g={};g.blend=function(a,t,e){var r=a.bounds(),n=t.bounds(),i=new vg.Rect(r.x,r.y,r.width,r.height).unite(n),o=Math.ceil(i.width),d=Math.ceil(i.height),s=o/2+i.x,g=d/2+i.y,h=new ImageCanvas(o,d),u=h.addLayer(a.toLayer());u.translate(-s,-g);var v=h.addLayer(t.toLayer());return v.translate(-s,-g),v.blendmode=e,new Img(h.render(),s,g)},g.blur=function(a,t){var e=a.toLayer(!1);return e.addFilter("blur",{radius:t}),a.withCanvas(e.toCanvas())},g.brighten=function(a,t,e){var r=a.toLayer(!1);return r.addFilter("brightness",{brightness:t/100,contrast:e/100}),a.withCanvas(r.toCanvas())},g.bump=function(a,t,e,r){var n=a.toLayer(!1);return n.addFilter("bump",{dx:t.x,dy:t.y,radius:e,zoom:r/100}),a.withCanvas(n.toCanvas())},g.colorImage=function(a,t,e){var r=Layer.fromColor(e);return r.width=a,r.height=t,new Img(r.toCanvas())},g.crop=function(a,t){return a.crop(t)},g.crossEdges=function(a,t){var e=a.toLayer(!1);return e.addFilter("crossedges",{strength:t/100}),a.withCanvas(e.toCanvas())},g.dent=function(a,t,e,r){var n=a.toLayer(!1);return n.addFilter("dent",{dx:t.x,dy:t.y,radius:e,zoom:r/100}),a.withCanvas(n.toCanvas())},g.emboss=function(a,t,e){var r=a.toLayer(!1);return r.addFilter("emboss",{amount:t/100,angle:e}),a.withCanvas(r.toCanvas())},g.equalize=function(a){var t=a.toLayer(!1);return t.addFilter("equalize"),a.withCanvas(t.toCanvas())},g.findEdges=function(a){var t=a.toLayer(!1);return t.addFilter("findedges"),a.withCanvas(t.toCanvas())},g.glow=function(a,t,e){var r=a.toLayer(!1);return r.addFilter("glow",{amount:t/100,kernelSize:e}),a.withCanvas(r.toCanvas())},g.gradientImage=function(a,t,e,r,n,i,o){var d=Layer.fromGradient(e,r,n,i,o/100);return d.width=a,d.height=t,new Img(d.toCanvas())},g.histogram=function(a,t,e){var r,n,i,o,d=a.getPixels(),s=new Array(256);for(r=0;r<s.length;r+=1)s[r]=0;if("lum"===t)for(r=0;r<d.width*d.height;r+=1)i=d.get(r),o=.2125*i[0]+.7154*i[1]+.0721*i[2],s[Math.round(o)]+=1;else for("red"===t&&(n=0),"green"===t&&(n=1),"blue"===t&&(n=2),"alpha"===t&&(n=3),r=0;r<d.width*d.height;r+=1)i=d.get(r),o=i[n],s[o]+=1;if(e)for(r=0;r<s.length;r+=1)s[r]/=d.width*d.height;return s},g.lightTunnel=function(a,t,e){var r=a.toLayer(!1);return r.addFilter("splash",{dx:t.x,dy:t.y,radius:e}),a.withCanvas(r.toCanvas())},g.luminanceBW=function(a){var t=a.toLayer(!1);return t.addFilter("luminancebw"),a.withCanvas(t.toCanvas())},g.mask=function(a,t){a=a.transformed(),t=t.transformed();var e=a.toLayer(!1),r=t.toLayer(),n=a.bounds(),i=t.bounds(),o=new vg.Rect(n.x,n.y,n.width,n.height).unite(i),d=Math.ceil(o.width),s=Math.ceil(o.height),g=d/2+o.x,h=s/2+o.y;r.translate(-g,-h);var u=e.mask.addLayer("white");return u.width=e.width,u.height=e.height,e.mask.addLayer(r),a.withCanvas(e.toCanvas())},g.mosaic=function(a,t){var e=a.toLayer(!1);return e.addFilter("mosaic",{blockSize:t}),a.withCanvas(e.toCanvas())},g.pinch=function(a,t,e){var r=a.toLayer(!1);return r.addFilter("pinch",{dx:t.x,dy:t.y,zoom:e/100}),a.withCanvas(r.toCanvas())},g.posterize=function(a,t){var e=a.toLayer(!1);return e.addFilter("posterize",{levels:t}),a.withCanvas(e.toCanvas())},g.removeNoise=function(a){var t=a.toLayer(!1);return t.addFilter("removenoise"),a.withCanvas(t.toCanvas())},g.solarize=function(a){var t=a.toLayer(!1);return t.addFilter("solarize"),a.withCanvas(t.toCanvas())},g.toBitmap=function(a,t){var e,r=document.createElement("canvas");e=t?t.bounds():a.bounds();var n=e.x,i=e.y,o=r.width=Math.ceil(e.width),d=r.height=Math.ceil(e.height),s=r.getContext("2d");return s.translate(-n,-i),a.draw(s),new Img(r,o/2+n,d/2+i)},g.toPixels=function(a,t){t=t>1?t:1;for(var e=a.canvas,r=e.width,n=e.height,i=e.getContext("2d"),o=i.getImageData(0,0,e.width,e.height),d=o.data,s=4*e.width,g=[],h=0;h<n;h+=t)for(var u=0;u<r;u+=t){var v=h*s+4*u,l=d[v],c=d[v+1],w=d[v+2],m=d[v+3];g.push({x:u-r/2,y:h-n/2,r:l,g:c,b:w,a:m,color:new vg.Color(l/255,c/255,w/255,m/255)})}return g},g.twirl=function(a,t,e,r){var n=a.toLayer(!1);return n.addFilter("twirl",{dx:t.x,dy:t.y,radius:e,angle:r}),a.withCanvas(n.toCanvas())},module.exports=g;

},{"./img/img":22,"./vg/vg":49}],19:[function(require,module,exports){
"use strict";function passThrough(e,n){n(null,e)}function processLayers(e){return function(n,r){async.compose(AsyncRenderer.processImage(n.filters),AsyncRenderer.processMask(n.mask),AsyncRenderer.load(e,n))(null,r)}}var async=require("async"),process=require("./process"),CanvasRenderer=require("./canvasrenderer"),AsyncRenderer={};AsyncRenderer.toImage=function(){return function(e,n){n(null,CanvasRenderer.toImage(e))}},AsyncRenderer.load=function(e,n){return n.isPath()?AsyncRenderer.loadFile(n.data):n.isFill()?AsyncRenderer.generateColor(e,n):n.isGradient()?AsyncRenderer.generateGradient(e,n):n.isHtmlCanvas()?AsyncRenderer.loadHtmlCanvas(n.data):n.isImage()?AsyncRenderer.loadImage(n.data):n.isImageCanvas()?AsyncRenderer.loadImageCanvas(n.data):void 0},AsyncRenderer.loadFile=function(e){return function(n,r){var a=document.createElement("canvas"),t=a.getContext("2d"),s=new Image;s.onload=function(){a.width=s.width,a.height=s.height,t.drawImage(s,0,0,a.width,a.height),r(null,a)},s.src=e}},AsyncRenderer.loadHtmlCanvas=function(e){return function(n,r){r(null,e)}},AsyncRenderer.loadImageCanvas=function(e){return function(n,r){e.render(function(e){r(null,e)})}},AsyncRenderer.loadImage=function(e){return function(n,r){var a=CanvasRenderer.loadImage(e);r(null,a)}},AsyncRenderer.generateColor=function(e,n){return function(r,a){var t=CanvasRenderer.generateColor(e,n);a(null,t)}},AsyncRenderer.generateGradient=function(e,n){return function(r,a){var t=CanvasRenderer.generateGradient(e,n);a(null,t)}},AsyncRenderer.processImage=function(e){return 0===e.length?passThrough:function(n,r){CanvasRenderer.processImage(n,e),r(null,n)}},AsyncRenderer.processMask=function(e){return 0===e.layers.length?passThrough:function(n,r){e.width=n.width,e.height=n.height,AsyncRenderer.renderBW(e,function(e){var a=e.getContext("2d").getImageData(0,0,e.width,e.height).data,t={name:"mask",options:{data:a,x:0,y:0,width:e.width,height:e.height}},s=AsyncRenderer.processImage([t]);s(n,r)})}},AsyncRenderer.mergeManualBlend=function(e,n){return function(r,a){CanvasRenderer.mergeManualBlend(e,n)(r),a(null,r)}},AsyncRenderer.mergeNativeBlend=function(e,n){return function(r,a){CanvasRenderer.mergeNativeBlend(e,n)(r),a(null,r)}},AsyncRenderer.merge=function(e,n,r){var a=CanvasRenderer.createRenderPipe(AsyncRenderer,e,n);a.reverse();var t=CanvasRenderer.singleLayerWithOpacity(e,n[0]);a.push(function(e,n){n(null,t)}),async.compose.apply(null,a)(null,function(){r(t)})},AsyncRenderer.composite=function(e,n,r){return n&&0!==n.length?1===n.length?void r(CanvasRenderer.singleLayerWithOpacity(e,n[0])):void AsyncRenderer.merge(e,n,r):void r(null)},AsyncRenderer.render=function(e,n){async.map(e.layers,processLayers(e),function(r,a){n&&AsyncRenderer.composite(e,CanvasRenderer.getLayerData(e,a),n)})},AsyncRenderer.renderBW=function(e,n){AsyncRenderer.render(e,function(e){var r=(e.getContext("2d").getImageData(0,0,e.width,e.height).data,{name:"desaturate",options:{method:"ITU-R BT.709"}}),a=AsyncRenderer.processImage([r]);a(e,function(e,r){n(r)})})},module.exports=AsyncRenderer;

},{"./canvasrenderer":21,"./process":23,"async":1}],20:[function(require,module,exports){
"use strict";function addAliases(n){var t,e,i,o=Object.keys(aliases);for(t=0;t<o.length;t+=1)e=o[t],i=aliases[e],n[e]=n[i]}function realBlendMode(n){return void 0!==aliases[n]?aliases[n]:n}function getNativeModes(){if("undefined"==typeof document)return{};var n,t,e,i,o={},r=document.createElement("canvas"),a=r.getContext("2d");if(!a)return{};var l=["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],d=["multiply","screen","overlay","soft-light","hard-light","color-dodge","color-burn","darken","lighten","difference","exclusion","hue","saturation","luminosity","color","add","subtract","average","negation"],c=["divide","darker-color","lighter-color","linear-burn","linear-light","vivid-light","pin-light","hard-mix"];for(n=0;n<l.length;n+=1)o[l[n]]=!0;for(n=0;n<c.length;n+=1)o[c[n]]=!1;for(r.width=1,r.height=1,n=0;n<d.length;n+=1){t=d[n],e="darken"===t,i=!1,a.save();try{a.fillStyle=e?"#300":"#a00",a.fillRect(0,0,1,1),a.globalCompositeOperation=t,a.globalCompositeOperation===t&&(a.fillStyle=e?"#a00":"#300",a.fillRect(0,0,1,1),i=a.getImageData(0,0,1,1).data[0]!==(e?170:51))}catch(n){}a.restore(),o[t]=i}return addAliases(o),o}function _blend(n,t,e,i,o){process(n,t,e,i,o)}function _wrap(n){return function(t,e,i,o,r){r.type=n,_blend(t,e,i,o,r)}}var blend,process,aliases={normal:"source-over","linear-dodge":"add"};process=function(n,t,e,i,o){function r(n,t,e){n/=255,t/=255,e/=255;var i,o,r;return n===t&&t===e?(o=0,i=0):n>=t&&t>=e?(o=n-e,i=60*(t-e)/o):t>n&&n>=e?(o=t-e,i=60*(t-n)/o+60):t>=e&&e>n?(o=t-n,i=60*(e-n)/o+120):e>t&&t>n?(o=e-n,i=60*(e-t)/o+180):e>n&&n>=t?(o=e-t,i=60*(n-t)/o+240):(o=n-t,i=60*(n-e)/o+300),r=V*n+W*t+X*e,[i%360,U(T(o,0),1),U(T(r,0),1)]}function a(n,t,e){n%=360;var i,o,r,a;return n>=0&&n<60?(a=t*n/60,r=e-V*t-W*a,i=r+t,o=r+a):n>=60&&n<120?(a=t*(n-60)/60,o=e+X*t+V*a,r=o-t,i=o-a):n>=120&&n<180?(a=t*(n-120)/60,i=e-W*t-X*a,o=i+t,r=i+a):n>=180&&n<240?(a=t*(n-180)/60,r=e+V*t+W*a,i=r-t,o=r-a):n>=240&&n<300?(a=t*(n-240)/60,o=e-X*t-V*a,r=o+t,i=o+a):(a=t*(n-300)/60,i=e+W*t+X*a,o=i-t,r=i-a),i=255*U(T(i,0),1),o=255*U(T(o,0),1),r=255*U(T(r,0),1),[i,o,r]}function l(){L=I+G-G*F,P=q+H-H*F,Q=z+J-J*F}function d(){L=I*G+I*(1-K)+G*(1-F),P=q*H+q*(1-K)+H*(1-F),Q=z*J+z*(1-K)+J*(1-F)}function c(){L=T(G*F-I*K,0)+I*(1-K)+G*(1-F),P=T(H*F-q*K,0)+q*(1-K)+H*(1-F),Q=T(J*F-z*K,0)+z*(1-K)+J*(1-F)}function u(){L=0===I?0:G/I*255,P=0===q?0:H/q*255,Q=0===z?0:J/z*255}function f(){L=I+G-I*G,P=q+H-q*H,Q=z+J-z*J}function s(){L=T(I*K,G*F)+I*(1-K)+G*(1-F),P=T(q*K,H*F)+q*(1-K)+H*(1-F),Q=T(z*K,J*F)+z*(1-K)+J*(1-F)}function h(){L=U(I*K,G*F)+I*(1-K)+G*(1-F),P=U(q*K,H*F)+q*(1-K)+H*(1-F),Q=U(z*K,J*F)+z*(1-K)+J*(1-F)}function v(){G*F*.3+H*F*.59+J*F*.11<=I*K*.3+q*K*.59+z*K*.11?(L=G*F,P=H*F,Q=J*F):(L=I*K,P=q*K,Q=z*K),L+=I*(1-K)+G*(1-F),P+=q*(1-K)+H*(1-F),Q+=z*(1-K)+J*(1-F)}function g(){G*F*.3+H*F*.59+J*F*.11>I*K*.3+q*K*.59+z*K*.11?(L=G*F,P=H*F,Q=J*F):(L=I*K,P=q*K,Q=z*K),L+=I*(1-K)+G*(1-F),P+=q*(1-K)+H*(1-F),Q+=z*(1-K)+J*(1-F)}function y(){L=U(G+I,255),P=U(H+q,255),Q=U(J+z,255)}function p(){L=G+I,P=H+q,Q=J+z,L=L<255?0:L-255,P=P<255?0:P-255,Q=Q<255?0:Q-255}function m(){L=I+G-2*U(I*K,G*F),P=q+H-2*U(q*K,H*F),Q=z+J-2*U(z*K,J*F)}function b(){L=I*K+G*F-2*I*G+I*(1-K)+G*(1-F),P=q*K+H*F-2*q*H+q*(1-K)+H*(1-F),Q=z*K+J*F-2*z*J+z*(1-K)+J*(1-F)}function x(){L=2*G<=K?2*I*G+I*(1-K)+G*(1-F):I*(1+K)+G*(1+F)-2*G*I-K*F,P=2*H<=K?2*q*H+q*(1-K)+H*(1-F):q*(1+K)+H*(1+F)-2*H*q-K*F,Q=2*J<=K?2*z*J+z*(1-K)+J*(1-F):z*(1+K)+J*(1+F)-2*J*z-K*F}function k(){var n,t=Math.pow;return 0===K?(L=I,P=q,void(Q=z)):(n=G/K,2*I<=F?L=G*(F+(2*I-F)*(1-n))+I*(1-K)+G*(1-F):2*I>F&&4*G<=K?L=K*(2*I-F)*(16*t(n,3)-12*t(n,2)-3*n)+I-I*K+G:2*I>F&&4*G>K&&(L=K*(2*I-F)*(t(n,.5)-n)+I-I*K+G),n=H/K,2*q<=F?P=H*(F+(2*q-F)*(1-n))+q*(1-K)+H*(1-F):2*q>F&&4*H<=K?P=K*(2*q-F)*(16*t(n,3)-12*t(n,2)-3*n)+q-q*K+H:2*q>F&&4*H>K&&(P=K*(2*q-F)*(t(n,.5)-n)+q-q*K+H),n=J/K,void(2*z<=F?Q=J*(F+(2*z-F)*(1-n))+z*(1-K)+J*(1-F):2*z>F&&4*J<=K?Q=K*(2*z-F)*(16*t(n,3)-12*t(n,2)-3*n)+z-z*K+J:2*z>F&&4*J>K&&(Q=K*(2*z-F)*(t(n,.5)-n)+z-z*K+J)))}function w(){L=2*I<=F?2*I*G+I*(1-K)+G*(1-F):I*(1+K)+G*(1+F)-F*K-2*I*G,P=2*q<=F?2*q*H+q*(1-K)+H*(1-F):q*(1+K)+H*(1+F)-F*K-2*q*H,Q=2*z<=F?2*z*J+z*(1-K)+J*(1-F):z*(1+K)+J*(1+F)-F*K-2*z*J}function M(){return 0===K?(L=I,P=q,void(Q=z)):(I===F&&0===G?L=I*(1-K):I===F?L=F*K+I*(1-K)+G*(1-F):I<F&&(L=F*K*U(1,G/K*F/(F-I))+I*(1-K)+G*(1-F)),q===F&&0===H?P=q*(1-K):I===F?P=F*K+q*(1-K)+H*(1-F):I<F&&(P=F*K*U(1,H/K*F/(F-q))+q*(1-K)+H*(1-F)),void(z===F&&0===J?Q=z*(1-K):I===F?Q=F*K+z*(1-K)+J*(1-F):I<F&&(Q=F*K*U(1,J/K*F/(F-z))+z*(1-K)+J*(1-F))))}function _(){return 0===K?(L=I,P=q,void(Q=z)):(0===I&&G===K?L=F*K+G*(1-F):0===I?L=G*(1-F):I>0&&(L=F*K*(1-U(1,(1-G/K)*F/I))+I*(1-K)+G*(1-F)),0===q&&H===K?P=F*K+H*(1-F):0===q?P=H*(1-F):q>0&&(P=F*K*(1-U(1,(1-H/K)*F/q))+q*(1-K)+H*(1-F)),void(0===z&&J===K?Q=F*K+J*(1-F):0===z?Q=J*(1-F):z>0&&(Q=F*K*(1-U(1,(1-J/K)*F/z))+z*(1-K)+J*(1-F))))}function O(){var n=2*I+G-256,t=2*q+H-256,e=2*z+J-256;L=n<0||I<128&&n<0?0:n>255?255:n,P=t<0||q<128&&t<0?0:t>255?255:t,Q=e<0||z<128&&e<0?0:e>255?255:e}function A(){var n;I<128?I?(n=255-(255-G<<8)/(2*I),L=n<0?0:n):L=0:(n=2*I-256,n<255?(n=(G<<8)/(255-n),L=n>255?255:n):L=n<0?0:n),q<128?q?(n=255-(255-H<<8)/(2*q),P=n<0?0:n):P=0:(n=2*q-256,n<255?(n=(H<<8)/(255-n),P=n>255?255:n):P=n<0?0:n),z<128?z?(n=255-(255-J<<8)/(2*z),Q=n<0?0:n):Q=0:(n=2*z-256,n<255?(n=(J<<8)/(255-n),Q=n>255?255:n):Q=n<0?0:n)}function B(){var n;I<128?(n=2*I,L=G<n?G:n):(n=2*I-256,L=G>n?G:n),q<128?(n=2*q,P=H<n?H:n):(n=2*q-256,P=H>n?H:n),z<128?(n=2*z,Q=J<n?J:n):(n=2*z-256,Q=J>n?J:n)}function C(){var n;I<128?L=255-(255-G<<8)/(2*I)<128||0===I?0:255:(n=2*I-256,L=n<255&&(G<<8)/(255-n)<128?0:255),q<128?P=255-(255-H<<8)/(2*q)<128||0===q?0:255:(n=2*q-256,P=n<255&&(H<<8)/(255-n)<128?0:255),z<128?Q=255-(255-J<<8)/(2*z)<128||0===z?0:255:(n=2*z-256,Q=n<255&&(J<<8)/(255-n)<128?0:255)}function N(){var n=r(G,H,J),t=r(I,q,z),e=a(t[0],n[1],n[2]);L=e[0],P=e[1],Q=e[2]}function j(){var n=r(G,H,J),t=r(I,q,z),e=a(n[0],t[1],n[2]);L=e[0],P=e[1],Q=e[2]}function R(){var n=r(G,H,J),t=r(I,q,z),e=a(n[0],n[1],t[2]);L=e[0],P=e[1],Q=e[2]}function S(){var n=r(G,H,J),t=r(I,q,z),e=a(t[0],t[1],n[2]);L=e[0],P=e[1],Q=e[2]}function D(n,t){var e=n.x+n.width,i=n.y+n.height,o=t.x+t.width,r=t.y+t.height,a=T(n.x,t.x),l=T(n.y,t.y),d=T(U(e,o)-a,0),c=T(U(i,r)-l,0);return[a,l,d,c]}var E,I,q,z,F,G,H,J,K,L,P,Q,T=Math.max,U=Math.min,V=.2126,W=.7152,X=.0722;E={"source-over":l,multiply:d,subtract:c,divide:u,screen:f,lighten:s,darken:h,"darker-color":v,"lighter-color":g,add:y,"linear-burn":p,difference:m,exclusion:b,overlay:x,"soft-light":k,"hard-light":w,"color-dodge":M,"color-burn":_,"linear-light":O,"vivid-light":A,"pin-light":B,"hard-mix":C,hue:N,saturation:j,luminosity:R,color:S},function(){function r(){F=y[d+3]/255*p,K=n[l+3]/255,h=F+K-F*K,v=255/h,I=y[d]/255*F,q=y[d+1]/255*F,z=y[d+2]/255*F,G=n[l]/255*K,H=n[l+1]/255*K,J=n[l+2]/255*K,m(),t[l]=L*v,t[l+1]=P*v,t[l+2]=Q*v,t[l+3]=255*h}function a(){G=n[l],H=n[l+1],J=n[l+2],I=y[d],q=y[d+1],z=y[d+2],m(),t[l]=L,t[l+1]=P,t[l+2]=Q,t[l+3]=n[l+3],f=p*y[d+3]/255,f<1&&(s=1-f,t[l]=n[l]*s+t[l]*f,t[l+1]=n[l+1]*s+t[l+1]*f,t[l+2]=n[l+2]*s+t[l+2]*f)}var l,d,c,u,f,s,h,v,g,y=o.data,p=0===o.opacity?0:o.opacity||1,m=E[o.type||"_svg_normal"],b=o.dx||0,x=o.dy||0,k=D({x:0,y:0,width:e,height:i},{x:b,y:x,width:o.width,height:o.height}),w=k[0],M=k[1],_=k[2],O=k[3];for(g=0===m.name.indexOf("_svg_")?r:a,u=0;u<i;u+=1)for(c=0;c<e;c+=1)l=4*(u*e+c),u>=M&&c>=w&&c<w+_&&u<M+O?(d=4*((u-x)*o.width+c-b),g()):(t[l]=n[l],t[l+1]=n[l+1],t[l+2]=n[l+2],t[l+3]=n[l+3])}()},blend=function(){for(var n,t={blend:_blend},e=["source-over","add","multiply","subtract","divide","screen","lighten","darken","darker-color","lighter-color","linear-burn","difference","exclusion","overlay","soft-light","hard-light","color-dodge","color-burn","linear-light","vivid-light","pin-light","hard-mix","hue","saturation","luminosity","color"],i=0;i<e.length;i+=1)n=e[i],t[n]=_wrap(n);for(e=Object.keys(e),i=0;i<e.length;i+=1);return addAliases(t),t.getNativeModes=getNativeModes,t.realBlendMode=realBlendMode,t}(),module.exports=blend;

},{}],21:[function(require,module,exports){
"use strict";function createImageData(e,a,t){return e.createImageData?e.createImageData(a,t):e.getImageData(0,0,a,t)}function transformLayer(e,a,t){var r=t.transform.matrix();e.translate(a.width/2,a.height/2),e.transform(r[0],r[1],r[3],r[4],r[6],r[7]),(t.flip_h||t.flip_v)&&e.scale(t.flip_h?-1:1,t.flip_v?-1:1),e.translate(-t.img.width/2,-t.img.height/2)}function transformRect(e,a){var t,r,n,i,d,h=a.img.width,o=a.img.height,s={x:0,y:0},g={x:h,y:0},l={x:0,y:o},m={x:h,y:o},c=[s,g,l,m],v=util.transform();v=v.translate(e.width/2,e.height/2),v=v.append(a.transform),v=v.translate(-a.img.width/2,-a.img.height/2);for(var u=0;u<4;u+=1)t=v.transformPoint(c[u]),0===u?(r=i=t.x,n=d=t.y):(t.x<r&&(r=t.x),t.x>i&&(i=t.x),t.y<n&&(n=t.y),t.y>d&&(d=t.y));return{x:r,y:n,width:i-r,height:d-n}}function rectIntersect(e,a){var t=e.x+e.width,r=e.y+e.height,n=a.x+a.width,i=a.y+a.height,d=Math.max(e.x,a.x),h=Math.max(e.y,a.y),o=Math.max(Math.min(t,n)-d,0),s=Math.max(Math.min(r,i)-h,0);return{x:d,y:h,width:o,height:s}}function calcLayerRect(e,a){var t=transformRect(e,a);return t=rectIntersect(t,{x:0,y:0,width:e.width,height:e.height}),{x:Math.round(t.x),y:Math.round(t.y),width:Math.ceil(t.width),height:Math.ceil(t.height)}}function getTransformedLayerData(e,a,t){var r=document.createElement("canvas"),n=r.getContext("2d");return r.width=t.width,r.height=t.height,n.translate(-t.x,-t.y),transformLayer(n,e,a),n.drawImage(a.img,0,0),n.getImageData(0,0,t.width,t.height)}var blend=require("./blend"),process=require("./process"),util=require("./util"),nativeBlendModes=blend.getNativeModes(),CanvasRenderer={};CanvasRenderer.toImage=function(e){var a=new Image;return a.width=e.width,a.height=e.height,a.src=e.toDataURL(),a},CanvasRenderer.load=function(e,a){return a.isFill()?CanvasRenderer.generateColor(e,a):a.isGradient()?CanvasRenderer.generateGradient(e,a):a.isHtmlCanvas()?CanvasRenderer.loadHtmlCanvas(a.data):a.isImage()?CanvasRenderer.loadImage(a.data):a.isImageCanvas()?CanvasRenderer.loadImageCanvas(a.data):void 0},CanvasRenderer.loadHtmlCanvas=function(e){return e},CanvasRenderer.loadImageCanvas=function(e){return e.render()},CanvasRenderer.loadImage=function(e){var a=document.createElement("canvas"),t=a.getContext("2d");return a.width=e.width,a.height=e.height,t.drawImage(e,0,0,a.width,a.height),a},CanvasRenderer.generateColor=function(e,a){var t=void 0!==a.width?a.width:e.width,r=void 0!==a.height?a.height:e.height,n=document.createElement("canvas"),i=n.getContext("2d");return n.width=t,n.height=r,i.fillStyle=a.data,i.fillRect(0,0,t,r),n},CanvasRenderer.generateGradient=function(e,a){var t,r,n,i,d,h=void 0!==a.width?a.width:e.width,o=void 0!==a.height?a.height:e.height,s=h/2,g=o/2,l=document.createElement("canvas"),m=l.getContext("2d"),c=a.data,v=c.type||"linear",u=c.rotation||0;return"radial"===v?t=m.createRadialGradient(s,g,0,s,g,Math.min(h,o)/2):(u<0&&(u+=360),0<=u&&u<45?(r=0,n=o/2*(45-u)/45,i=h,d=o-n):45<=u&&u<135?(r=h*(u-45)/90,n=0,i=h-r,d=o):135<=u&&u<225?(r=h,n=o*(u-135)/90,i=0,d=o-n):225<=u&&u<315?(r=h*(1-(u-225)/90),n=o,i=h-r,d=0):315<=u&&(r=0,n=o-o/2*(u-315)/45,i=h,d=o-n),t=m.createLinearGradient(r,n,i,d)),t.addColorStop(c.spread||0,c.startColor),t.addColorStop(1,c.endColor),l.width=h,l.height=o,m.fillStyle=t,m.fillRect(0,0,h,o),l},CanvasRenderer.processImage=function(e,a){if(0===a.length)return e;for(var t,r,n=e.getContext("2d"),i=e.width,d=e.height,h=n.getImageData(0,0,i,d),o=createImageData(n,i,d),s=0;s<a.length;s+=1)s>0&&(r=h,h=o,o=r),t=a[s],process[t.name](h.data,o.data,i,d,t.options);return n.putImageData(o,0,0),e},CanvasRenderer.processMask=function(e,a){if(0===a.layers.length)return e;a.width=e.width,a.height=e.height;var t=CanvasRenderer.renderBW(a),r=t.getContext("2d").getImageData(0,0,t.width,t.height).data,n={name:"mask",options:{data:r,x:0,y:0,width:t.width,height:t.height}};return CanvasRenderer.processImage(e,[n])},CanvasRenderer.processLayer=function(e,a){var t=CanvasRenderer.load(e,a),r=CanvasRenderer.processMask(t,a.mask);return CanvasRenderer.processImage(r,a.filters)},CanvasRenderer.mergeManualBlend=function(e,a){return function(t){for(var r,n,i,d,h,o,s=t.getContext("2d"),g=e.width,l=e.height,m=s.getImageData(0,0,g,l),c=createImageData(s,g,l),v=0;v<a.length;v+=1)if(r=a[v],o=calcLayerRect(e,r),o.width>0&&o.height>0){if(v>0&&(d=m,m=c,c=d),i=getTransformedLayerData(e,r,o),h={data:i.data,width:o.width,height:o.height,opacity:r.opacity,dx:o.x,dy:o.y},void 0===blend[r.blendmode])throw new Error("No blend mode named '"+r.blendmode+"'");n=blend.realBlendMode(r.blendmode),blend[n](m.data,c.data,g,l,h)}return s.putImageData(c,0,0),t}},CanvasRenderer.singleLayerWithOpacity=function(e,a){var t=document.createElement("canvas"),r=t.getContext("2d");return t.width=e.width,t.height=e.height,r.save(),transformLayer(r,e,a),1!==a.opacity&&(r.globalAlpha=a.opacity),r.drawImage(a.img,0,0),r.restore(),t},CanvasRenderer.mergeNativeBlend=function(e,a){return function(t){for(var r,n=t.getContext("2d"),i=0;i<a.length;i+=1)r=a[i],n.save(),transformLayer(n,e,r),1!==r.opacity&&(n.globalAlpha=r.opacity),"source-over"!==r.blendmode&&(n.globalCompositeOperation=blend.realBlendMode(r.blendmode)),n.drawImage(r.img,0,0),n.restore();return t}},CanvasRenderer.createRenderPipe=function(e,a,t){function r(){if(void 0!==i){var t=i?e.mergeNativeBlend:e.mergeManualBlend;o.push(t(a,d))}}for(var n,i,d,h,o=[],s=1;s<t.length;s+=1)h=t[s],n=h.blendmode,void 0!==i&&i===nativeBlendModes[n]||(r(),d=[]),d.push(h),i=nativeBlendModes[n],s===t.length-1&&r();return o},CanvasRenderer.merge=function(e,a){for(var t=CanvasRenderer.createRenderPipe(CanvasRenderer,e,a),r=CanvasRenderer.singleLayerWithOpacity(e,a[0]),n=0;n<t.length;n+=1)r=t[n](r);return r},CanvasRenderer.composite=function(e,a){return a&&0!==a.length?1===a.length?CanvasRenderer.singleLayerWithOpacity(e,a[0]):CanvasRenderer.merge(e,a):null},CanvasRenderer.getLayerData=function(e,a){for(var t,r,n,i=[],d=0;d<a.length;d+=1)r=e.layers[d],n=a[d],t={img:n,opacity:r.opacity,blendmode:r.blendmode,transform:r.transform,flip_h:r.flip_h,flip_v:r.flip_v},i.push(t);return i},CanvasRenderer.render=function(e){for(var a=[],t=0;t<e.layers.length;t+=1)a.push(CanvasRenderer.processLayer(e,e.layers[t]));return CanvasRenderer.composite(e,CanvasRenderer.getLayerData(e,a))},CanvasRenderer.renderBW=function(e){var a=CanvasRenderer.render(e),t=(a.getContext("2d").getImageData(0,0,a.width,a.height).data,{name:"desaturate",options:{method:"ITU-R BT.709"}});return CanvasRenderer.processImage(a,[t])},module.exports=CanvasRenderer;

},{"./blend":20,"./process":23,"./util":24}],22:[function(require,module,exports){
"use strict";function toColor(t,e,r,a,n){var i,o,s,h,l,d,y,g;if(void 0===t)i=o=s=0,h=1;else if(Array.isArray(t))g=e||{},i=void 0!==t[0]?t[0]:0,o=void 0!==t[1]?t[1]:0,s=void 0!==t[2]?t[2]:0,h=void 0!==t[3]?t[3]:g.base||1;else if(void 0!==t.r)g=e||{},i=t.r,o=t.g,s=t.b,h=void 0!==t.a?t.a:g.base||1;else if("string"==typeof t){if(0===t.indexOf("#"))return t;if(0===t.indexOf("rgb"))return t;if(colors.indexOf(t)!==-1)return t}else"number"==typeof t&&(1===arguments.length?(i=o=s=t,h=1):2===arguments.length?(i=o=s=t,"number"==typeof e?h=e:(g=e,h=g.base||1)):3===arguments.length?"number"==typeof r?(i=t,o=e,s=r,h=1):(i=o=s=t,h=e,g=r):4===arguments.length?(i=t,o=e,s=r,"number"==typeof a?h=a:(g=a||{},h=g.base||1)):(i=t,o=e,s=r,h=a,g=n));if("number"!=typeof i||"number"!=typeof o||"number"!=typeof s||"number"!=typeof h)throw new Error("Invalid color arguments");return g=g||{},void 0!==g.base&&(i/=g.base,o/=g.base,s/=g.base,h/=g.base),l=Math.round(255*i),d=Math.round(255*o),y=Math.round(255*s),"rgba("+l+", "+d+", "+y+", "+h+")"}function toGradientData(t,e,r,a,n){var i,o,s,h,l,d,y={};if(1===arguments.length)d=t||{},i=d.startColor,o=d.endColor,s=d.type,h=d.rotation,l=d.spread;else if(arguments.length>=2)if(i=t,o=e,s="linear",h=0,l=0,3===arguments.length)"string"==typeof r?s=r:"number"==typeof r&&(h=r);else if(4===arguments.length)if("number"==typeof r)h=r,l=a;else if("linear"===r)h=a;else{if("radial"!==r)throw new Error("Wrong argument provided: "+r);s=r,l=a}else 5===arguments.length&&(s=r,h=a,l=n);if(!i&&0!==i)throw new Error("No startColor was given.");if(!o&&0!==o)throw new Error("No endColor was given.");try{y.startColor=toColor(i)}catch(t){throw new Error("startColor is not a valid color: "+i)}try{y.endColor=toColor(o)}catch(t){throw new Error("endColor is not a valid color: "+o)}if(void 0===s&&(s="linear"),"linear"!==s&&"radial"!==s)throw new Error("Unknown gradient type: "+s);if(y.type=s,void 0===l&&(l=0),"number"!=typeof l)throw new Error("Spread value is not a number: "+l);if("linear"===s){if(void 0===h&&(h=0),"number"!=typeof h)throw new Error("Rotation value is not a number: "+h);y.rotation=h}return y.spread=clamp(l,0,.99),y}function findType(t){if("string"==typeof t)return TYPE_PATH;if(t instanceof Image)return TYPE_IMAGE;if(t instanceof HTMLCanvasElement)return TYPE_HTML_CANVAS;if(t instanceof ImageCanvas)return TYPE_IMAGE_CANVAS;if(void 0!==t.r&&void 0!==t.g&&void 0!==t.b&&void 0!==t.a)return TYPE_FILL;if(void 0!==t.startColor&&void 0!==t.endColor)return TYPE_GRADIENT;throw new Error("Cannot establish type for data ",t)}function isPoint(t){return!!t&&(void 0!==t.x&&void 0!==t.y)}function pointFromArray(t){var e=t[0],r=t.length>1?t[1]:e;return{x:e,y:r}}function pointFromNumber(t){return{x:t,y:t}}function isValidArg(t){return void 0!==t&&null!==t}function convertArg(t){return Array.isArray(t)?pointFromArray(t):"number"==typeof t?pointFromNumber(t):isPoint(t)?t:void 0}function loadImage(t,e){var r=new Image;r.onload=function(){e(null,[t,this])},r.src=t}function loadImages(t,e){async.map(t,loadImage,function(t,r){if(e){for(var a,n,i={},o=0;o<r.length;o+=1)a=r[o][0],n=r[o][1],i[a]=n;e(i)}})}function rectUnite(t,e){var r=Math.min(t.x,e.x),a=Math.min(t.y,e.y),n=Math.max(t.x+t.width,e.x+e.width)-r,i=Math.max(t.y+t.height,e.y+e.height)-a;return{x:r,y:a,width:n,height:i}}function merge(t){var e,r,a,n;for(e=0;e<t.length;e+=1)r=t[e],a=0===e?r.bounds():rectUnite(a,r.bounds());var i=a.width/2+a.x,o=a.height/2+a.y,s=new ImageCanvas(a.width,a.height);for(e=0;e<t.length;e+=1)n=s.addLayer(t[e].toLayer()),n.translate(-i,-o);return new Img(s.render(),i,o)}var util=require("./util"),CanvasRenderer=require("./canvasrenderer"),AsyncRenderer=require("./asyncrenderer"),img,ImageCanvas,Layer,Img,DEFAULT_WIDTH=800,DEFAULT_HEIGHT=800,TYPE_PATH="path",TYPE_IMAGE="image",TYPE_HTML_CANVAS="htmlCanvas",TYPE_IMAGE_CANVAS="iCanvas",TYPE_FILL="fill",TYPE_GRADIENT="gradient",IDENTITY_TRANSFORM=util.transform(),Transform=IDENTITY_TRANSFORM,clamp=util.clamp,colors=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"];Layer=function(t,e){e||(e=findType(t)),this.data=t,this.type=e,e!==TYPE_HTML_CANVAS&&e!==TYPE_IMAGE_CANVAS&&e!==TYPE_IMAGE||(this.width=t.width,this.height=t.height),this.opacity=1,this.blendmode="source-over",this.transform=IDENTITY_TRANSFORM,this.flip_h=!1,this.flip_v=!1,this.mask=new ImageCanvas,this.filters=[]},Layer.Transform=Layer.IDENTITY_TRANSFORM=IDENTITY_TRANSFORM,Layer.prototype.clone=function(){function t(t){var e,r,a={};if(a.name=t.name,void 0!==t.options){a.options={};for(var n=Object.keys(t.options),i=0;i<n.length;i+=1)e=n[i],r=t.options[e],Array.isArray(r)?a.options[e]=r.slice(0):a.options[e]=r}return a}var e=Object.create(Layer.prototype);e.data=this.data,e.type=this.type,e.width=this.width,e.height=this.height,e.opacity=this.opacity,e.blendmode=this.blendmode,e.transform=this.transform,e.flip_h=this.flip_h,e.flip_v=this.flip_v,e.mask=this.mask.clone(),e.filters=[],this.type===TYPE_IMAGE_CANVAS?e.data=this.data.clone():this.type===TYPE_GRADIENT&&(e.data={startColor:this.data.startColor,endColor:this.data.endColor,type:this.data.type,rotation:this.data.rotation,spread:this.data.spread});for(var r=0;r<this.filters.length;r+=1)e.filters.push(t(this.filters[r]));return e},Layer.prototype.setOpacity=function(t){this.opacity=clamp(t,0,1)},Layer.prototype.translate=function(t,e){e=void 0===e?0:e;var r=Transform.translate(t,e);this.transform=this.transform.prepend(r)},Layer.prototype.scale=function(t,e){e=void 0===e?t:e;var r=Transform.scale(t,e);this.transform=this.transform.prepend(r)},Layer.prototype.rotate=function(t){var e=Transform.rotate(t);this.transform=this.transform.prepend(e)},Layer.prototype.skew=function(t,e){e=void 0===e?t:e;var r=Transform.skew(t,e);this.transform=this.transform.prepend(r)},Layer.prototype.flipHorizontal=function(t){void 0!==t?this.flip_h=t:this.flip_h=!this.flip_h},Layer.prototype.flipVertical=function(t){void 0!==t?this.flip_v=t:this.flip_v=!this.flip_v},Layer.prototype.addFilter=function(t,e){this.filters.push({name:t,options:e})},Layer.prototype.draw=function(t){var e=void 0===this.width?DEFAULT_WIDTH:this.width,r=void 0===this.height?DEFAULT_HEIGHT:this.height,a=new ImageCanvas(e,r);a.addLayer(this),a.draw(t)},Layer.prototype.toCanvas=function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height;var e=t.getContext("2d");return this.draw(e),t},Layer.fromFile=function(t){return new Layer(t,TYPE_PATH)},Layer.fromImage=function(t){return new Layer(t,TYPE_IMAGE)},Layer.fromCanvas=function(t){return t instanceof HTMLCanvasElement?Layer.fromHtmlCanvas(t):Layer.fromImageCanvas(t)},Layer.fromHtmlCanvas=function(t){return new Layer(t,TYPE_HTML_CANVAS)},Layer.fromImageCanvas=function(t){return new Layer(t,TYPE_IMAGE_CANVAS)},Layer.fromColor=function(t){return new Layer(toColor(t),TYPE_FILL)},Layer.fromGradient=function(){return new Layer(toGradientData.apply(null,arguments),TYPE_GRADIENT)},Layer.prototype.isPath=function(){return this.type===TYPE_PATH},Layer.prototype.isFill=function(){return this.type===TYPE_FILL},Layer.prototype.isGradient=function(){return this.type===TYPE_GRADIENT},Layer.prototype.isHtmlCanvas=function(){return this.type===TYPE_HTML_CANVAS},Layer.prototype.isImage=function(){return this.type===TYPE_IMAGE},Layer.prototype.isImageCanvas=function(){return this.type===TYPE_IMAGE_CANVAS};var Pixels=function(t){this.width=t.width,this.height=t.height;var e=t.getContext("2d");this._data=e.getImageData(0,0,this.width,this.height),this.array=this._data.data};Pixels.prototype.get=function(t){t*=4;var e=this.array;return[e[t+0],e[t+1],e[t+2],e[t+3]]},Pixels.prototype.set=function(t,e){t*=4;var r=this.array;r[t+0]=e[0],r[t+1]=e[1],r[t+2]=e[2],r[t+3]=e[3]},Pixels.prototype.toCanvas=function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height;var e=t.getContext("2d");return e.putImageData(this._data,0,0),t},ImageCanvas=function(t,e){t||(t=DEFAULT_WIDTH),e||(e=DEFAULT_HEIGHT),this.width=t,this.height=e,this.layers=[]},ImageCanvas.prototype.clone=function(){for(var t=new ImageCanvas(this.width,this.height),e=0;e<this.layers.length;e+=1)t.layers.push(this.layers[e].clone());return t},ImageCanvas.prototype.addLayer=function(t){var e;try{return this.addGradientLayer.apply(this,arguments)}catch(t){}try{return this.addColorLayer.apply(this,arguments)}catch(t){}if(1===arguments.length&&("string"==typeof t?e=new Layer(t,TYPE_PATH):t instanceof Layer?e=t:t instanceof HTMLCanvasElement?e=new Layer(t,TYPE_HTML_CANVAS):t instanceof Image?e=new Layer(t,TYPE_IMAGE):t instanceof ImageCanvas&&(e=new Layer(t,TYPE_IMAGE_CANVAS))),!e)throw new Error("Error creating layer.");return this.layers.push(e),e},ImageCanvas.prototype.addColorLayer=function(){var t=toColor.apply(null,arguments),e=new Layer(t,TYPE_FILL);return this.layers.push(e),e},ImageCanvas.prototype.addGradientLayer=function(){var t=toGradientData.apply(null,arguments),e=new Layer(t,TYPE_GRADIENT);return this.layers.push(e),e},ImageCanvas.prototype.render=function(t){var e=t?AsyncRenderer:CanvasRenderer;return e.render(this,t)},ImageCanvas.prototype.draw=function(t,e){if(e)this.render(function(e){t.drawImage(e,0,0,e.width,e.height)});else{var r=this.render();t.drawImage(r,0,0,r.width,r.height)}},Img=function(t,e,r){this.canvas=t,this.originalWidth=t?t.width:0,this.originalHeight=t?t.height:0,this.transform=e||r?Transform.translate(e,r):Layer.IDENTITY_TRANSFORM},Img.prototype.clone=function(){var t=new Img;return t.canvas=this.canvas,t.originalWidth=this.originalWidth,t.originalHeight=this.originalHeight,t.transform=this.transform,t},Img.prototype.withCanvas=function(t){var e=this.clone();return e.canvas=t,e},Img.prototype._transform=function(t){var e=this.clone();return e.transform=e.transform.prepend(t),e},Img.prototype.translate=function(t){var e=pointFromNumber(0),r=arguments;return 1===r.length&&isValidArg(t)?e=convertArg(t):2===r.length&&(e={x:r[0],y:r[1]}),0===e.x&&0===e.y?this:this._transform(Transform.translate(e.x,e.y))},Img.prototype.rotate=function(t){if(!t)return this;var e=pointFromNumber(0),r=arguments;return 2===r.length?e=convertArg(r[1]):3===r.length&&(e={x:r[1],y:r[2]}),this._transform(Transform.translate(e.x,e.y).rotate(t).translate(-e.x,-e.y))},Img.prototype.scale=function(t){var e=pointFromNumber(1),r=pointFromNumber(0),a=arguments;return 1===a.length&&isValidArg(t)?e=convertArg(t):2===a.length?"number"==typeof t&&"number"==typeof a[1]?e={x:a[0],y:a[1]}:(e=convertArg(t),r=convertArg(a[1])):4===a.length&&(e={x:a[0],y:a[1]},r={x:a[2],y:a[3]}),1===e.x&&1===e.y?this:this._transform(Transform.translate(r.x,r.y).scale(e.x,e.y).translate(-r.x,-r.y))},Img.prototype.skew=function(t){var e=pointFromNumber(0),r=pointFromNumber(0),a=arguments;return 1===a.length&&isValidArg(t)?e=convertArg(t):2===a.length?"number"==typeof t&&"number"==typeof a[1]?e={x:a[0],y:a[1]}:(e=convertArg(t),r=convertArg(a[1])):4===a.length&&(e={x:a[0],y:a[1]},r={x:a[2],y:a[3]}),0===e.x&&0===e.y?this:this._transform(Transform.translate(r.x,r.y).skew(e.x,e.y).translate(-r.x,-r.y))},Img.prototype.transformed=function(){return img.merge([this])},Img.prototype.bounds=function(){for(var t,e,r,a,n,i=this.transform,o=this.originalWidth/2,s=this.originalHeight/2,h={x:-o,y:-s},l={x:o,y:-s},d={x:-o,y:s},y={x:o,y:s},g=[h,l,d,y],m=0;m<4;m+=1)t=i.transformPoint(g[m]),0===m?(e=a=t.x,r=n=t.y):(t.x<e&&(e=t.x),t.x>a&&(a=t.x),t.y<r&&(r=t.y),t.y>n&&(n=t.y));return{x:e,y:r,width:a-e,height:n-r}},Img.prototype.colorize=function(t){var e=Layer.fromColor(t);e.width=this.originalWidth,e.height=this.originalHeight;var r=new Img(e.toCanvas());return r=r._transform(this.transform.matrix()),img.merge([this,r])},Img.prototype.desaturate=function(t){var e=this.toLayer(!1);return e.addFilter("desaturate",t),this.withCanvas(e.toCanvas())},Img.prototype.crop=function(t){function e(t,e){var r=t.x+t.width,a=t.y+t.height,n=e.x+e.width,i=e.y+e.height,o=Math.max(t.x,e.x),s=Math.max(t.y,e.y),h=Math.max(Math.min(r,n)-o,0),l=Math.max(Math.min(a,i)-s,0);return{x:o,y:s,width:h,height:l}}var r=this.bounds(),a=t.bounds(),n=e(r,a),i=Math.ceil(n.width),o=Math.ceil(n.height);if(0===n.width||0===n.height)throw new Error("Resulting image has no dimensions");var s=new img.ImageCanvas(i,o),h=s.addLayer(this.toLayer());return h.translate(i/2-a.width-a.x,o/2-a.height-a.y),i<a.width&&n.x>r.x&&h.translate(a.width-i,0),o<a.height&&n.y>r.y&&h.translate(0,a.height-o),new Img(s.render(),n.x+i/2,n.y+o/2)},Img.prototype.draw=function(t){t.save();var e=this.transform.matrix();t.transform(e[0],e[1],e[3],e[4],e[6],e[7]),t.translate(-this.originalWidth/2,-this.originalHeight/2),t.drawImage(this.canvas,0,0),t.restore()},Img.prototype.toLayer=function(t){var e=document.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height;var r=e.getContext("2d");r.drawImage(this.canvas,0,0);var a=img.Layer.fromHtmlCanvas(e);return void 0===t&&(t=!0),t&&(a.transform=this.transform),a},Img.prototype.getPixels=function(){return new Pixels(this.canvas)},Img.prototype.toImage=function(){var t=this.bounds(),e=this.crop({bounds:function(){return t}}),r=new Image;return r.width=e.canvas.width,r.height=e.canvas.height,r.src=e.canvas.toDataURL(),r},img={},img.Layer=Layer,img.ImageCanvas=ImageCanvas,img.Img=Img,img.Pixels=Pixels;var async=require("async");img.loadImages=loadImages,img.merge=merge,module.exports=img;

},{"./asyncrenderer":19,"./canvasrenderer":21,"./util":24,"async":1}],23:[function(require,module,exports){
"use strict";function defaultOptions(o,n){if(!o)return n;var t,r={};for(t in n)n.hasOwnProperty(t)&&("undefined"==typeof o[t]?r[t]=n[t]:r[t]=o[t]);return r}function smoothstep(o,n,t){return t<o?0:t>=n?1:(t=(t-o)/(n-o),t*t*(3-2*t))}function noise(){return.5*Math.random()+.5}function colorDistance(o,n,t){return clamp(o*n+(1-o)*t,0,255)}function convolve3x3(o,n,t,r,a,e,i,u){var f,l,c,s,p,v,d,m,h,x,g,O,M,T,I,b,y,_,z,U,k,S,w=a[0][0],B=a[0][1],R=a[0][2],P=a[1][0],L=a[1][1],N=a[1][2],Y=a[2][0],q=a[2][1],A=a[2][2];for(l=0;l<r;l+=1)for(m=l*t*4,h=m-4*t,x=m+4*t,l<1&&(h=m),l>=t-1&&(x=m),f=0;f<t;f+=1)c=4*(l*t+f),g=4*f,O=g-4,M=g+4,f<1&&(O=g),f>=t-1&&(M=g),T=h+O,I=h+g,b=h+M,y=m+O,_=m+g,z=m+M,U=x+O,k=x+g,S=x+M,s=o[T]*w+o[I]*B+o[b]*R+o[y]*P+o[_]*L+o[z]*N+o[U]*Y+o[k]*q+o[S]*A,p=o[T+1]*w+o[I+1]*B+o[b+1]*R+o[y+1]*P+o[_+1]*L+o[z+1]*N+o[U+1]*Y+o[k+1]*q+o[S+1]*A,v=o[T+2]*w+o[I+2]*B+o[b+2]*R+o[y+2]*P+o[_+2]*L+o[z+2]*N+o[U+2]*Y+o[k+2]*q+o[S+2]*A,d=e?o[T+3]*w+o[I+3]*B+o[b+3]*R+o[y+3]*P+o[_+3]*L+o[z+3]*N+o[U+3]*Y+o[k+3]*q+o[S+3]*A:o[c+3],u&&(s=p=v=(s+p+v)/3),i&&(s=255-s,p=255-p,v=255-v),n[c]=s,n[c+1]=p,n[c+2]=v,n[c+3]=d}function convolve5x5(o,n,t,r,a,e,i,u){var f,l,c,s,p,v,d,m,h,x,g,O,M,T,I,b,y,_,z,U,k,S,w,B,R,P,L,N,Y,q,A,j,D,C,E,F,G,H,J,K,Q,V,W=a[0][0],X=a[0][1],Z=a[0][2],$=(a[0][3],a[0][4]),oo=a[1][0],no=a[1][1],to=a[1][2],ro=(a[1][3],a[1][4]),ao=a[2][0],eo=a[2][1],io=a[2][2],uo=(a[2][3],a[2][4]),fo=a[3][0],lo=a[3][1],co=a[3][2],so=(a[3][3],a[3][4]),po=a[4][0],vo=a[4][1],mo=a[4][2],ho=(a[4][3],a[4][4]);for(l=0;l<r;l+=1)for(m=l*t*4,h=m-4*t,g=m-4*t*2,x=m+4*t,O=m+4*t*2,l<1&&(h=m),l>=t-1&&(x=m),l<2&&(g=h),l>=t-2&&(O=x),f=0;f<t;f+=1)c=4*(l*t+f),M=4*f,T=M-4,I=M+4,b=M-8,y=M+8,f<1&&(T=M),f>=t-1&&(I=M),f<2&&(b=T),f>=t-2&&(y=I),_=g+b,z=g+T,U=g+M,k=g+I,S=g+y,w=h+b,B=h+T,R=h+M,P=h+I,L=h+y,N=m+b,Y=m+T,q=m+M,A=m+I,j=m+y,D=x+b,C=x+T,E=x+M,F=x+I,G=x+y,H=O+b,J=O+T,K=O+M,Q=O+I,V=O+y,s=o[_]*W+o[z]*X+o[U]*Z+o[k]*$+o[U]*$+o[w]*oo+o[B]*no+o[R]*to+o[P]*ro+o[R]*ro+o[N]*ao+o[Y]*eo+o[q]*io+o[A]*uo+o[q]*uo+o[D]*fo+o[C]*lo+o[E]*co+o[F]*so+o[E]*so+o[H]*po+o[J]*vo+o[K]*mo+o[Q]*ho+o[K]*ho,p=o[_+1]*W+o[z+1]*X+o[U+1]*Z+o[k+1]*$+o[U+1]*$+o[w+1]*oo+o[B+1]*no+o[R+1]*to+o[P+1]*ro+o[R+1]*ro+o[N+1]*ao+o[Y+1]*eo+o[q+1]*io+o[A+1]*uo+o[q+1]*uo+o[D+1]*fo+o[C+1]*lo+o[E+1]*co+o[F+1]*so+o[E+1]*so+o[H+1]*po+o[J+1]*vo+o[K+1]*mo+o[Q+1]*ho+o[K+1]*ho,v=o[_+2]*W+o[z+2]*X+o[U+2]*Z+o[k+2]*$+o[U+2]*$+o[w+2]*oo+o[B+2]*no+o[R+2]*to+o[P+2]*ro+o[R+2]*ro+o[N+2]*ao+o[Y+2]*eo+o[q+2]*io+o[A+2]*uo+o[q+2]*uo+o[D+2]*fo+o[C+2]*lo+o[E+2]*co+o[F+2]*so+o[E+2]*so+o[H+2]*po+o[J+2]*vo+o[K+2]*mo+o[Q+2]*ho+o[K+2]*ho,d=e?o[_+3]*W+o[z+3]*X+o[U+3]*Z+o[k+3]*$+o[U+3]*$+o[w+3]*oo+o[B+3]*no+o[R+3]*to+o[P+3]*ro+o[R+3]*ro+o[N+3]*ao+o[Y+3]*eo+o[q+3]*io+o[A+3]*uo+o[q+3]*uo+o[D+3]*fo+o[C+3]*lo+o[E+3]*co+o[F+3]*so+o[E+3]*so+o[H+3]*po+o[J+3]*vo+o[K+3]*mo+o[Q+3]*ho+o[K+3]*ho:o[c+3],u&&(s=p=v=(s+p+v)/3),i&&(s=255-s,p=255-p,v=255-v),n[c]=s,n[c+1]=p,n[c+2]=v,n[c+3]=d}function gaussian(o,n,t,r,a){var e,i,u,f,l,c,s,p,v,d,m,h,x,g,O,M=[],T=13,I=[[1]];for(a=clamp(a,3,T),x=-a/2+(a%2?.5:0),g=a+x,u=1;u<T;u+=1)I[0][u]=0;for(u=1;u<T;u+=1)for(I[u]=[1],f=1;f<T;f+=1)I[u][f]=I[u-1][f]+I[u-1][f-1];for(O=I[a-1],u=0,h=0;u<a;u+=1)h+=O[u];for(u=0;u<a;u+=1)O[u]/=h;for(i=0;i<r;i+=1)for(e=0;e<t;e+=1){for(l=c=s=p=0,u=x;u<g;u+=1)d=e+u,m=i,h=O[u-x],d<0&&(d=0),d>=t&&(d=t-1),v=4*(m*t+d),l+=o[v]*h,c+=o[v+1]*h,s+=o[v+2]*h,p+=o[v+3]*h;v=4*(i*t+e),M[v]=l,M[v+1]=c,M[v+2]=s,M[v+3]=p}for(i=0;i<r;i+=1)for(e=0;e<t;e+=1){for(l=c=s=p=0,u=x;u<g;u+=1)d=e,m=i+u,h=O[u-x],m<0&&(m=0),m>=r&&(m=r-1),v=4*(m*t+d),l+=M[v]*h,c+=M[v+1]*h,s+=M[v+2]*h,p+=M[v+3]*h;v=4*(i*t+e),n[v]=l,n[v+1]=c,n[v+2]=s,n[v+3]=p}}function getPixel(o,n){return n*=4,[o[n+0],o[n+1],o[n+2],o[n+3]]}function setPixel(o,n,t){n*=4,o[n+0]=t[0],o[n+1]=t[1],o[n+2]=t[2],o[n+3]=t[3]}function polar(o,n,t,r,a,e,i){t=a/2+(t||0),r=e/2+(r||0);var u,f,l,c,s,p,v;for(u=0;u<e;u+=1)for(f=0;f<a;f+=1)l=f-t,c=u-r,s=Math.sqrt(Math.pow(l,2)+Math.pow(c,2)),p=Math.atan2(c,l),v=i(s,p),s=v[0],p=v[1],setPixel(n,f+u*a,getPixel(o,Math.round(t+Math.cos(p)*s)+Math.round(r+Math.sin(p)*s)*a))}var stackblur=require("stackblur"),util=require("./util"),clamp=util.clamp,LUMINOSITY_ITU_R_BT601="ITU-R BT.601",LUMINOSITY_ITU_R_BT709="ITU-R BT.709",process={invert:function(o,n,t,r){var a,e=t*r*4;for(a=0;a<e;a+=4)n[a]=255-o[a],n[a+1]=255-o[a+1],n[a+2]=255-o[a+2],n[a+3]=o[a+3]},sepia:function(o,n,t,r){var a,e,i,u,f=t*r*4;for(a=0;a<f;a+=4)e=o[a],i=o[a+1],u=o[a+2],n[a]=.393*e+.769*i+.189*u,n[a+1]=.349*e+.686*i+.168*u,n[a+2]=.272*e+.534*i+.131*u,n[a+3]=o[a+3]},solarize:function(o,n,t,r){var a,e,i,u,f=t*r*4;for(a=0;a<f;a+=4)e=o[a],i=o[a+1],u=o[a+2],n[a]=e>127?255-e:e,n[a+1]=i>127?255-i:i,n[a+2]=u>127?255-u:u,n[a+3]=o[a+3]},brightness:function(o,n,t,r,a){a=defaultOptions(a,{brightness:1,contrast:0});var e,i,u,f,l,c=t*r*4,s=clamp(a.contrast,-1,1)/2,p=1+clamp(a.brightness,-1,1),v=p<0?-p:p,d=p<0?0:p;for(s=.5*Math.tan((s+1)*Math.PI/4),l=255*-(s-.5),e=0;e<c;e+=4)i=o[e],u=o[e+1],f=o[e+2],i=(i+i*v+d)*s+l,u=(u+u*v+d)*s+l,f=(f+f*v+d)*s+l,n[e]=i,n[e+1]=u,n[e+2]=f,n[e+3]=o[e+3]},desaturate:function(o,n,t,r,a){a=defaultOptions(a,{method:LUMINOSITY_ITU_R_BT601});var e,i,u,f,l,c=t*r*4;for(a.method===LUMINOSITY_ITU_R_BT601?(u=.3,f=.59,l=.11):a.method===LUMINOSITY_ITU_R_BT709&&(u=.2125,f=.7154,l=.0721),e=0;e<c;e+=4)i=o[e]*u+o[e+1]*f+o[e+2]*l,n[e]=i,n[e+1]=i,n[e+2]=i,n[e+3]=o[e+3]},lighten:function(o,n,t,r,a){a=defaultOptions(a,{amount:.25});var e,i=t*r*4,u=1+clamp(a.amount,0,1);for(e=0;e<i;e+=4)n[e]=o[e]*u,n[e+1]=o[e+1]*u,n[e+2]=o[e+2]*u,n[e+3]=o[e+3]},noise:function(o,n,t,r,a){a=defaultOptions(a,{amount:.5,strength:.5,mono:!1});var e,i,u,f,l,c=t*r*4,s=clamp(a.amount,0,1),p=clamp(a.strength,0,1),v=!!a.mono,d=Math.random;for(e=0;e<c;e+=4)u=o[e],f=o[e+1],l=o[e+2],i=d(),i<s&&(v?(i=p*(i/s*2-1)*255,u+=i,f+=i,l+=i):(u+=p*d()*255,f+=p*d()*255,l+=p*d()*255)),n[e]=u,n[e+1]=f,n[e+2]=l,n[e+3]=o[e+3]},flipv:function(o,n,t,r){var a,e,i,u;for(e=0;e<r;e+=1)for(a=0;a<t;a+=1)i=4*(e*t+a),u=4*(e*t+(t-a-1)),n[u]=o[i],n[u+1]=o[i+1],n[u+2]=o[i+2],n[u+3]=o[i+3]},fliph:function(o,n,t,r){var a,e,i,u;for(e=0;e<r;e+=1)for(a=0;a<t;a+=1)i=4*(e*t+a),u=4*((r-e-1)*t+a),n[u]=o[i],n[u+1]=o[i+1],n[u+2]=o[i+2],n[u+3]=o[i+3]},blur:function(o,n,t,r,a){a=defaultOptions(a,{radius:10});for(var e=0;e<o.length;e+=1)n[e]=o[e];stackblur(n,t,r,a.radius)},glow:function(o,n,t,r,a){a=defaultOptions(a,{amount:.75,kernelSize:5});var e,i,u,f,l=t*r*4,c=a.amount,s=[];for(gaussian(o,s,t,r,a.kernelSize),e=0;e<l;e+=4)i=o[e]+s[e]*c,u=o[e+1]+s[e+1]*c,f=o[e+2]+s[e+2]*c,i>255&&(i=255),u>255&&(u=255),f>255&&(f=255),n[e]=i,n[e+1]=u,n[e+2]=f,n[e+3]=o[e+3]},convolve3x3:function(o,n,t,r,a){convolve3x3(o,n,t,r,a.kernel)},convolve5x5:function(o,n,t,r,a){convolve5x5(o,n,t,r,a.kernel)},sharpen3x3:function(o,n,t,r,a){a=defaultOptions(a,{strength:1});var e=-clamp(a.strength,0,1);convolve3x3(o,n,t,r,[[e,e,e],[e,1-8*e,e],[e,e,e]])},sharpen5x5:function(o,n,t,r,a){a=defaultOptions(a,{strength:1});var e=-clamp(a.strength,0,1);convolve5x5(o,n,t,r,[[e,e,e,e,e],[e,e,e,e,e],[e,e,1-24*e,e,e],[e,e,e,e,e],[e,e,e,e,e]])},soften3x3:function(o,n,t,r){var a=1/9;convolve3x3(o,n,t,r,[[a,a,a],[a,a,a],[a,a,a]])},soften5x5:function(o,n,t,r){var a=.04;convolve5x5(o,n,t,r,[[a,a,a,a,a],[a,a,a,a,a],[a,a,a,a,a],[a,a,a,a,a],[a,a,a,a,a]])},crossedges:function(o,n,t,r,a){a=defaultOptions(a,{strength:1});var e=5*clamp(a.strength,0,1);convolve3x3(o,n,t,r,[[0,-e,0],[-e,0,e],[0,e,0]],!1,!0)},emboss:function(o,n,t,r,a){a=defaultOptions(a,{amount:1,angle:0});var e,i=t*r*4,u=a.amount,f=a.angle,l=Math.cos(-f)*u,c=Math.sin(-f)*u,s=-l-c,p=-l,v=c-l,d=-c,m=c,h=-c+l,x=l,g=c+l,O=[];for(convolve3x3(o,O,t,r,[[s,d,h],[p,0,x],[v,m,g]]),e=0;e<i;e+=4)n[e]=128+O[e],n[e+1]=128+O[e+1],n[e+2]=128+O[e+2],n[e+3]=o[e+3]},findedges:function(o,n,t,r){var a,e,i,u,f,l,c,s=t*r*4,p=[],v=[];for(convolve3x3(o,p,t,r,[[-1,0,1],[-2,0,2],[-1,0,1]]),convolve3x3(o,v,t,r,[[-1,-2,-1],[0,0,0],[1,2,1]]),a=0;a<s;a+=4)e=p[a],i=v[a],u=p[a+1],f=v[a+1],l=p[a+2],c=v[a+2],e<0&&(e=-e),i<0&&(i=-i),u<0&&(u=-u),f<0&&(f=-f),l<0&&(l=-l),c<0&&(c=-c),n[a]=255-.8*(e+i),n[a+1]=255-.8*(u+f),n[a+2]=255-.8*(l+c),n[a+3]=o[a+3]},edgeenhance3x3:function(o,n,t,r){var a=-1/9;convolve3x3(o,n,t,r,[[a,a,a],[a,17/9,a],[a,a,a]])},edgeenhance5x5:function(o,n,t,r){var a=-.04;convolve5x5(o,n,t,r,[[a,a,a,a,a],[a,a,a,a,a],[a,a,1.96,a,a],[a,a,a,a,a],[a,a,a,a,a]])},laplace3x3:function(o,n,t,r){convolve3x3(o,n,t,r,[[-1,-1,-1],[-1,8,-1],[-1,-1,-1]],!1,!0,!0)},laplace5x5:function(o,n,t,r){convolve5x5(o,n,t,r,[[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,24,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1]],!1,!0,!0)},rgbAdjust:function(o,n,t,r,a){a=defaultOptions(a,{r:0,g:0,b:0,a:0});var e,i,u,f,l,c=t*r*4,s=255*clamp(a.r,-1,1),p=255*clamp(a.g,-1,1),v=255*clamp(a.b,-1,1),d=255*clamp(a.a,-1,1);for(e=0;e<c;e+=4)i=o[e]+s,u=o[e+1]+p,f=o[e+2]+v,l=o[e+3]+d,i<0&&(i=0),u<0&&(u=0),f<0&&(f=0),l<0&&(l=0),i>255&&(i=255),u>255&&(u=255),f>255&&(f=255),l>255&&(l=255),n[e]=i,n[e+1]=u,n[e+2]=f,n[e+3]=l},colorfilter:function(o,n,t,r,a){a=defaultOptions(a,{luminosity:!1,r:1,g:.5,b:0});var e,i,u,f,l,c,s,p,v,d,m,h=t*r*4,x=!!a.luminosity,g=clamp(a.r,0,1),O=clamp(a.g,0,1),M=clamp(a.b,0,1);for(e=0;e<h;e+=4)i=o[e]/255,u=o[e+1]/255,f=o[e+2]/255,p=.3*i+.59*u+.11*f,i=(i+i*g)/2,u=(u+u*O)/2,f=(f+f*M)/2,x&&(l=c=i,u>c&&(c=u),f>c&&(c=f),u<l&&(l=u),f<l&&(l=f),d=c-l,s=i===c?(u-f)/d%6:u===c?(f-i)/d+2:(i-u)/d+4,v=s>>0,m=d*(s-v),i=u=f=p-(.3*i+.59*u+.11*f),0===v?(i+=d,u+=m):1===v?(i+=d-m,u+=d):2===v?(u+=d,f+=m):3===v?(u+=d-m,f+=d):4===v?(i+=m,f+=d):5===v&&(i+=d,f+=d-m)),n[e]=255*i,n[e+1]=255*u,n[e+2]=255*f,n[e+3]=o[e+3]},hslAdjust:function(o,n,t,r,a){a=defaultOptions(a,{h:.5,s:.3,l:.1,a:0});var e,i,u,f,l,c,s,p,v,d,m,h,x,g,O,M=t*r*4,T=clamp(a.h,-1,1),I=clamp(a.s,-1,1),b=clamp(a.l,-1,1),y=255*clamp(a.a,-1,1),_=1+I*(I<0?1:2),z=b<0?1+b:1-b,U=b<0?0:255*b;for(T=6*T%6,e=0;e<M;e+=4)i=o[e],u=o[e+1],f=o[e+2],l=o[e+3]+y,0===T&&0===I||(c=i,u>c&&(c=u),f>c&&(c=f),s=i,u<s&&(s=u),f<s&&(s=f),p=c-s,m=(s+c)/510,m>0&&p>0&&(m<=.5?(d=p/(c+s)*_,d>1&&(d=1),h=m*(1+d)):(d=p/(510-c-s)*_,d>1&&(d=1),h=m+d-m*d),v=i===c?u===s?5+(c-f)/p+T:1-(c-u)/p+T:u===c?f===s?1+(c-i)/p+T:3-(c-f)/p+T:i===s?3+(c-u)/p+T:5-(c-i)/p+T,v<0&&(v+=6),v>=6&&(v-=6),x=m+m-h,O=v>>0,g=(h-x)*(v-O),0===O?(i=h,u=x+g,f=x):1===O?(i=h-g,u=h,f=x):2===O?(i=x,u=h,f=x+g):3===O?(i=x,u=h-g,f=h):4===O?(i=x+g,u=x,f=h):5===O&&(i=h,u=x,f=h-g),i*=255,u*=255,f*=255)),i=i*z+U,u=u*z+U,f=f*z+U,i<0&&(i=0),u<0&&(u=0),f<0&&(f=0),l<0&&(l=0),i>255&&(i=255),u>255&&(u=255),f>255&&(f=255),l>255&&(l=255),n[e]=i,n[e+1]=u,n[e+2]=f,n[e+3]=l},posterize:function(o,n,t,r,a){a=defaultOptions(a,{levels:5});var e,i=t*r*4,u=clamp(a.levels,2,256),f=256/u,l=256/(u-1);for(e=0;e<i;e+=4)n[e]=l*(o[e]/f>>0),n[e+1]=l*(o[e+1]/f>>0),n[e+2]=l*(o[e+2]/f>>0),n[e+3]=o[e+3]},removenoise:function(o,n,t,r){var a,e,i,u,f,l,c,s,p,v,d,m,h,x,g,O,M,T,I;for(e=0;e<r;e+=1)for(s=e*t*4,p=s-4*t,v=s+4*t,e<1&&(p=s),e>=t-1&&(v=s),a=0;a<t;a+=1)c=4*(e*t+a),d=4*a,m=d-4,h=d+4,a<1&&(m=d),a>=t-1&&(h=d),x=M=o[s+m],l=o[s+h],l<x&&(x=l),l>M&&(M=l),l=o[p+d],l<x&&(x=l),l>M&&(M=l),l=o[v+d],l<x&&(x=l),l>M&&(M=l),g=o[s+m+1],l=o[s+h+1],l<g&&(g=l),l=o[p+d+1],l<g&&(g=l),l=o[v+d+1],l<g&&(g=l),O=o[s+m+2],l=o[s+h+2],l<O&&(O=l),l=o[p+d+2],l<O&&(O=l),l=o[v+d+2],l<O&&(O=l),i=o[c],u=o[c+1],f=o[c+2],i<x&&(i=x),i>M&&(i=M),u<g&&(u=g),u>T&&(u=T),f<O&&(f=O),f>I&&(f=I),n[c]=i,n[c+1]=u,n[c+2]=f,n[c+3]=o[c+3]},mosaic:function(o,n,t,r,a){a=defaultOptions(a,{blockSize:8});var e,i,u,f,l,c,s,p,v,d,m,h,x,g,O=clamp(a.blockSize,1,Math.max(t,r)),M=Math.ceil(r/O),T=Math.ceil(t/O);for(e=0,v=0,s=0;s<M;s+=1){for(i=clamp(e+O,0,r),u=0,p=0;p<T;p+=1){for(f=clamp(u+O,0,t),l=e*t+u<<2,d=o[l],m=o[l+1],h=o[l+2],x=e;x<i;x+=1)for(g=u;g<f;g+=1)c=x*t+g<<2,n[c]=d,n[c+1]=m,n[c+2]=h,n[c+3]=o[c+3];u=f,v+=1}e=i}},equalize:function(o,n,t,r,a){var e,i,u,f,l=t*r,c=Math.round,s=new Array(256);for(i=0;i<256;i+=1)s[i]=0;for(i=0;i<l;i+=1)e=4*i,u=clamp(c(.3*o[e]+.59*o[e+1]+.11*o[e+2]),0,255),n[e+3]=u,s[u]+=1;var p=new Array(256);for(p[0]=s[0],i=1;i<256;i+=1)p[i]=p[i-1]+s[i];for(i=0;i<256;i+=1)p[i]=p[i]/l*255;for(i=0;i<l;i+=1)e=4*i,u=n[e+3],f=p[u]/(u||1),n[e]=clamp(c(o[e]*f),0,255),n[e+1]=clamp(c(o[e+1]*f),0,255),n[e+2]=clamp(c(o[e+2]*f),0,255),n[e+3]=o[e+3]},mask:function(o,n,t,r,a){var e,i=t*r*4,u=a.data;for(e=0;e<i;e+=4)n[e]=o[e],n[e+1]=o[e+1],n[e+2]=o[e+2],n[e+3]=o[e+3]*u[e]/255*u[e+3]/255},bump:function(o,n,t,r,a){a=defaultOptions(a,{dx:0,dy:0,radius:0,zoom:0});var e=a.radius,i=clamp(a.zoom,0,1);return polar(o,n,a.dx,a.dy,t,r,function(o,n){return[o*smoothstep(0,i,o/e),n]})},dent:function(o,n,t,r,a){a=defaultOptions(a,{dx:0,dy:0,radius:0,zoom:0});var e=a.radius,i=clamp(a.zoom,0,1);return polar(o,n,a.dx,a.dy,t,r,function(o,n){return[2*o-o*smoothstep(0,i,o/e),n]})},pinch:function(o,n,t,r,a){a=defaultOptions(a,{dx:0,dy:0,zoom:0});var e=util.distance(0,0,t,r),i=clamp(.75*a.zoom,-.75,.75);return polar(o,n,a.dx,a.dy,t,r,function(o,n){return[o*Math.pow(e/o,i)*(1-i),n]})},splash:function(o,n,t,r,a){a=defaultOptions(a,{dx:0,dy:0,radius:0});var e=a.radius;return polar(o,n,a.dx,a.dy,t,r,function(o,n){return[o>e?e:o,n]})},twirl:function(o,n,t,r,a){a=defaultOptions(a,{dx:0,dy:0,radius:0,angle:0});var e=util.radians(a.angle),i=a.radius;return polar(o,n,a.dx,a.dy,t,r,function(o,n){return[o,n+(1-smoothstep(-i,i,o))*e]})}};module.exports=process;

},{"./util":24,"stackblur":9}],24:[function(require,module,exports){
"use strict";function degrees(n){return 180*n/Math.PI}function radians(n){return n/180*Math.PI}function distance(n,t,r,a){return Math.sqrt(Math.pow(r-n,2)+Math.pow(a-t,2))}function clamp(n,t,r){return Math.min(r,Math.max(t,n))}function transform(n){function t(n,t){t=t.slice();var r=t[0],a=t[1],e=(t[2],t[3]),i=t[4],o=(t[5],t[6]),u=t[7];t[8];return t[0]=n[0]*r+n[1]*e,t[1]=n[0]*a+n[1]*i,t[3]=n[3]*r+n[4]*e,t[4]=n[3]*a+n[4]*i,t[6]=n[6]*r+n[7]*e+o,t[7]=n[6]*a+n[7]*i+u,transform(t)}return n=void 0===n?[1,0,0,0,1,0,0,0,1]:n.slice(),{matrix:function(){return n.slice()},clone:function(){return transform(n)},prepend:function(r){return r.matrix&&(r=r.matrix()),t(n,r)},append:function(r){return r.matrix&&(r=r.matrix()),t(r,n)},translate:function(r,a){return t([1,0,0,0,1,0,r,a,1],n)},scale:function(r,a){return void 0===a&&(a=r),t([r,0,0,0,a,0,0,0,1],n)},skew:function(r,a){void 0===a&&(a=r);var e=Math.PI*r/180,i=Math.PI*a/180;return t([1,Math.tan(i),0,-Math.tan(e),1,0,0,0,1],n)},rotate:function(r){var a=Math.cos(radians(r)),e=Math.sin(radians(r));return t([a,e,0,-e,a,0,0,0,1],n)},transformPoint:function(t){var r=t.x,a=t.y;return{x:r*n[0]+a*n[3]+n[6],y:r*n[1]+a*n[4]+n[7]}}}}module.exports={degrees:degrees,radians:radians,distance:distance,clamp:clamp,transform:transform};

},{}],25:[function(require,module,exports){
"use strict";var deepEqual=require("./deepequal"),util=require("./util"),g={};g.combine=function(){var r,n,e=[];for(r=0;r<arguments.length;r++)n=arguments[r],n&&(e=e.concat(n));return e},g.contains=function(r,n){for(var e=0;e<r.length;e+=1)if(deepEqual.deepEqual(r[e],n))return!0;return!1},g.cycle=function(r,n){if(!r||n<=0)return[];for(var e=[],t=r.length,u=0;u<n;u+=1)e.push(r[u%t]);return e},g.equals=function(r,n){return deepEqual.deepEqual(r,n)},g.count=function(r){return r&&r.length?r.length:0},g.cull=function(r,n){if(!r)return[];if(!n)return r;var e,t,u=[];for(e=0;e<r.length;e++)t=n[e%n.length],t&&u.push(r[e]);return u},g.distinct=function(r){if(!r)return[];var n,e,t,u=[],i=[];for(n=0,e=r.length;n<e;n+=1)t=r[n],g.contains(i,t)||(i.push(t),u.push(r[n]));return u},g.first=function(r){return r&&0!==r.length?r[0]:null},g.get=function(r,n){return r&&0!==r.length?r[n]:null},g.interleave=function(){if(0===arguments.length)return[];for(var r=[],n=0;;){for(var e=0;e<arguments.length;e++){var t=arguments[e];if(!(t.length>n))return r;r.push(t[n])}n+=1}},g.last=function(r){return r&&0!==r.length?r[r.length-1]:null},g.pick=function(r,n,e){if(!r||0===r.length||n<=0)return[];e||0===e||(e=Math.random());for(var t=util.randomGenerator(e||0),u=[],i=0;i<n;i+=1)u.push(r[Math.floor(t(0,r.length))]);return u},g.randomSample=function(r,n,e){if(!r||0===r.length||n<=0)return[];e||0===e||(e=Math.random());var t=g.shuffle(r,e);return n?g.slice(t,0,n):t},g.repeat=function(r,n,e){if(!r)return[];if(Array.isArray(r)||(r=[r]),n<=0)return[];var t,u,i,l=[];if(e)for(t=0;t<r.length;t+=1)for(i=r[t],u=0;u<n;u+=1)l.push(i);else for(t=0;t<n;t+=1)l.push.apply(l,r);return l},g.rest=function(r){return r?r.slice(1):[]},g.reverse=function(r){return r.slice().reverse()},g.second=function(r){return!r||r.length<2?null:r[1]},g.shift=function(r,n){if(!r)return[];n%=r.length;var e=r.slice(0,n),t=r.slice(n);return t.push.apply(t,e),t},g.shuffle=function(r,n){var e,t,u,i;for(n||0===n||(n=Math.random()),i=util.randomGenerator(n||0),r=r.slice(),e=r.length-1;e>0;e--)t=Math.floor(i(0,e+1)),u=r[e],r[e]=r[t],r[t]=u;return r},g.slice=function(r,n,e,t){if(!r)return[];var u,i;return t?(u=r.slice(0,n),i=r.slice(n+e),u.push.apply(u,i),u):r.slice(n,n+e)},g.sort=function(r,n){if(n){if("string"==typeof n)return r.slice().sort(function(r,e){return r[n]>e[n]?1:r[n]===e[n]?0:-1});if("function"==typeof n)return r.slice().sort(n)}return r&&void 0!==r[0]&&null!==r[0]&&"number"==typeof r[0]?r.slice().sort(function(r,n){return r-n}):r.slice().sort()},g.switch=function(r){var n=arguments.length-1;return r%=n,r<0&&(r+=n),arguments[r+1]},g.takeEvery=function(r,n,e){var t,u=[];for(e=e||0,t=0;t<r.length;t+=1)t%n===e&&u.push(r[t]);return u},g.zipMap=function(r,n){var e,t,u,i={},l=Math.min(r.length,n.length);for(e=0;e<l;e+=1)t=r[e],u=n[e],i[t]=u;return i},module.exports=g;

},{"./deepequal":15,"./util":28}],26:[function(require,module,exports){
"use strict";var reduce=require("lodash.reduce"),util=require("./util"),vg=require("./vg/vg"),g={},TWO_PI=2*Math.PI;g.abs=Math.abs,g.accumulate=function(r){if(arguments.length>1?r=arguments:1!==arguments.length||Array.isArray(r)||(r=[r]),!r||0===r.length)return[0];var n,t=[],e=0;for(n=0;n<r.length;n++)t.push(e),e+=r[n];return t},g.add=function(r,n){return 2===arguments.length?r+n:reduce(arguments,function(r,n){return r+n},0)},g.and=function(r,n){var t=arguments.length;if(2===t)return r&&n;if(1===t)return!!r;if(0===t)throw new Error("Wrong number of arguments");return reduce(arguments,function(r,n){return r&&n},!0)},g.average=function(r){if(arguments.length>1?r=arguments:1!==arguments.length||Array.isArray(r)||(r=[r]),!r||0===r.length)return 0;var n,t=0;for(n=0;n<r.length;n+=1)t+=r[n];return t/r.length},g.boolean=function(r){return!!r},g.ceil=Math.ceil,g.clamp=function(r,n,t){return n="number"==typeof n?n:0,t="number"==typeof t?t:1,r<n?n:r>t?t:r},g.compare=function(r,n,t){if("<"===t)return r<n;if(">"===t)return r>n;if("<="===t)return r<=n;if(">="===t)return r>=n;if("=="===t)return r===n;if("!="===t)return r!==n;throw new Error("Unknown comparison operation "+t)},g.cos=Math.cos,g.degrees=function(r){return 180*r/Math.PI},g.divide=function(r,n){function t(r){if(0===r)throw new Error("Divide by zero")}var e=arguments.length;if(2===e)return t(n),r/n;if(1===e)return t(r),1/r;if(0===e)throw new Error("Wrong number of arguments");return reduce([].slice.call(arguments,1),function(r,n){return t(n),r/n},arguments[0])},g.e=function(){return Math.E},g.even=function(r){return r%2===0},g.floor=Math.floor,g.integer=function(r){return 0|r},g.log=function(r){return r>0?Math.log(r):-Math.log(-r)},g.makeNumbers=function(r,n){if(!r)return[];n||(n="");var t,e,u=[],o=r.split(n);for(t=0;t<o.length;t+=1)e=parseFloat(o[t]),(0===e||e)&&u.push(e);return u},g.max=function(){var r=arguments;if(1===arguments.length&&Array.isArray(arguments[0])&&(r=arguments[0]),0===r.length)throw new Error("Wrong number of arguments");return Math.max.apply(null,r)},g.min=function(){var r=arguments;if(1===arguments.length&&Array.isArray(arguments[0])&&(r=arguments[0]),0===r.length)throw new Error("Wrong number of arguments");return Math.min.apply(null,r)},g.mod=function(r,n){return r%n},g.multiply=function(r,n){var t=arguments.length;return 2===t?r*n:1===t?r:reduce(arguments,function(r,n){return r*n},1)},g.negate=function(r){return-r},g.not=function(r){return!r},g.number=function(r){return r},g.odd=function(r){return r%2!==0},g.or=function(r,n){var t=arguments.length;if(2===t)return r||n;if(1===t)return!!r;if(0===t)throw new Error("Wrong number of arguments");return reduce(arguments,function(r,n){return r||n},!1)},g.perlinNoise=function(r,n,t){return vg.math.noise(r,n,t)},g.pi=function(){return Math.PI},g.pow=Math.pow,g.radians=function(r){return r*Math.PI/180},g.randomNumbers=function(r,n,t,e){var u=arguments.length;if((u<4||!e&&0!==e)&&(e=Math.random()),3===u||4===u?(n=n||0,t=t||(0===t?0:1)):2===u?(t=n||(0===n?0:1),n=0):1===u&&(n=0,t=1),t<n){var o=t;t=n,n=o}for(var i,a=t-n,g=[],f=util.randomGenerator(e||0),h=0;h<r;h+=1)i=n+f(0,1)*a,g.push(i);return g},g.range=function(r,n,t,e){if(r===n)return[];if(0!==t&&(t=t||(r<n?1:-1)),t>0&&r>n)return[];if(t<0&&r<n)return[];if(0===t)return[];var u,o=[];if(r<n)if(e)for(u=r;u<=n;u+=t)o.push(u);else for(u=r;u<n;u+=t)o.push(u);else if(e)for(u=r;u>=n;u+=t)o.push(u);else for(u=r;u>n;u+=t)o.push(u);return o},g.round=function(r,n){return n|=0,n?Math.round(r/n)*n:Math.round(r)},g.sample=function(r,n,t,e){var u,o,i=[];for(i.length=r,u=e?(t-n)/r:(t-n)/(r-1),o=0;o<r;o+=1)i[o]=n+o*u;return i},g.sineWave=function(r,n,t,e,u){void 0===n&&(n=-1),void 0===t&&(t=1),void 0===e&&(e=1),void 0===u&&(u=0);var o=(t-n)/2;return n+o+Math.sin((u+r)*TWO_PI/e)*o},g.squareWave=function(r,n,t,e,u){void 0===n&&(n=-1),void 0===t&&(t=1),void 0===e&&(e=1),void 0===u&&(u=0);var o=e/2,i=(r+u)%e;return i<o?t:n},g.triangleWave=function(r,n,t,e,u){void 0===n&&(n=-1),void 0===t&&(t=1),void 0===e&&(e=1),void 0===u&&(u=0);var o=(t-n)/2,i=TWO_PI/e,a=0,g=r+u+e/4;return g%e!==0&&(a=g*i%TWO_PI),a<0&&(a+=TWO_PI),2*o*(1+-Math.abs(a/TWO_PI*2-1))+n},g.sawtoothWave=function(r,n,t,e,u){void 0===n&&(n=-1),void 0===t&&(t=1),void 0===e&&(e=1),void 0===u&&(u=0);var o=(t-n)/2,i=TWO_PI/e,a=0,g=r+u;return g%e!==0&&(a=g*i%TWO_PI),a<0&&(a+=TWO_PI),2*(a/TWO_PI)*o+n},g.sign=function(r){return r>0?1:0===r?0:-1},g.sin=Math.sin,g.sqrt=Math.sqrt,g.subtract=function(r,n){var t=arguments.length;if(2===t)return r-n;if(1===t)return-r;if(0===t)throw new Error("Wrong number of arguments");return reduce([].slice.call(arguments,1),function(r,n){return r-n},arguments[0])},g.tan=Math.tan,g.total=function(r){if(arguments.length>1?r=arguments:1!==arguments.length||Array.isArray(r)?0===arguments.length&&(r=[]):r=[r],0===r.length)return 0;var n,t=0;for(n=0;n<r.length;n+=1)t+=r[n];return t},g.xor=function(r,n){var t=arguments.length;if(2===t)return!!(r^n);throw new Error("Wrong number of arguments")},module.exports=g;
},{"./util":28,"./vg/vg":49,"lodash.reduce":6}],27:[function(require,module,exports){
"use strict";var g={};g.characterAt=function(t,n){return t&&0!==t.length?(t=String(t),n<0&&(n=t.length+n),t.charAt(n)):""},g.concatenate=function(){for(var t="",n=0;n<arguments.length;n++){var r=arguments[n];r=void 0!==r?String(r):"",t+=r}return t},g.endsWith=function(t,n){return!(!t||!n)&&(t=String(t),t.indexOf(n,t.length-n.length)!==-1)},g.reverse=function(t){return t.slice().reverse()},g.startsWith=function(t,n){return!(!t||!n)&&(t=String(t),0===t.indexOf(n))},g.string=String,g.stringContains=function(t,n){return!(!t||!n)&&(t=String(t),t.indexOf(n)!==-1)},g.stringEquals=function(t,n,r){return t=String(t),n=String(n),!(!t||!n)&&(r?t.toLowerCase()===n.toLowerCase():t===n)},g.stringLength=function(t){return t?(t=String(t),t.length):0},g.stringReplace=function(t,n,r){return t=String(t),t.replace(new RegExp(n,"g"),r)},g.stringSplit=function(t,n){return t?(n&&0!==n.length||(n=""),t=String(t),t.split(n)):[]},g.stringTrim=function(t){return t?(t=String(t),t.trim()):null},g.substring=function(t,n,r,e){return t?r<n?"":(t=String(t),n<0&&r<0&&(n=t.length+n,r=t.length+r),void 0!==r&&e&&(r+=1),t.substring(n,r)):""},g.toCharacterCodes=function(t){if(!t)return[];var n=[];n.length=t.length;for(var r=0;r<t.length;r+=1)n[r]=t.charCodeAt(r);return n},g.toCharacters=function(t){return t?(t=String(t),t.split("")):[]},g.toLowerCase=function(t){return t=String(t),t.toLowerCase()},g.toTitleCase=function(t){var n,r="";t=String(t);for(var e=0;e<t.length;e+=1)n=t[e],r+=0===r.length||" "===r[r.length-1]?n.toUpperCase():n;return r},g.toUpperCase=function(t){return t=String(t),t.toUpperCase()},g.wordCount=function(t){if(!t)return 0;t=String(t);var n=t.split(new RegExp("\\w+"));return n.length-1},g.toWords=function(t){var n=t.split(/\W+/);return""===n[n.length-1]&&n.pop(),n},module.exports=g;

},{}],28:[function(require,module,exports){
"use strict";var randomGenerator=function(r){if(r<0){for(var n=randomGenerator(Math.abs(r)),e=0;e<23;e+=1)n();return randomGenerator(n(0,1e4))}return function(n,e){n=n||0,e=e||1,r=(9301*r+49297)%233280;var a=r/233280;return n+a*(e-n)}};exports.randomGenerator=randomGenerator;
},{}],29:[function(require,module,exports){
"use strict";var Color=require("../objects/color"),vg={};vg.isDrawable=function(o){return Array.isArray(o)&&(o=o[0]),!!o&&("function"==typeof o.draw||(void 0!==o.x&&void 0!==o.y||void 0!==o.r&&void 0!==o.g&&void 0!==o.b))},vg.drawPoints=function(o,r){o.fillStyle="blue",o.beginPath();for(var t,i=0;i<r.length;i+=1)t=r[i],o.moveTo(t.x,t.y),o.arc(t.x,t.y,2,0,2*Math.PI,!1);o.fill()},vg.drawColoredPoints=function(o,r){for(var t,i=0,e=r.length;i<e;i+=1)t=r[i],o.fillStyle=Color.toCSS(t),o.fillRect(t.x-2,t.y-2,4,4)},vg.drawRectangles=function(o,r){o.save();for(var t,i=0;i<r.length;i+=1)t=r[i],o.strokeStyle="black",o.strokeWidth=1,o.rect(t.x,t.y,t.width,t.height),o.stroke();o.restore()},vg.drawColors=function(o,r){o.save();for(var t,i=0;i<r.length;i+=1)t=r[i],o.fillStyle=Color.toCSS(t),o.fillRect(0,0,30,30),o.translate(30,0);o.restore()},vg.draw=function(o,r){var t=r,i=!1;if(Array.isArray(r)&&(t=r[0],i=!0),t)if("function"==typeof t.draw)if(i)for(var e=0,v=r.length;e<v;e+=1)vg.draw(o,r[e]);else r.draw(o);else void 0!==t.x&&void 0!==t.y?void 0!==t.r&&void 0!==t.g&&void 0!==t.b?vg.drawColoredPoints(o,i?r:[r]):void 0!==t.width&&void 0!==t.height?vg.drawRectangles(o,i?r:[r]):vg.drawPoints(o,i?r:[r]):void 0!==t.r&&void 0!==t.g&&void 0!==t.b&&vg.drawColors(o,i?r:[r])},vg.toSVG=function(o,r){r=r||{};var t=r.header===!0,i=void 0!==r.x?r.x:0,e=void 0!==r.y?r.y:0,v=void 0!==r.width?r.width:500,n=void 0!==r.height?r.height:500,l="";if(o)if("function"==typeof o.toSVG)l=o.toSVG();else if(Array.isArray(o)){l="<g>\n";for(var d=0,a=o.length;d<a;d+=1)l+=vg.toSVG(o[d])+"\n";l+="</g>\n"}return t&&(l='<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="'+i+'" y="'+e+'" width="'+v+'px" height="'+n+'px" viewBox="'+i+" "+e+" "+v+" "+n+'">\n'+l+"</svg>\n"),l},module.exports=vg;

},{"../objects/color":32}],30:[function(require,module,exports){
"use strict";function _cloneCommand(e){var n={type:e.type};return n.type!==bezier.CLOSE&&(n.x=e.x,n.y=e.y),n.type===bezier.QUADTO?(n.x1=e.x1,n.y1=e.y1):n.type===bezier.CURVETO&&(n.x1=e.x1,n.y1=e.y1,n.x2=e.x2,n.y2=e.y2),n}var flatten=require("lodash.flatten"),ClipperLib=require("../../../../third_party/clipper"),bezier=require("../util/bezier"),geo=require("../util/geo"),math=require("../util/math"),random=require("../util/random"),Color=require("../objects/color"),Group=require("../objects/group"),Path=require("../objects/path"),Point=require("../objects/point"),Rect=require("../objects/rect"),Transform=require("../objects/transform"),Transformable=require("../objects/transformable"),vg={};vg.HORIZONTAL="horizontal",vg.VERTICAL="vertical",vg.EAST="e",vg.WEST="w",vg.NORTH="n",vg.SOUTH="s",vg.bounds=function(e){var n,r,t;if(e){if("function"==typeof e.bounds)return e.bounds();if(void 0!==e.x&&void 0!==e.y)return void 0!==e.width&&void 0!==e.height?new Rect(e.x,e.y,e.width,e.height):new Rect(e.x,e.y,0,0);if(void 0!==e.r&&void 0!==e.g&&void 0!==e.b)return new vg.Rect(0,0,30,30);if(Array.isArray(e)){if(n=null,t=e.length,t>0&&void 0!==e[0].r&&void 0!==e[0].g&&void 0!==e[0].b)return new Rect(0,0,30*e.length,30);for(r=0;r<t;r+=1)n=n?n.unite(vg.bounds(e[r])):vg.bounds(e[r]);return n||new Rect}return new Rect}return new Rect},vg.makeCenteredRect=function(e,n,r,t){var o=e-r/2,i=n-t/2;return new Rect(o,i,r,t)},vg.makePoint=function(e,n){return new Point(e,n)},vg.makeRect=function(e,n,r,t){return new Rect(e,n,r,t)},vg.merge=function(){for(var e=flatten(arguments),n=[],r=0;r<e.length;r+=1)e[r]&&0!==e[r].length&&n.push(e[r]);return new Group(n)},vg.combinePaths=function(e){return Path.combine(e)},vg.shapePoints=vg.toPoints=function(e){if(!e)return[];var n;if(e.commands){var r,t=[];for(n=0;n<e.commands.length;n+=1)r=e.commands[n],void 0!==r.x&&t.push(new Point(r.x,r.y));return t}var o=[];for(n=0;n<e.shapes.length;n+=1)o=o.concat(vg.shapePoints(e.shapes[n]));return o},vg.colorize=function(e,n,r,t){if(e)return e.colorize(n,r,t)},vg.translate=function(e,n){return e.translate?e.translate(n):Transformable.translate.apply(e,[n])},vg.scale=function(e,n,r){return e.scale?e.scale(n,r):Transformable.scale.apply(e,[n,r])},vg.rotate=function(e,n,r){return e.rotate?e.rotate(n,r):Transformable.rotate.apply(e,[n,r])},vg.skew=function(e,n,r){return e.skew?e.skew(n,r):Transformable.skew.apply(e,[n,r])},vg.copy=function(e,n,r,t,o,i){var a,s,g,h,u=[],l=0,v=0,p=0,c=1,f=1;for(a=0;a<n;a+=1){for(s=new Transform,g=0;g<r.length;g+=1)h=r[g],"t"===h?s=s.translate(l,v):"r"===h?s=s.rotate(p):"s"===h&&(s=s.scale(c,f));Array.isArray(e)&&e.length>0&&void 0!==e[0].x&&void 0!==e[0].y?u=u.concat(s.transformShape(e)):u.push(s.transformShape(e)),l+=t.x,v+=t.y,p+=o,c+=i.x,f+=i.y}return u},vg.fit=function(e,n,r,t,o){if(e){o=void 0!==o&&o;var i,a,s,g=vg.bounds(e),h=g.x,u=g.y,l=g.width,v=g.height;return l=l>1e-12?l:0,v=v>1e-12?v:0,i=new Transform,i=i.translate(n.x,n.y),o?(a=l>0?r/l:1,s=v>0?t/v:1):(a=l>0?r/l:Number.MAX_VALUE,s=v>0?t/v:Number.MAX_VALUE,a=s=Math.min(a,s)),i=i.scale(a,s),i=i.translate(-l/2-h,-v/2-u),i.transformShape(e)}},vg.fitTo=function(e,n,r){if(e&&n){var t=vg.bounds(n),o=t.x,i=t.y,a=t.width,s=t.height;return vg.fit(e,{x:o+a/2,y:i+s/2},a,s,r)}},vg._mirrorPoints=function(e,n){var r,t=[];t.length=e.length;for(var o=0;o<e.length;o+=1)r=e[o],t[o]=n(r.x,r.y);return t},vg._mirrorPath=function(e,n){for(var r,t,o,i,a=new Path([],e.fill,e.stroke,e.strokeWidth),s=0;s<e.commands.length;s+=1)if(t=e.commands[s],t.type===bezier.MOVETO)r=n(t.x,t.y),a.moveTo(r.x,r.y);else if(t.type===bezier.LINETO)r=n(t.x,t.y),a.lineTo(r.x,r.y);else if(t.type===bezier.CURVETO)r=n(t.x,t.y),o=n(t.x1,t.y1),i=n(t.x2,t.y2),a.curveTo(o.x,o.y,i.x,i.y,r.x,r.y);else{if(t.type!==bezier.CLOSE)throw new Error("Unknown command "+t);a.close()}return a},vg._mirrorGroup=function(e,n){var r,t=[];t.length=e.shapes.length;for(var o=0;o<e.shapes.length;o+=1)r=e.shapes[o],t[o]=vg._mirror(r,n);return new Group(t)},vg._mirror=function(e,n){return Array.isArray(e)&&e.length>0&&void 0!==e[0].x&&void 0!==e[0].y?vg._mirrorPoints(e,n):e.shapes?vg._mirrorGroup(e,n):vg._mirrorPath(e,n)},vg.mirror=function(e,n,r,t){if(e){r=r||new Point,0!==n&&(n=n||90);var o=function(e,t){var o=geo.distance(e,t,r.x,r.y),i=geo.angle(e,t,r.x,r.y),a=geo.coordinates(r.x,r.y,180+n,o*Math.cos(math.radians(i-n)));return o=geo.distance(e,t,a.x,a.y),i=geo.angle(e,t,a.x,a.y),a=geo.coordinates(e,t,i,2*o),new Point(a.x,a.y)},i=vg._mirror(e,o);return t?Array.isArray(e)&&e.length>0&&void 0!==e[0].x&&void 0!==e[0].y?e.concat(i):new Group([e,i]):i}},vg.pathLength=function(e,n){var r=20;return n&&n.precision&&(r=n.precision),e.length(r)},vg.resampleByLength=function(e,n){if(e)return e.resampleByLength(n)},vg.resampleByAmount=function(e,n,r){if(e)return e.resampleByAmount(n,r)},vg._wigglePoints=function(e,n,r){var t,o,i;if(e.commands){var a=new Path([],e.fill,e.stroke,e.strokeWidth);for(t=0;t<e.commands.length;t+=1){o=(r(0,1)-.5)*n.x*2,i=(r(0,1)-.5)*n.y*2;var s=e.commands[t];s.type===bezier.MOVETO?a.moveTo(s.x+o,s.y+i):s.type===bezier.LINETO?a.lineTo(s.x+o,s.y+i):s.type===bezier.CURVETO?a.curveTo(s.x1,s.y1,s.x2,s.y2,s.x+o,s.y+i):s.type===bezier.CLOSE&&a.close()}return a}if(e.shapes){var g=[];for(g.length=e.shapes.length,t=0;t<e.shapes.length;t+=1)g[t]=vg._wigglePoints(e.shapes[t],n,r);return new Group(g)}if(Array.isArray(e)&&e.length>0&&void 0!==e[0].x&&void 0!==e[0].y){var h=[];for(h.length=e.length,t=0;t<e.length;t+=1)o=(r(0,1)-.5)*n.x*2,i=(r(0,1)-.5)*n.y*2,h[t]=new Point(e[t].x+o,e[t].y+i);return h}var u=[];for(u.length=e.length,t=0;t<e.length;t+=1)u[t]=vg._wigglePoints(e[t],n,r);return u},vg.wigglePoints=function(e,n,r){r=void 0!==r?r:Math.random();var t=random.generator(r);return void 0===n?n={x:10,y:10}:"number"==typeof n&&(n={x:n,y:n}),vg._wigglePoints(e,n,t)},vg._wiggleContours=function(e,n,r){var t;if(e.commands){var o,i,a,s=e.contours(),g=[];for(t=0;t<s.length;t+=1)o=(r(0,1)-.5)*n.x*2,i=(r(0,1)-.5)*n.y*2,a=(new Transform).translate(o,i),g=g.concat(a.transformShape(new Path(s[t])).commands);return new Path(g,e.fill,e.stroke,e.strokeWidth)}if(e.shapes){var h=[];for(h.length=e.shapes.length,t=0;t<e.shapes.length;t+=1)h[t]=vg._wiggleContours(e.shapes[t],n,r);return new Group(h)}var u=[];for(u.length=e.length,t=0;t<e.length;t+=1)u[t]=vg._wiggleContours(e[t],n,r);return u},vg.wiggleContours=function(e,n,r){r=void 0!==r?r:Math.random();var t=random.generator(r);return void 0===n?n={x:10,y:10}:"number"==typeof n&&(n={x:n,y:n}),vg._wiggleContours(e,n,t)},vg._wigglePaths=function(e,n,r){if(e.commands)return e;if(e.shapes)return new Group(vg._wigglePaths(e.shapes,n,r));if(Array.isArray(e)){for(var t,o,i,a,s=[],g=0;g<e.length;g+=1)t=e[g],t.commands?(o=(r(0,1)-.5)*n.x*2,i=(r(0,1)-.5)*n.y*2,a=(new Transform).translate(o,i),s.push(a.transformShape(t))):t.shapes&&s.push(vg._wigglePaths(t,n,r));return s}},vg.wigglePaths=function(e,n,r){r=void 0!==r?r:Math.random();var t=random.generator(r);return void 0===n?n={x:10,y:10}:"number"==typeof n&&(n={x:n,y:n}),vg._wigglePaths(e,n,t)},vg.scatterPoints=function(e,n,r){if(e){r=void 0!==r?r:Math.random();var t,o,i,a,s,g,h,u,l=random.generator(r),v=e.bounds(),p=v.x,c=v.y,f=v.width,y=v.height,d=e.contours(),m=[],x=[],w=5;for(t=0;t<d.length;t++)i=new Path(d[t]),a=i.commands.length,m.push(i.points(a*w,{closed:!0}));for(t=0;t<n;t+=1)for(s=100;s>0;){for(g=0,h=p+l(0,1)*f,u=c+l(0,1)*y,o=0;o<m.length;o++)geo.pointInPolygon(m[o],h,u)&&(g+=1);if(g%2){x.push(new Point(h,u));break}s-=1}return x}},vg.connectPoints=function(e,n){if(e){for(var r,t=new Path,o=0;o<e.length;o+=1)r=e[o],0===o?t.moveTo(r.x,r.y):t.lineTo(r.x,r.y);return n&&t.close(),t.fill=null,t.stroke=Color.BLACK,t}},vg.align=function(e,n,r,t){if(e){var o,i,a,s=n.x,g=n.y,h=vg.bounds(e);return o="left"===r?s-h.x:"right"===r?s-h.x-h.width:"center"===r?s-h.x-h.width/2:0,i="top"===t?g-h.y:"bottom"===t?g-h.y-h.height:"middle"===t?g-h.y-h.height/2:0,a=(new Transform).translate(o,i),a.transformShape(e)}},vg.snap=function(e,n,r,t){if(e){r=void 0!==r?r:1,t=t||Point.ZERO;var o,i,a;if(e.commands){var s,g,h,u,l,v=new Path([],e.fill,e.stroke,e.strokeWidth);for(o=0;o<e.commands.length;o+=1)if(s=e.commands[o],s.type===bezier.MOVETO||s.type===bezier.LINETO||s.type===bezier.CURVETO)i=math.snap(s.x+t.x,n,r)-t.x,a=math.snap(s.y+t.y,n,r)-t.y,s.type===bezier.MOVETO?v.moveTo(i,a):s.type===bezier.LINETO?v.lineTo(i,a):s.type===bezier.CURVETO&&(g=math.snap(s.x1+t.x,n,r)-t.x,h=math.snap(s.y1+t.y,n,r)-t.y,u=math.snap(s.x2+t.x,n,r)-t.x,l=math.snap(s.y2+t.y,n,r)-t.y,v.curveTo(g,h,u,l,i,a));else{if(s.type!==bezier.CLOSE)throw new Error("Invalid path command "+s);v.close()}return v}if(e.shapes){var p=[];for(p.length=e.shapes.length,o=0;o<e.shapes.length;o+=1)p[o]=vg.snap(e.shapes[o],n,r,t);return new Group(p)}if(Array.isArray(e)&&e.length>0&&void 0!==e[0].x&&void 0!==e[0].y){var c,f=[];for(f.length=e.length,o=0;o<e.length;o+=1)c=e[o],i=math.snap(c.x+t.x,n,r)-t.x,a=math.snap(c.y+t.y,n,r)-t.y,f[o]=new Point(i,a);return f}var y=[];for(y.length=e.length,o=0;o<e.length;o+=1)y[o]=vg.snap(e[o],n,r,t);return y}},vg.deletePoints=function(e,n,r){var t,o,i,a=[],s=[];if(e.commands){var g=!0;for(t=0;t<e.commands.length;t+=1)o=_cloneCommand(e.commands[t]),(void 0===o.x||r&&n.contains(o.x,o.y)||!r&&!n.contains(o.x,o.y))&&(g&&o.type!==bezier.MOVETO&&(o.type=bezier.MOVETO),a.push(o),o.type===bezier.MOVETO?g=!1:o.type===bezier.CLOSE&&(g=!0));return new Path(a,e.fill,e.stroke,e.strokeWidth)}if(e.shapes){var h=[];for(h.length=e.shapes.length,t=0;t<e.shapes.length;t+=1)h[t]=vg.deletePoints(e.shapes[t],n,r);return new Group(h)}if(Array.isArray(e)&&e.length>0&&void 0!==e[0].x&&void 0!==e[0].y){for(t=0;t<e.length;t+=1)i=e[t],(r&&n.contains(i.x,i.y)||!r&&!n.contains(i.x,i.y))&&s.push(_cloneCommand(i));return s}var u=[];for(u.length=e.length,t=0;t<e.length;t+=1)u[t]=vg.deletePoints(e[t],n,r);return u},vg.deletePaths=function(e,n,r){if(e.commands)return null;if(e.shapes)return new Group(vg.deletePaths(e.shapes,n,r));if(Array.isArray(e)){for(var t,o,i,a,s,g=[],h=e,u=0;u<h.length;u+=1)if(o=h[u],o.commands){for(i=!1,t=0;t<o.commands.length;t+=1)if(a=o.commands[t],void 0!==a.x&&n.contains(a.x,a.y)){i=!0;break}r&&!i||i&&!r||g.push(o)}else o.shapes&&(s=vg.deletePaths(o,n,r),0!==s.length&&g.push(s));return g}},vg.delete=function(e,n,r,t){if(null===e||null===n)return null;if("points"===r)return vg.deletePoints(e,n,t);if("paths"===r)return vg.deletePaths(e,n,t);throw new Error("Invalid scope.")},vg.pointOnPath=function(e,n){if(e){e.shapes&&(e=new Path(vg.combinePaths(e))),n%=1,n<0&&(n=1+n);var r=e.point(n);return new Point(r.x,r.y)}},vg._x=function(e){return void 0!==e.x?e.x:e.bounds().x},vg._y=function(e){return void 0!==e.y?e.y:e.bounds().y},vg._angleToPoint=function(e){return function(n){if(void 0!==n.x&&void 0!==n.y)return geo.angle(n.x,n.y,e.x,e.y);var r=n.bounds().centerPoint();return geo.angle(r.x,r.y,e.x,e.y)}},vg._distanceToPoint=function(e){return function(n){if(void 0!==n.x&&void 0!==n.y)return geo.distance(n.x,n.y,e.x,e.y);var r=n.bounds().centerPoint();return geo.distance(r.x,r.y,e.x,e.y)}},vg.shapeSort=function(e,n,r){if(e){r=r||Point.ZERO;var t={x:vg._x,y:vg._y,angle:vg._angleToPoint(r),distance:vg._distanceToPoint(r)};if(n=t[n],void 0===n)return e;var o=e.slice(0);return o.sort(function(e,r){var t=n(e),o=n(r);return t<o?-1:t>o?1:0}),o}},vg.group=function(){return new Group(flatten(arguments))},vg.ungroup=function(e){if(e){if(e.shapes){var n,r,t=[];for(n=0;n<e.shapes.length;n+=1)r=e.shapes[n],r.commands?t.push(r):r.shapes&&(t=t.concat(vg.ungroup(r)));return t}return e.commands?[e]:[]}return[]},vg.centerPoint=function(e){if(!e)return Point.ZERO;var n=vg.bounds(e);return new Point(n.x+n.width/2,n.y+n.height/2)},vg.link=function(e,n,r){if(e&&n){var t=new Path,o=e.bounds(),i=n.bounds();if(r===vg.HORIZONTAL){var a=(i.x-(o.x+o.width))/2;t.moveTo(o.x+o.width,o.y),t.curveTo(o.x+o.width+a,o.y,i.x-a,i.y,i.x,i.y),t.lineTo(i.x,i.y+i.height),t.curveTo(i.x-a,i.y+i.height,o.x+o.width+a,o.y+o.height,o.x+o.width,o.y+o.height),t.close()}else{var s=(i.y-(o.y+o.height))/2;t.moveTo(o.x,o.y+o.height),t.curveTo(o.x,o.y+o.height+s,i.x,i.y-s,i.x,i.y),t.lineTo(i.x+i.width,i.y),t.curveTo(i.x+i.width,i.y-s,o.x+o.width,o.y+o.height+s,o.x+o.width,o.y+o.height),t.close()}return t}};var compoundMethods={union:ClipperLib.ClipType.ctUnion,difference:ClipperLib.ClipType.ctDifference,intersection:ClipperLib.ClipType.ctIntersection,xor:ClipperLib.ClipType.ctXor};vg._compoundToPoints=function(e){var n,r,t,o,i,a=[];for(n=0;n<e.length;n+=1){for(r=[],t=e[n],o=0;o<t.length;o+=1)i=t[o],i.type!==bezier.CLOSE&&r.push({X:i.x,Y:i.y});a.push(r)}return a},vg.compound=function(e,n,r){e.commands||(e=Path.combine(e)),n.commands||(n=Path.combine(n));var t=e.resampleByLength(1).contours(),o=n.resampleByLength(1).contours(),i=vg._compoundToPoints(t),a=vg._compoundToPoints(o),s=100;ClipperLib.JS.ScaleUpPaths(i,s),ClipperLib.JS.ScaleUpPaths(a,s);var g=new ClipperLib.Clipper;g.AddPaths(i,ClipperLib.PolyType.ptSubject,e.isClosed()),g.AddPaths(a,ClipperLib.PolyType.ptClip,n.isClosed());var h=new ClipperLib.Paths;g.Execute(compoundMethods[r],h,ClipperLib.PolyFillType.pftNonZero,ClipperLib.PolyFillType.pftNonZero),h=ClipperLib.JS.Clean(h,.1*s),ClipperLib.JS.ScaleDownPaths(h,s);var u,l,v,p=new Path;for(u=0;u<h.length;u+=1){for(v=h[u],l=0;l<v.length;l+=1)0===l?p.moveTo(v[l].X,v[l].Y):p.lineTo(v[l].X,v[l].Y);v[0].X===v[v.length-1].X&&v[0].Y===v[v.length-1].Y||p.closePath()}return p},module.exports=vg;

},{"../../../../third_party/clipper":50,"../objects/color":32,"../objects/group":33,"../objects/path":35,"../objects/point":36,"../objects/rect":37,"../objects/transform":39,"../objects/transformable":40,"../util/bezier":42,"../util/geo":44,"../util/math":46,"../util/random":47,"lodash.flatten":3}],31:[function(require,module,exports){
"use strict";var geo=require("../util/geo"),Color=require("../objects/color"),Path=require("../objects/path"),Point=require("../objects/point"),gText=require("../objects/text"),vg={};vg.roundedRect=function(e,t,n,r,o,a){var i=new Path;return i.addRoundedRect(e,t,n,r,o,a),i},vg.quad=function(e,t,n,r){var o=arguments,a=new Path;return 8===o.length?Path.prototype.addQuad.apply(a,o):(e=Point.read(e),t=Point.read(t),n=Point.read(n),r=Point.read(r),a.addQuad(e.x,e.y,t.x,t.y,n.x,n.y,r.x,r.y)),a},vg.rect=function(e,t,n,r){var o=arguments;if(3===o.length?e=Point.read(e):4===o.length?"number"==typeof o[0]&&"number"==typeof o[1]?(e=Point.read(o[0],o[1]),t=o[2],n=o[3],r=null):(e=Point.read(e),r=Point.read(r)):5!==o.length&&6!==o.length||(e=Point.read(o[0],o[1]),t=o[2],n=o[3],r=5===o.length&&"number"==typeof o[4]?Point.read(o[4],o[4]):Point.read(o[4],o[5])),!r||0===r.x&&0===r.y){var a=new Path;return a.addRect(e.x-t/2,e.y-n/2,t,n),a}return vg.roundedRect(e.x-t/2,e.y-n/2,t,n,r.x,r.y)},vg.ellipse=function(e,t,n){var r=arguments;4===r.length?(e=Point.read(r[0],r[1]),t=r[2],n=r[3]):e=Point.read(e);var o=new Path;return o.addEllipse(e.x-t/2,e.y-n/2,t,n),o},vg.line=function(e,t){var n=arguments;4===n.length?(e=Point.read(n[0],n[1]),t=Point.read(n[2],n[3])):(e=Point.read(e),t=Point.read(t));var r=new Path;return r.addLine(e.x,e.y,t.x,t.y),r.fill=null,r.stroke="black",r},vg.lineAngle=function(e,t,n){var r=arguments;4===r.length?(e=Point.read(r[0],r[1]),n=r[2],t=r[3]):e=Point.read(e);var o=geo.coordinates(e.x,e.y,t,n);return vg.line(e,o)},vg.arc=function(e,t,n,r,o,a){var i=arguments;7===i.length?(e=Point.read(i[0],i[1]),t=i[2],n=i[3],r=i[4],o=i[5],a=i[6]):e=Point.read(e);var l=new Path;return l.addArc(e.x,e.y,t,n,r,o,a),l},vg.curve=function(e,t,n,r){var o=arguments;6===o.length?(e=Point.read(o[0],o[1]),t=Point.read(o[2],o[3]),n=o[4],r=o[5]):(e=Point.read(e),t=Point.read(t));var a=e.x+n*(t.x-e.x),i=e.y+n*(t.y-e.y),l=geo.angle(e.x,e.y,t.x,t.y)+90,u=geo.coordinates(a,i,l,r),d=u.x,g=u.y,v=e.x+2/3*(d-e.x),y=e.y+2/3*(g-e.y),c=t.x+2/3*(d-t.x),x=t.y+2/3*(g-t.y),P=new Path;return P.moveTo(e.x,e.y),P.curveTo(v,y,c,x,t.x,t.y),P.fill=null,P.stroke=Color.BLACK,P},vg.polygon=function(e,t,n,r){var o=arguments;5===o.length||4===o.length&&"number"==typeof o[0]&&"number"==typeof o[1]?(e=Point.read(o[0],o[1]),t=o[2],n=o[3],r=5!==o.length||o[4]):(e=Point.read(e),3===o.length&&(r=!0)),n=Math.max(n,3);var a,i,l,u,d=e.x,g=e.y,v=t,y=360/n,c=0;r===!0&&(a=geo.coordinates(d,g,0,v),i=geo.coordinates(d,g,y,v),c=-geo.angle(i.x,i.y,a.x,a.y));var x=new Path;for(l=0;l<n;l+=1)u=geo.coordinates(d,g,y*l+c,v),0===l?x.moveTo(u.x,u.y):x.lineTo(u.x,u.y);return x.close(),x},vg.star=function(e,t,n,r){var o=arguments;5===o.length||4===o.length&&"number"==typeof o[0]&&"number"==typeof o[1]?(e=Point.read(o[0],o[1]),t=o[2],n=o[3],r=o[4]):e=Point.read(e),r||(r=n);var a,i,l,u,d,g=new Path;for(g.moveTo(e.x,e.y+n/2),a=1;a<2*t;a+=1)i=a*Math.PI/t,l=a%2===1?r/2:n/2,u=e.x+l*Math.sin(i),d=e.y+l*Math.cos(i),g.lineTo(u,d);return g.close(),g};var nonEmpty=function(e){return""!==e},stripCommas=function(e){return e.replace(/,/g," ")};vg.freehand=function(e){var t,n,r,o,a,i=[],l=e.split("M");for(t=0;t<l.length;t+=1)nonEmpty(l[t])&&i.push(stripCommas(l[t]));var u=new Path;for(n=0;n<i.length;n+=1){for(a=[],l=i[n].split(" "),t=0;t<l.length;t+=1)nonEmpty(l[t])&&a.push(l[t]);for(t=0;t<a.length;t+=2)void 0!==a[t+1]&&(r=parseFloat(a[t]),o=parseFloat(a[t+1]),0===t?u.moveTo(r,o):u.lineTo(r,o))}return u.fill=null,u.stroke=Color.BLACK,u},vg.grid=function(e,t,n,r,o){var a,i,l,u,d,g,v,y,c,x=[];for(x.length=e*t,o=void 0!==o?o:Point.ZERO,e>1?(a=n*(e-1),i=o.x-a/2):i=o.x,t>1?(l=r*(t-1),u=o.y-l/2):u=o.y,c=0,d=0;d<t;d+=1)for(g=0;g<e;g+=1)v=i+g*n,y=u+d*r,x[c]=new Point(v,y),c+=1;return x},vg.text=function(){var e=Object.create(gText.prototype);return e.constructor=gText.prototype,gText.apply(e,arguments),e},vg.demoRect=function(){return new vg.rect({x:0,y:0},100,100,{x:0,y:0})},vg.demoEllipse=function(){return new vg.ellipse({x:0,y:0},100,100)},module.exports=vg;

},{"../objects/color":32,"../objects/path":35,"../objects/point":36,"../objects/text":38,"../util/geo":44}],32:[function(require,module,exports){
"use strict";var math=require("../util/math"),color=require("../util/color"),js=require("../util/js"),HSB="HSB",HSL="HSL",HEX="HEX",Color=function(r,o,t,e,s){var n,i,l,a,h,d;void 0===r?(n=i=l=0,a=1):Array.isArray(r)?(d=o||{},n=void 0!==r[0]?r[0]:0,i=void 0!==r[1]?r[1]:0,l=void 0!==r[2]?r[2]:0,a=void 0!==r[3]?r[3]:d.range||1):void 0!==r.r?(d=o||{},n=r.r,i=r.g,l=r.b,a=void 0!==r.a?r.a:d.range||1):"string"==typeof r?(h=color.hex2rgb(r),n=h[0],i=h[1],l=h[2],a=1):"number"==typeof r&&(1===arguments.length?(n=i=l=r,a=1):2===arguments.length?(n=i=l=r,"number"==typeof o?a=o:(d=o,a=d.range||1)):3===arguments.length?"number"==typeof t?(n=r,i=o,l=t,a=1):(n=i=l=r,a=o,d=t):4===arguments.length?(n=r,i=o,l=t,"number"==typeof e?a=e:(d=e,a=d.range||1)):(n=r,i=o,l=t,a=e,d=s)),d=d||{},void 0!==d.range&&(n/=d.range,i/=d.range,l/=d.range,a/=d.range,d.mode===HSB&&(r/=d.range,o/=d.range,t/=d.range)),d.mode===HSB?(r=math.clamp(r,0,1),o=math.clamp(o,0,1),t=math.clamp(t,0,1),h=color.hsb2rgb(r,o,t),n=h[0],i=h[1],l=h[2]):d.mode===HSL?(r=math.clamp(r,0,1),o=math.clamp(o,0,1),t=math.clamp(t,0,1),h=color.hsl2rgb(r,o,t),n=h[0],i=h[1],l=h[2]):d.mode===HEX&&(h=color.hex2rgb(r),n=h[0],i=h[1],l=h[2],a=1),this.r=math.clamp(n,0,1),this.g=math.clamp(i,0,1),this.b=math.clamp(l,0,1),this.a=math.clamp(a,0,1)};Color.BLACK=new Color(0),Color.WHITE=new Color(1),js.defineAlias(Color,"r","red"),js.defineAlias(Color,"g","green"),js.defineAlias(Color,"b","blue"),js.defineAlias(Color,"a","alpha"),js.defineGetter(Color,"h",function(){return color.rgb2hsl(this.r,this.g,this.b)[0]}),js.defineGetter(Color,"s",function(){return color.rgb2hsl(this.r,this.g,this.b)[1]}),js.defineGetter(Color,"l",function(){return color.rgb2hsl(this.r,this.g,this.b)[2]}),js.defineAlias(Color,"h","hue"),js.defineAlias(Color,"s","saturation"),js.defineAlias(Color,"l","lightness"),js.defineGetter(Color,"rgb",function(){return[this.r,this.g,this.b]}),js.defineGetter(Color,"rgba",function(){return[this.r,this.g,this.b,this.a]}),js.defineGetter(Color,"hsb",function(){return color.rgb2hsb(this.r,this.g,this.b)}),js.defineGetter(Color,"hsba",function(){return color.rgb2hsb(this.r,this.g,this.b).concat([this.a])}),js.defineGetter(Color,"hsl",function(){return color.rgb2hsl(this.r,this.g,this.b)}),js.defineGetter(Color,"hsla",function(){return color.rgb2hsl(this.r,this.g,this.b).concat([this.a])}),Color.prototype.toCSS=function(){return Color.toCSS(this)},Color.prototype.toHex=function(){return this.a>=1?color.rgb2hex(this.r,this.g,this.b):color.rgba2hex(this.r,this.g,this.b,this.a)},Color.prototype.desaturate=function(r){if(this.r===this.g&&this.g===this.b)return this;var o,t,e;void 0!==r&&r.method&&"ITU-R BT.601"!==r.method?"ITU-R BT.709"===r.method&&(o=.2125,t=.7154,e=.0721):(o=.3,t=.59,e=.11);var s=this.r*o+this.g*t+this.b*e;return new Color(s,s,s,this.a)},Color.prototype.invert=function(){return new Color(1-this.r,1-this.g,1-this.b,this.a)},Color.clone=function(r){return null===r||void 0===r?null:"string"==typeof r?r:new Color(r.r,r.g,r.b,r.a)},Color.toCSS=function(r){if(null===r)return"none";if(void 0===r)return"black";if("string"==typeof r)return r;if(r instanceof Color){var o=Math.round(255*r.r),t=Math.round(255*r.g),e=Math.round(255*r.b);return"rgba("+o+", "+t+", "+e+", "+r.a+")"}if(void 0!==r.r&&void 0!==r.g&&void 0!==r.b)return void 0===r.a?"rgb("+r.r+", "+r.g+", "+r.b+")":"rgba("+r.r+", "+r.g+", "+r.b+", "+r.a+")";throw new Error("Don't know how to convert "+r+" to CSS.")},Color.toHex=function(r){return Color.parse(r).toHex()},Color.make=function(){var r=Object.create(Color.prototype);return r.constructor=Color.prototype,Color.apply(r,arguments),r},Color.parse=function(r){function o(r,o){return!(!r||!o)&&(r=String(r),0===r.indexOf(o))}var t;if(void 0===r||null===r)return new Color(0,0,0,0);if(r instanceof Color)return r;if(color.namedColors[r])return Color.make.apply(null,color.namedColors[r]);if("#"===r[0])return new Color(r,0,0,0,{mode:HEX});if(o(r,"rgba"))return t=r.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+|\d+.\d+)\s*\)$/i),t?new Color(parseInt(t[1])/255,parseInt(t[2])/255,parseInt(t[3])/255,parseFloat(t[4])):(t=r.match(/^rgba\s*\(\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)\s*\)$/i))?new Color(parseFloat(t[1])/100,parseFloat(t[2])/100,parseFloat(t[3])/100,parseFloat(t[4])):new Color(0,0,0,0);if(o(r,"rgb"))return t=r.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i),t?new Color(parseInt(t[1])/255,parseInt(t[2])/255,parseInt(t[3])/255):(t=r.match(/^rgb\s*\(\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)%\s*\)$/i))?new Color(parseFloat(t[1])/100,parseFloat(t[2])/100,parseFloat(t[3])/100):new Color(0,0,0,0);if(o(r,"hsla"))return t=r.match(/^hsla\s*\(\s*(\d+|\d+.\d+)\s*,\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)\s*\)$/i),t?new Color(parseFloat(t[1])/360,parseFloat(t[2])/100,parseFloat(t[3])/100,parseFloat(t[4])):new Color(0,0,0,0);if(o(r,"hsl"))return t=r.match(/^hsl\s*\(\s*(\d+|\d+.\d+)\s*,\s*(\d+|\d+.\d+)%\s*,\s*(\d+|\d+.\d+)%\s*\)$/i),t?new Color(parseFloat(t[1])/360,parseFloat(t[2])/100,parseFloat(t[3])/100):new Color(0,0,0,0);if("none"===r||"null"===r||o(r,"url("))return new Color(0,0,0,0);throw new Error("Color "+r+"can not be parsed")},Color.gray=function(r,o,t){return t=Math.max(t,1),new Color(r/t,r/t,r/t,o/t)},Color.rgb=function(r,o,t,e,s){return s=Math.max(s,1),new Color(r/s,o/s,t/s,e/s)},Color.hsb=function(r,o,t,e,s){return s=Math.max(s,1),new Color(r/s,o/s,t/s,e/s,{mode:HSB})},Color.hsl=function(r,o,t,e,s){return s=Math.max(s,1),new Color(r/s,o/s,t/s,e/s,{mode:HSL})},module.exports=Color;

},{"../util/color":43,"../util/js":45,"../util/math":46}],33:[function(require,module,exports){
"use strict";var Path=require("../objects/path"),Rect=require("../objects/rect"),Color=require("../objects/color"),Group=function(t){t?t.shapes||t.commands?this.shapes=[t]:t&&(this.shapes=t):this.shapes=[]};Group.prototype.add=function(t){this.shapes.push(t)},Group.prototype.clone=function(){var t,e=[],s=this.shapes.length;for(e.length=s,t=0;t<s;t+=1)e[t]=this.shapes[t].clone();return new Group(e)},Group.prototype.colorize=function(t){var e=arguments;("object"!=typeof t||t instanceof Color)&&(t={},void 0!==e[0]&&(t.fill=e[0]),void 0!==e[1]&&(t.stroke=e[1]),void 0!==e[2]&&(t.strokeWidth=e[2]));var s=[];s.length=this.shapes.length;for(var r=0;r<this.shapes.length;r+=1)s[r]=this.shapes[r].colorize(t);return new Group(s)},Group.prototype.desaturate=function(t){var e=[];e.length=this.shapes.length;for(var s=0;s<this.shapes.length;s+=1)e[s]=this.shapes[s].desaturate(t);return new Group(e)},Group.prototype.invert=function(){var t=[];t.length=this.shapes.length;for(var e=0;e<this.shapes.length;e+=1)t[e]=this.shapes[e].invert();return new Group(t)},Group.prototype.bounds=function(){if(0===this.shapes.length)return new Rect(0,0,0,0);var t,e,s,r=this.shapes;for(t=0;t<r.length;t+=1)s=r[t],void 0===e&&(e=s.bounds()),(s.shapes&&0!==s.shapes.length||s.commands&&0!==s.commands.length)&&(e=e.unite(s.bounds()));return void 0!==e?e:new Rect(0,0,0,0)},Group.prototype.contains=function(t,e,s){void 0===s&&(s=100);var r,o=this.shapes;for(r=0;r<o.length;r+=1)if(o[r].contains(t,e,s))return!0;return!1},Group.prototype.length=function(t){void 0===t&&(t=10);for(var e=0,s=this.shapes,r=0;r<s.length;r+=1)e+=s[r].length(t);return e},Group.prototype.resampleByAmount=function(t,e){var s;if(!e)return s=new Path.combine(this),s.resampleByAmount(t,e);var r=[];r.length=this.shapes.length;for(var o=0;o<this.shapes.length;o+=1)r[o]=this.shapes[o].resampleByAmount(t,e);return new Group(r)},Group.prototype.resampleByLength=function(t){var e=[];e.length=this.shapes.length;for(var s=0;s<this.shapes.length;s+=1)e[s]=this.shapes[s].resampleByLength(t);return new Group(e)},Group.prototype.toSVG=function(){var t=[];t.length=this.shapes.length;for(var e=0;e<this.shapes.length;e+=1)t[e]=this.shapes[e].toSVG();return"<g>"+t.join("")+"</g>"},Group.prototype.draw=function(t){var e,s=this.shapes,r=s.length;for(e=0;e<r;e+=1)s[e].draw(t)},module.exports=Group;

},{"../objects/color":32,"../objects/path":35,"../objects/rect":37}],34:[function(require,module,exports){
"use strict";var Vec3=require("../objects/vec3"),Matrix4=function(m){void 0!==m?this.m=m:(m=new Float32Array(16),m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,this.m=m)};Matrix4.IDENTITY=new Matrix4,Matrix4.perspective=function(m,t,i,s){var h=new Float32Array(Matrix4.IDENTITY.m),r=1/Math.tan(.5*m);return h[0]=r/t,h[1]=h[2]=h[3]=0,h[5]=r,h[4]=h[6]=h[7]=0,h[8]=h[9]=0,h[10]=-s/(i-s),h[11]=1,h[12]=h[13]=h[15]=0,h[14]=i*s/(i-s),new Matrix4(h)},Matrix4.lookAt=function(m,t,i){var s,h,r,a,e,n,o;return s=new Float32Array(16),h=t.subtract(m).normalize(),r=Vec3.cross(i,h).normalize(),a=Vec3.cross(h,r).normalize(),e=-Vec3.dot(r,m),n=-Vec3.dot(a,m),o=-Vec3.dot(h,m),s[0]=r.x,s[1]=a.x,s[2]=h.x,s[3]=0,s[4]=r.y,s[5]=a.y,s[6]=h.y,s[7]=0,s[8]=r.z,s[9]=a.z,s[10]=h.z,s[11]=0,s[12]=e,s[13]=n,s[14]=o,s[15]=1,new Matrix4(s)},Matrix4.prototype.invert=function(){var m,t,i,s,h,r,a,e,n,o,c,x,u,M,l,y,w,p,v,A,f,z,F,V,d,I,T,b,D,E,N,Y,j,k,q,g,B,C,G,H;return m=this.m[0],t=this.m[1],i=this.m[2],s=this.m[3],h=this.m[4],r=this.m[5],a=this.m[6],e=this.m[7],n=this.m[8],o=this.m[9],c=this.m[10],x=this.m[11],u=this.m[12],M=this.m[13],l=this.m[14],y=this.m[15],w=c*y-x*l,p=o*y-x*M,v=o*l-c*M,A=n*y-x*u,f=n*l-c*u,z=n*M-o*u,F=r*w-a*p+e*v,V=-(h*w-a*A+e*f),d=h*p-r*A+e*z,I=-(h*v-r*f+a*z),T=1/(m*F+t*V+i*d+s*I),b=a*y-e*l,D=r*y-e*M,E=r*l-a*M,N=h*y-e*u,Y=h*l-a*u,j=h*M-r*u,k=a*x-e*c,q=r*x-e*o,g=r*c-a*o,B=h*x-e*n,C=h*c-a*n,G=h*o-r*n,H=new Float32Array(16),H[0]=F*T,H[4]=V*T,H[8]=d*T,H[12]=I*T,H[1]=-(t*w-i*p+s*v)*T,H[5]=(m*w-i*A+s*f)*T,H[9]=-(m*p-t*A+s*z)*T,H[13]=(m*v-t*f+i*z)*T,H[2]=(t*b-i*D+s*E)*T,H[6]=-(m*b-i*N+s*Y)*T,H[10]=(m*D-t*N+s*j)*T,H[14]=-(m*E-t*Y+i*j)*T,H[3]=-(t*k-i*q+s*g)*T,H[7]=(m*k-i*B+s*C)*T,H[11]=-(m*q-t*B+s*G)*T,H[15]=(m*g-t*C+i*G)*T,new Matrix4(H)},Matrix4.prototype.multiply=function(m){var t=new Float32Array(16);return t[0]=this.m[0]*m.m[0]+this.m[1]*m.m[4]+this.m[2]*m.m[8]+this.m[3]*m.m[12],t[1]=this.m[0]*m.m[1]+this.m[1]*m.m[5]+this.m[2]*m.m[9]+this.m[3]*m.m[13],t[2]=this.m[0]*m.m[2]+this.m[1]*m.m[6]+this.m[2]*m.m[10]+this.m[3]*m.m[14],t[3]=this.m[0]*m.m[3]+this.m[1]*m.m[7]+this.m[2]*m.m[11]+this.m[3]*m.m[15],t[4]=this.m[4]*m.m[0]+this.m[5]*m.m[4]+this.m[6]*m.m[8]+this.m[7]*m.m[12],t[5]=this.m[4]*m.m[1]+this.m[5]*m.m[5]+this.m[6]*m.m[9]+this.m[7]*m.m[13],t[6]=this.m[4]*m.m[2]+this.m[5]*m.m[6]+this.m[6]*m.m[10]+this.m[7]*m.m[14],t[7]=this.m[4]*m.m[3]+this.m[5]*m.m[7]+this.m[6]*m.m[11]+this.m[7]*m.m[15],t[8]=this.m[8]*m.m[0]+this.m[9]*m.m[4]+this.m[10]*m.m[8]+this.m[11]*m.m[12],t[9]=this.m[8]*m.m[1]+this.m[9]*m.m[5]+this.m[10]*m.m[9]+this.m[11]*m.m[13],t[10]=this.m[8]*m.m[2]+this.m[9]*m.m[6]+this.m[10]*m.m[10]+this.m[11]*m.m[14],t[11]=this.m[8]*m.m[3]+this.m[9]*m.m[7]+this.m[10]*m.m[11]+this.m[11]*m.m[15],t[12]=this.m[12]*m.m[0]+this.m[13]*m.m[4]+this.m[14]*m.m[8]+this.m[15]*m.m[12],t[13]=this.m[12]*m.m[1]+this.m[13]*m.m[5]+this.m[14]*m.m[9]+this.m[15]*m.m[13],t[14]=this.m[12]*m.m[2]+this.m[13]*m.m[6]+this.m[14]*m.m[10]+this.m[15]*m.m[14],t[15]=this.m[12]*m.m[3]+this.m[13]*m.m[7]+this.m[14]*m.m[11]+this.m[15]*m.m[15],new Matrix4(t)},Matrix4.prototype.translate=function(m,t,i){var s=new Float32Array(this.m);return s[12]+=m,s[13]+=t,s[14]+=i,new Matrix4(s)},module.exports=Matrix4;

},{"../objects/vec3":41}],35:[function(require,module,exports){
"use strict";function _cloneCommand(t){var o={type:t.type};return o.type!==CLOSE&&(o.x=t.x,o.y=t.y),o.type===QUADTO?(o.x1=t.x1,o.y1=t.y1):o.type===CURVETO&&(o.x1=t.x1,o.y1=t.y1,o.x2=t.x2,o.y2=t.y2),o}var flatten=require("lodash.flatten"),bezier=require("../util/bezier"),geo=require("../util/geo"),math=require("../util/math"),Color=require("../objects/color"),Rect=require("../objects/rect"),MOVETO=bezier.MOVETO,LINETO=bezier.LINETO,QUADTO=bezier.QUADTO,CURVETO=bezier.CURVETO,CLOSE=bezier.CLOSE,CLOSE_COMMAND=Object.freeze({type:CLOSE}),KAPPA=.5522847498307936,Path=function(t,o,e,i){this.commands=void 0!==t?t:[],this.fill=void 0!==o?o:"black",this.stroke=void 0!==e?e:null,this.strokeWidth=void 0!==i?i:1};Path.prototype.clone=function(){var t,o=new Path,e=this.commands.length;for(o.commands.length=this.commands.length,t=0;t<e;t+=1)o.commands[t]=_cloneCommand(this.commands[t]);return o.fill=Color.clone(this.fill),o.stroke=Color.clone(this.stroke),o.strokeWidth=this.strokeWidth,o},Path.prototype.extend=function(t){var o=t.commands||t;Array.prototype.push.apply(this.commands,o)},Path.prototype.moveTo=function(t,o){this.commands.push({type:MOVETO,x:t,y:o})},Path.prototype.lineTo=function(t,o){this.commands.push({type:LINETO,x:t,y:o})},Path.prototype.curveTo=function(t,o,e,i,s,r){this.commands.push({type:CURVETO,x1:t,y1:o,x2:e,y2:i,x:s,y:r})},Path.prototype.quadTo=function(t,o,e,i){var s=this.commands[this.commands.length-1].x,r=this.commands[this.commands.length-1].y,n=s+2/3*(t-s),h=r+2/3*(o-r),a=n+1/3*(e-s),l=h+1/3*(i-r);this.curveTo(n,h,a,l,e,i)},Path.prototype.closePath=Path.prototype.close=function(){this.commands.push(CLOSE_COMMAND)},Path.prototype.isClosed=function(){return 0!==this.commands.length&&this.commands[this.commands.length-1].type===CLOSE},Path.prototype.addRect=function(t,o,e,i){this.moveTo(t,o),this.lineTo(t+e,o),this.lineTo(t+e,o+i),this.lineTo(t,o+i),this.close()},Path.prototype.addRoundedRect=function(t,o,e,i,s,r){var n=1-.552,h=s,a=r,l=t,c=t+e,p=o,m=o+i;h=Math.min(h,.5*e),a=Math.min(a,.5*i),this.moveTo(l+h,p),h<.5*e&&this.lineTo(c-s,p),this.curveTo(c-h*n,p,c,p+a*n,c,p+a),a<.5*i&&this.lineTo(c,m-a),this.curveTo(c,m-a*n,c-h*n,m,c-h,m),h<.5*e&&this.lineTo(l+h,m),this.curveTo(l+h*n,m,l,m-a*n,l,m-a),a<.5*i&&this.lineTo(l,p+a),this.curveTo(l,p+a*n,l+h*n,p,l+h,p),this.close()},Path.prototype.addEllipse=function(t,o,e,i){var s=.5*KAPPA*e,r=.5*KAPPA*i,n=t+.5*e,h=o+.5*i,a=t+e,l=o+i;this.moveTo(t,h),this.curveTo(t,h-r,n-s,o,n,o),this.curveTo(n+s,o,a,h-r,a,h),this.curveTo(a,h+r,n+s,l,n,l),this.curveTo(n-s,l,t,h+r,t,h),this.close()},Path.prototype.addLine=function(t,o,e,i){this.moveTo(t,o),this.lineTo(e,i)},Path.prototype.addQuad=function(t,o,e,i,s,r,n,h){this.moveTo(t,o),this.lineTo(e,i),this.lineTo(s,r),this.lineTo(n,h),this.close()},Path.prototype.addArc=function(t,o,e,i,s,r,n){n=n||"pie";var h,a,l,c,p,m,u,d,y,f,v,T,P;for(h=e/2,a=i/2,l=math.radians(s),c=r,c>=360||c<=-360?(p=4,m=Math.PI/2,u=.5522847498307933,c<0&&(m=-m,u=-u)):(p=Math.ceil(Math.abs(c)/90),m=math.radians(c/p),u=4/3*Math.sin(m/2)/(1+Math.cos(m/2)),0===u&&(p=0)),"open"===n?d=0:"chord"===n?d=1:"pie"===n&&(d=2),(h<0||a<0)&&(p=d=-1),y=0;y<=p+d;)f=l,0===y?this.moveTo(t+Math.cos(f)*h,o+Math.sin(f)*a):y>p?y===p+d?this.close():this.lineTo(t,o):(f+=m*(y-1),v=Math.cos(f),T=Math.sin(f),P=[],P.push(t+(v-u*T)*h),P.push(o+(T+u*v)*a),f+=m,v=Math.cos(f),T=Math.sin(f),P.push(t+(v+u*T)*h),P.push(o+(T-u*v)*a),P.push(t+v*h),P.push(o+T*a),Path.prototype.curveTo.apply(this,P)),y+=1},Path.prototype.colorize=function(t){var o=arguments;("object"!=typeof t||t instanceof Color)&&(t={},void 0!==o[0]&&(t.fill=o[0]),void 0!==o[1]&&(t.stroke=o[1]),void 0!==o[2]&&(t.strokeWidth=o[2]));var e=this.clone();return t.fill&&(e.fill=Color.clone(t.fill)),t.stroke&&(e.stroke=Color.clone(t.stroke)),(t.strokeWidth||0===t.strokeWidth)&&(e.strokeWidth=t.strokeWidth),e},Path.prototype.desaturate=function(t){var o=this.clone(),e=o.fill,i=o.stroke;return e instanceof Color||(e=Color.parse(e)),i instanceof Color||(i=Color.parse(i)),o.fill=e.desaturate(t),o.stroke=i.desaturate(t),o},Path.prototype.invert=function(){var t=this.clone(),o=t.fill,e=t.stroke;return o instanceof Color||(o=Color.parse(o)),e instanceof Color||(e=Color.parse(e)),t.fill=o.invert(),t.stroke=e.invert(),t},Path.prototype.contours=function(){for(var t,o=[],e=[],i=0;i<this.commands.length;i+=1)t=this.commands[i],t.type===MOVETO?(0!==e.length&&o.push(e),e=[t]):e.push(t);return 0!==e.length&&o.push(e),o},Path.prototype.bounds=function(){if(this._bounds)return this._bounds;if(0===this.commands.length)return new Rect(0,0,0,0);for(var t,o,e,i,s,r,n=Number.MAX_VALUE,h=Number.MAX_VALUE,a=-Number.MAX_VALUE,l=-Number.MAX_VALUE,c=0;c<this.commands.length;c+=1)if(r=this.commands[c],r.type===MOVETO||r.type===LINETO)t=r.x,o=r.y,t<n&&(n=t),o<h&&(h=o),t>a&&(a=t),o>l&&(l=o),e=r;else if(r.type===CURVETO){var p=bezier.extrema(e.x,e.y,r.x1,r.y1,r.x2,r.y2,r.x,r.y);i=p.x+p.width,s=p.y+p.height,p.x<n&&(n=p.x),i>a&&(a=i),p.y<h&&(h=p.y),s>l&&(l=s),e=r}return new Rect(n,h,a-n,l-h)},Path.prototype.point=function(t,o){return void 0===o&&(o=bezier.segmentLengths(this.commands,!0,10)),bezier.point(this,t,o)},Path.prototype.points=function(t,o){var e=o&&void 0!==o.start?o.start:0,i=o&&void 0!==o.end?o.end:1;if(0===this.commands.length)return[];t=Math.round(t);var s;s=o&&o.closed?t>1?(i-e)/t:i-e:t>1?(i-e)/(t-1):i-e;for(var r=[],n=bezier.segmentLengths(this.commands,!0,10),h=0;h<t;h+=1)r.push(this.point(e+s*h,n));return r},Path.prototype.length=function(t){return void 0===t&&(t=20),bezier.length(this,t)},Path.prototype.contains=function(t,o,e){var i=this.points(void 0!==e?e:100);return geo.pointInPolygon(i,t,o)},Path.prototype.resampleByAmount=function(t,o){for(var e=o?this.contours():[this.commands],i=new Path([],this.fill,this.stroke,this.strokeWidth),s=0;s<e.length;s+=1){var r=new Path(e[s]),n={};r.isClosed()&&(n.closed=!0);for(var h=r.points(t,n),a=0;a<h.length;a+=1)0===a?i.moveTo(h[a].x,h[a].y):i.lineTo(h[a].x,h[a].y);r.isClosed()&&i.close()}return i},Path.prototype.resampleByLength=function(t,o){o=o||{};var e=o.force||!1,i=this.contours(),s=[];e||(t=Math.max(t,1));for(var r=0;r<i.length;r+=1){var n=new Path(i[r]),h=n.length(),a=Math.ceil(h/t);s=s.concat(n.resampleByAmount(a).commands)}return new Path(s,this.fill,this.stroke,this.strokeWidth)},Path.prototype.toPathData=function(){var t,o,e,i,s,r,n,h,a;for(o="",t=0;t<this.commands.length;t+=1)e=this.commands[t],void 0!==e.x&&(i=math.clamp(e.x,-9999,9999),s=math.clamp(e.y,-9999,9999)),void 0!==e.x1&&(r=math.clamp(e.x1,-9999,9999),n=math.clamp(e.y1,-9999,9999)),void 0!==e.x2&&(h=math.clamp(e.x2,-9999,9999),a=math.clamp(e.y2,-9999,9999)),e.type===MOVETO?isNaN(i)||isNaN(s)||(o+="M"+i+" "+s):e.type===LINETO?isNaN(i)||isNaN(s)||(o+="L"+i+" "+s):e.type===QUADTO?isNaN(i)||isNaN(s)||isNaN(r)||isNaN(n)||(o+="Q"+r+" "+n+" "+i+" "+s):e.type===CURVETO?isNaN(i)||isNaN(s)||isNaN(r)||isNaN(n)||isNaN(h)||isNaN(a)||(o+="C"+r+" "+n+" "+h+" "+a+" "+i+" "+s):e.type===CLOSE&&(o+="Z");return o},Path.prototype.toSVG=function(){var t='<path d="';t+=this.toPathData(),t+='"';var o,e,i="";this.fill&&(o=Color.parse(this.fill),o.a<1&&(e=o.a),o=Color.toHex(o).substring(0,7)),"black"!==o&&"#000000"!==o&&(i+=null===o||void 0===o?"fill:none;":"fill:"+o+";"),void 0!==e&&(i+="fill-opacity:"+e+";");var s,r;return this.stroke&&(s=Color.parse(this.stroke),s.a<1&&(r=s.a),s=Color.toHex(s).substring(0,7)),s&&(i+="stroke:"+s+";",i+="stroke-width:"+this.strokeWidth+";"),void 0!==r&&(i+="stroke-opacity:"+r+";"),i&&(t+=' style="'+i+'"'),t+="/>"},Path.prototype.draw=function(t){var o,e,i;for(t.beginPath(),o=this.commands.length,e=0;e<o;e+=1)i=this.commands[e],i.type===MOVETO?t.moveTo(i.x,i.y):i.type===LINETO?t.lineTo(i.x,i.y):i.type===QUADTO?t.quadraticCurveTo(i.x1,i.y1,i.x,i.y):i.type===CURVETO?t.bezierCurveTo(i.x1,i.y1,i.x2,i.y2,i.x,i.y):i.type===CLOSE&&t.closePath();null!==this.fill&&void 0!==this.fill&&(t.fillStyle=Color.toCSS(this.fill),t.fill()),null!==this.stroke&&void 0!==this.stroke&&null!==this.strokeWidth&&this.strokeWidth>0&&(t.strokeStyle=Color.toCSS(this.stroke),t.lineWidth=this.strokeWidth,t.stroke())},Path.combine=function(){for(var t,o=Array.apply(null,arguments),e=flatten(o),i=[],s=0;s<e.length;s+=1)t=e[s],t.commands?i=i.concat(t.commands):t.shapes&&(i=i.concat(Path.combine(t.shapes).commands));return new Path(i)},module.exports=Path;

},{"../objects/color":32,"../objects/rect":37,"../util/bezier":42,"../util/geo":44,"../util/math":46,"lodash.flatten":3}],36:[function(require,module,exports){
"use strict";var Point=function(t,n){this.x=void 0!==t?t:0,this.y=void 0!==n?n:0};Object.defineProperty(Point.prototype,"xy",{get:function(){return[this.x,this.y]}}),Point.ZERO=new Point(0,0),Point.read=function(t,n){if(2===arguments.length)return new Point(t,n);var i=t;return i instanceof Point?i:"number"==typeof i?new Point(i,i):Array.isArray(i)?0===i.length?Point.ZERO:(t=i[0],n=i.length>1?i[1]:t,new Point(t,n)):void 0!==i.x&&void 0!==i.y?new Point(i.x,i.y):Point.ZERO},Point.prototype.clone=function(){return new Point(this.x,this.y)},Point.prototype.add=function(t){return new Point(this.x+t.x,this.y+t.y)},Point.prototype.subtract=Point.prototype.sub=function(t){return new Point(this.x-t.x,this.y-t.y)},Point.prototype.divide=function(t){return new Point(this.x/t,this.y/t)},Point.prototype.multiply=function(t){return new Point(this.x*t,this.y*t)},Point.prototype.magnitude=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Point.prototype.magnitudeSquared=function(){return this.x*this.x+this.y*this.y},Point.prototype.heading=function(){return Math.atan2(this.y,this.x)},Point.prototype.distanceTo=function(t){var n=this.x-t.x,i=this.y-t.y;return Math.sqrt(n*n+i*i)},Point.prototype.normalize=function(){var t=this.magnitude();return 0!==t?this.divide(t):Point.ZERO},Point.prototype.limit=function(t){return this.magnitudeSquared()>t*t?this.normalize().multiply(t):this},Point.prototype.translate=function(t,n){return new Point(this.x+t,this.y+n)},Point.prototype.scale=function(t,n){return n=void 0!==n?n:t,new Point(this.x*t,this.y*n)},Point.prototype.toString=function(){return"["+this.x+", "+this.y+"]"},module.exports=Point;

},{}],37:[function(require,module,exports){
"use strict";var Point=require("../objects/point"),Rect=function(t,i,h,e){this.x=void 0!==t?t:0,this.y=void 0!==i?i:0,this.width=void 0!==h?h:0,this.height=void 0!==e?e:0};Object.defineProperty(Rect.prototype,"xywh",{get:function(){return[this.x,this.y,this.width,this.height]}}),Rect.prototype.normalize=function(){var t=this.x,i=this.y,h=this.width,e=this.height;return h<0&&(t+=h,h=-h),e<0&&(i+=e,e=-e),new Rect(t,i,h,e)},Rect.prototype.containsPoint=function(t,i){return 1===arguments.length&&(i=t.y,t=t.x),t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height},Rect.prototype.containsRect=function(t){return t.x>=this.x&&t.x+t.width<=this.x+this.width&&t.y>=this.y&&t.y+t.height<=this.y+this.height},Rect.prototype.grow=function(t,i){var h=this.x-t,e=this.y-i,s=this.width+2*t,n=this.height+2*i;return new Rect(h,e,s,n)},Rect.prototype.unite=function(t){var i=Math.min(this.x,t.x),h=Math.min(this.y,t.y),e=Math.max(this.x+this.width,t.x+t.width)-i,s=Math.max(this.y+this.height,t.y+t.height)-h;return new Rect(i,h,e,s)},Rect.prototype.addPoint=function(t,i){var h,e,s=this.x,n=this.y,o=this.width,r=this.height;return t<this.x?(h=this.x-t,s=t,o+=h):t>this.x+this.width&&(h=t-(this.x+this.width),o+=h),i<this.y?(e=this.y-i,n=i,r+=e):i>this.y+this.height&&(e=i-(this.y+this.height),r+=e),new Rect(s,n,o,r)},Rect.prototype.centerPoint=function(){return new Point(this.x+this.width/2,this.y+this.height/2)},module.exports=Rect;

},{"../objects/point":36}],38:[function(require,module,exports){
"use strict";var Color=require("../objects/color"),Rect=require("../objects/rect"),Transform=require("../objects/transform"),_dummyContext=null,GText=function(t){var e,i=Array.prototype.slice.call(arguments,1),n=arguments[1],o=arguments[2],s=arguments[arguments.length-1];this.text=String(t),"number"==typeof n?(this.x=n,this.y=o,i=i.slice(2)):Array.isArray(n)?(this.x=n[0],this.y=n[1],i=i.slice(1)):"object"==typeof n?(this.x=void 0!==n.x?n.x:0,this.y=void 0!==n.y?n.y:0,i=i.slice(1)):(this.x=0,this.y=0),"object"==typeof s?(e=s,n!==s&&(i=i.slice(0,i.length-1))):e={},i.length?this.fontFamily=i.shift():this.fontFamily=e.fontFamily||e.fontName||e.font||"sans-serif",i.length?this.fontSize=i.shift():this.fontSize=e.fontSize||24,i.length?this.textAlign=i.shift():this.textAlign=e.align||e.textAlign||"left",i.length?this.fill=i.shift():this.fill=e.fill||"black",this.transform=new Transform};GText.prototype.clone=function(){var t=new GText;return t.text=this.text,t.x=this.x,t.y=this.y,t.fontFamily=this.fontFamily,t.fontSize=this.fontSize,t.textAlign=this.textAlign,t.fill=Color.clone(this.fill),t.transform=this.transform,t},GText._getDummyContext=function(){return _dummyContext||(_dummyContext="undefined"!=typeof document?document.createElement("canvas").getContext("2d"):{font:"10px sans-serif",measureText:function(t){var e=parseFloat(this.font);return{width:t.length*e*.6}}}),_dummyContext},GText.prototype._getFont=function(){return this.fontSize+"px "+this.fontFamily},GText.prototype.colorize=function(t){var e=this.clone();return e.fill=Color.clone(t),e},GText.prototype.draw=function(t){t.save(),t.font=this._getFont(),t.textAlign=this.textAlign;var e=this.transform.m;t.transform(e[0],e[1],e[3],e[4],e[6],e[7]),t.fillStyle=Color.toCSS(this.fill),t.fillText(this.text,this.x,this.y),t.restore()},GText.prototype.bounds=function(){var t,e=GText._getDummyContext(),i=this.x;return e.font=this._getFont(),t=e.measureText(this.text),"center"===this.textAlign?i=this.x-t.width/2:"right"===this.textAlign&&(i=this.x-t.width),new Rect(i,this.y-this.fontSize,t.width,1.2*this.fontSize)},GText.prototype.toSVG=function(){var t="<text";t+=' x="'+this.x+'"',t+=' y="'+this.y+'"',t+=' font-family="'+this.fontFamily+'"',t+=' font-size="'+this.fontSize+'"';var e;return"left"===this.textAlign?e="start":"center"===this.textAlign?e="middle":"right"===this.textAlign&&(e="end"),t+=' text-anchor="'+e+'"',"black"!==this.fill&&(t+=' fill="'+Color.toCSS(this.fill)+'"'),t+=">",t+=this.text,t+="</text>"},module.exports=GText;

},{"../objects/color":32,"../objects/rect":37,"../objects/transform":39}],39:[function(require,module,exports){
"use strict";var bezier=require("../util/bezier"),math=require("../util/math"),Group=require("../objects/group"),Path=require("../objects/path"),Point=require("../objects/point"),MOVETO=bezier.MOVETO,LINETO=bezier.LINETO,QUADTO=bezier.QUADTO,CURVETO=bezier.CURVETO,CLOSE=bezier.CLOSE,Transform=function(r){void 0!==r?this.m=r:this.m=[1,0,0,0,1,0,0,0,1]};Transform.IDENTITY=new Transform,Transform.identity=function(){return new Transform},Transform._mmult=function(r,t){return void 0!==r.m&&(r=r.m),void 0!==t.m&&(t=t.m),new Transform([r[0]*t[0]+r[1]*t[3],r[0]*t[1]+r[1]*t[4],0,r[3]*t[0]+r[4]*t[3],r[3]*t[1]+r[4]*t[4],0,r[6]*t[0]+r[7]*t[3]+t[6],r[6]*t[1]+r[7]*t[4]+t[7],1])},Transform.prototype.isIdentity=function(){var r=this.m;return 1===r[0]&&0===r[1]&&0===r[2]&&0===r[3]&&1===r[4]&&0===r[5]&&0===r[6]&&0===r[7]&&1===r[8]},Transform.prototype.prepend=function(r){return Transform._mmult(this.m,r.m)},Transform.prototype.append=function(r){return Transform._mmult(r.m,this.m)},Transform.prototype.inverse=function(){var r=this.m,t=r[0]*r[4]-r[1]*r[3];return new Transform([r[4]/t,-r[1]/t,0,-r[3]/t,r[0]/t,0,(r[3]*r[7]-r[4]*r[6])/t,-(r[0]*r[7]-r[1]*r[6])/t,1])},Transform.prototype.scale=function(r,t){return void 0===t&&(t=r),Transform._mmult([r,0,0,0,t,0,0,0,1],this.m)},Transform.prototype.translate=function(r,t){return Transform._mmult([1,0,0,0,1,0,r,t,1],this.m)},Transform.prototype.rotate=function(r){var t=Math.cos(math.radians(r)),n=Math.sin(math.radians(r));return Transform._mmult([t,n,0,-n,t,0,0,0,1],this.m)},Transform.prototype.skew=function(r,t){var n=Math.PI*r/180,o=Math.PI*t/180;return Transform._mmult([1,Math.tan(o),0,-Math.tan(n),1,0,0,0,1],this.m)},Transform.prototype.transformPoint=function(r){var t=r.x,n=r.y,o=this.m;return new Point(t*o[0]+n*o[3]+o[6],t*o[1]+n*o[4]+o[7])},Transform.prototype.transformPoints=function(r){for(var t=[],n=0;n<r.length;n+=1)t.push(this.transformPoint(r[n]));return t},Transform.prototype.transformPath=function(r){var t=this.m,n=[];n.length=r.commands.length;for(var o=0,e=r.commands.length;o<e;o++){var s=r.commands[o];switch(s.type){case MOVETO:case LINETO:n[o]={type:s.type,x:s.x*t[0]+s.y*t[3]+t[6],y:s.x*t[1]+s.y*t[4]+t[7]};break;case QUADTO:n[o]={type:QUADTO,x:s.x*t[0]+s.y*t[3]+t[6],y:s.x*t[1]+s.y*t[4]+t[7],x1:s.x1*t[0]+s.y1*t[3]+t[6],y1:s.x1*t[1]+s.y1*t[4]+t[7]};break;case CURVETO:n[o]={type:CURVETO,x:s.x*t[0]+s.y*t[3]+t[6],y:s.x*t[1]+s.y*t[4]+t[7],x1:s.x1*t[0]+s.y1*t[3]+t[6],y1:s.x1*t[1]+s.y1*t[4]+t[7],x2:s.x2*t[0]+s.y2*t[3]+t[6],y2:s.x2*t[1]+s.y2*t[4]+t[7]};break;case CLOSE:n[o]={type:CLOSE};break;default:throw new Error("Unknown command type "+s)}}return new Path(n,r.fill,r.stroke,r.strokeWidth)},Transform.prototype.transformText=function(r){var t=r.clone();return t.transform=this.append(t.transform),t},Transform.prototype.transformGroup=function(r){for(var t=[],n=0;n<r.shapes.length;n+=1)t.push(this.transformShape(r.shapes[n]));return new Group(t)},Transform.prototype.transformShape=function(r){var t;if(r.shapes)t=this.transformGroup;else if(r.commands)t=this.transformPath;else if(r.text)t=this.transformText;else if(void 0!==r.x&&void 0!==r.y)t=this.transformPoint;else{if(void 0!==r._transform)return r._transform(this.m);if(!(Array.isArray(r)&&r.length>0))throw new Error("Don't know how to transform "+r);if(void 0===r[0].x||void 0===r[0].y){for(var n=[],o=0;o<r.length;o+=1)n.push(this.transformShape(r[o]));return n}t=this.transformPoints}return t.call(this,r)},module.exports=Transform;

},{"../objects/group":33,"../objects/path":35,"../objects/point":36,"../util/bezier":42,"../util/math":46}],40:[function(require,module,exports){
"use strict";var Point=require("../objects/point"),Transform=require("../objects/transform"),Transformable={translate:function(r){r||(r=Point.ZERO);var t=(new Transform).translate(r.x,r.y);return t.transformShape(this)},scale:function(r,t){t||(t=Point.ZERO);var a,n;"number"==typeof r?(a=r,n=r):(a=r.x,n=r.y);var e=new Transform;return e=e.translate(t.x,t.y),e=e.scale(a,n),e=e.translate(-t.x,-t.y),e.transformShape(this)},rotate:function(r,t){t||(t=Point.ZERO);var a=new Transform;return a=a.translate(t.x,t.y),a=a.rotate(r),a=a.translate(-t.x,-t.y),a.transformShape(this)},skew:function(r,t){t||(t=Point.ZERO);var a=new Transform;return a=a.translate(t.x,t.y),a=a.skew(r.x,r.y),a=a.translate(-t.x,-t.y),a.transformShape(this)}};module.exports=Transformable;

},{"../objects/point":36,"../objects/transform":39}],41:[function(require,module,exports){
"use strict";var Vec3=function(t,i,e){this.x=void 0===t?0:t,this.y=void 0===i?0:i,this.z=void 0===e?0:e};Vec3.ZERO=new Vec3(0,0,0),Vec3.up=function(){return new Vec3(0,1,0)},Vec3.dot=function(t,i){return t.x*i.x+t.y*i.y+t.z*i.z},Vec3.cross=function(t,i){return new Vec3(t.y*i.z-t.z*i.y,t.z*i.x-t.x*i.z,t.x*i.y-t.y*i.x)},Vec3.prototype.toString=function(){return"["+this.x+", "+this.y+", "+this.z+"]"},Vec3.prototype.toArray=function(){var t=[];return t.push(this.x),t.push(this.y),t.push(this.z),t},Vec3.prototype.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},Vec3.prototype.normalize=function(){var t,i;return t=this.getLength(),0===t?this:(i=1/t,new Vec3(this.x*i,this.y*i,this.z*i))},Vec3.prototype.add=function(t){return new Vec3(this.x+t.x,this.y+t.y,this.z+t.z)},Vec3.prototype.subtract=function(t){return new Vec3(this.x-t.x,this.y-t.y,this.z-t.z)},Vec3.prototype.transform=function(t){var i,e,s,h,n;return n=t,i=this.x*n.m[0]+this.y*n.m[4]+this.z*n.m[8]+n.m[12],e=this.x*n.m[1]+this.y*n.m[5]+this.z*n.m[9]+n.m[13],s=this.x*n.m[2]+this.y*n.m[6]+this.z*n.m[10]+n.m[14],h=this.x*n.m[3]+this.y*n.m[7]+this.z*n.m[11]+n.m[15],new Vec3(i/h,e/h,s/h)},module.exports=Vec3;

},{}],42:[function(require,module,exports){
"use strict";function fuzzyCompare(e,t){return Math.abs(e-t)<=1e-12*Math.min(Math.abs(e),Math.abs(t))}function coefficients(e){var t,r,n,i,o;return t=1-e,n=t*t,i=e*e,o=i*e,r=n*t,n*=3*e,i*=3*t,[r,n,i,o]}function pointAt(e,t,r,n,i,o,a,u,h){var s,y,c,z,b;return b=coefficients(h),s=b[0],y=b[1],c=b[2],z=b[3],{x:s*e+y*r+c*i+z*a,y:s*t+y*n+c*o+z*u}}var math=require("../util/math"),Point=require("../objects/point"),Rect=require("../objects/rect"),bezier={},MOVETO=bezier.MOVETO="M",LINETO=bezier.LINETO="L";bezier.QUADTO="Q";var CURVETO=bezier.CURVETO="C",CLOSE=bezier.CLOSE="Z";bezier.linePoint=function(e,t,r,n,i){var o=t+e*(n-t),a=r+e*(i-r);return{type:LINETO,x:o,y:a}},bezier.lineLength=function(e,t,r,n){var i=Math.pow(Math.abs(e-r),2),o=Math.pow(Math.abs(t-n),2);return Math.sqrt(i+o)},bezier.curvePoint=function(e,t,r,n,i,o,a,u,h){var s=1-e,y=t*s+n*e,c=r*s+i*e,z=n*s+o*e,b=i*s+a*e,m=o*s+u*e,f=a*s+h*e,x=y*s+z*e,p=c*s+b*e,O=z*s+m*e,v=b*s+f*e,M=x*s+O*e,g=p*s+v*e;return{type:CURVETO,x1:x,y1:p,x2:O,y2:v,x:M,y:g}},bezier.curveLength=function(e,t,r,n,i,o,a,u,h){void 0===h&&(h=20);var s,y,c,z=0,b=e,m=t;for(s=0;s<h;s+=1)y=(s+1)/h,c=bezier.curvePoint(y,e,t,r,n,i,o,a,u),z+=Math.sqrt(Math.pow(Math.abs(b-c.x),2)+Math.pow(Math.abs(m-c.y),2)),b=c.x,m=c.y;return z},bezier.segmentLengths=function(e,t,r){t=void 0!==t&&t,void 0===r&&(r=20);var n,i,o,a,u,h,s,y,c,z;for(c=[],n=0;n<e.length;n+=1)i=e[n],o=i.type,0===n?(a=i.x,u=i.y):o===MOVETO?(a=i.x,u=i.y,c.push(0)):o===CLOSE?c.push(bezier.lineLength(h,s,a,u)):o===LINETO?c.push(bezier.lineLength(h,s,i.x,i.y)):o===CURVETO&&c.push(bezier.curveLength(h,s,i.x1,i.y1,i.x2,i.y2,i.x,i.y,r)),o!==CLOSE&&(h=i.x,s=i.y);if(t===!0){if(y=math.sum(c),z=[],z.length=c.length,y>0)for(n=0;n<c.length;n+=1)z[n]=c[n]/y;else for(n=0;n<c.length;n+=1)z[n]=0;return z}return c},bezier.length=function(e,t){return t=t||20,math.sum(bezier.segmentLengths(e.commands,!1,t))},bezier._locate=function(e,t,r){var n,i,o;for(void 0===r&&(r=bezier.segmentLengths(e.commands,!0)),n=0;n<e.commands.length&&(i=e.commands[n],0!==n&&i.type!==MOVETO||(o=new Point(i.x,i.y)),!(t<=r[n]||n===r.length-1));n+=1)t-=r[n];return 0!==r[n]&&(t/=r[n]),n===r.length-1&&0===r[n]&&(n-=1),[n,t,o]},bezier.point=function(e,t,r){var n,i,o,a,u,h;return n=bezier._locate(e,t,r),i=n[0],t=n[1],o=n[2],a=e.commands[i].x,u=e.commands[i].y,h=e.commands[i+1],h.type===LINETO||h.type===CLOSE?h=h.type===CLOSE?bezier.linePoint(t,a,u,o.x,o.y):bezier.linePoint(t,a,u,h.x,h.y):h.type===CURVETO&&(h=bezier.curvePoint(t,a,u,h.x1,h.y1,h.x2,h.y2,h.x,h.y)),h},bezier.extrema=function(e,t,r,n,i,o,a,u){function h(h){if(h>=0&&h<=1){var b=pointAt(e,t,r,n,i,o,a,u,h);b.x<s?s=b.x:b.x>y&&(y=b.x),b.y<c?c=b.y:b.y>z&&(z=b.y)}}var s,y,c,z,b,m,f,x,p,O,v,M,g,l;return e<a?(s=e,y=a):(s=a,y=e),t<u?(c=t,z=u):(c=u,z=t),b=3*(-e+3*r-3*i+a),m=6*(e-2*r+i),f=3*(-e+r),fuzzyCompare(b+1,1)?fuzzyCompare(m+1,1)||h(-f/m):(g=m*m-4*b*f,g>=0&&(v=Math.sqrt(g),M=1/(2*b),h((-m+v)*M),h((-m-v)*M))),x=3*(-t+3*n-3*o+u),p=6*(t-2*n+o),O=3*(-t+n),fuzzyCompare(x+1,1)?fuzzyCompare(p+1,1)||h(-O/p):(l=p*p-4*x*O,l>0&&(v=Math.sqrt(l),M=1/(2*x),h((-p+v)*M),h((-p-v)*M))),new Rect(s,c,y-s,z-c)},module.exports=bezier;

},{"../objects/point":36,"../objects/rect":37,"../util/math":46}],43:[function(require,module,exports){
"use strict";function toHex(e){var r;return 0===e?"00":(r=e.toString(16).toUpperCase(),r.length<2&&(r="0"+r),r)}var color={};color.namedColors={lightpink:[1,.71,.76],pink:[1,.75,.8],crimson:[.86,.08,.24],lavenderblush:[1,.94,.96],palevioletred:[.86,.44,.58],hotpink:[1,.41,.71],deeppink:[1,.08,.58],mediumvioletred:[.78,.08,.52],orchid:[.85,.44,.84],thistle:[.85,.75,.85],plum:[.87,.63,.87],violet:[.93,.51,.93],fuchsia:[1,0,1],darkmagenta:[.55,0,.55],purple:[.5,0,.5],mediumorchid:[.73,.33,.83],darkviolet:[.58,0,.83],darkorchid:[.6,.2,.8],indigo:[.29,0,.51],blueviolet:[.54,.17,.89],mediumpurple:[.58,.44,.86],mediumslateblue:[.48,.41,.93],slateblue:[.42,.35,.8],darkslateblue:[.28,.24,.55],ghostwhite:[.97,.97,1],lavender:[.9,.9,.98],blue:[0,0,1],mediumblue:[0,0,.8],darkblue:[0,0,.55],navy:[0,0,.5],midnightblue:[.1,.1,.44],royalblue:[.25,.41,.88],cornflowerblue:[.39,.58,.93],lightsteelblue:[.69,.77,.87],lightslategray:[.47,.53,.6],slategray:[.44,.5,.56],dodgerblue:[.12,.56,1],aliceblue:[.94,.97,1],steelblue:[.27,.51,.71],lightskyblue:[.53,.81,.98],skyblue:[.53,.81,.92],deepskyblue:[0,.75,1],lightblue:[.68,.85,.9],powderblue:[.69,.88,.9],cadetblue:[.37,.62,.63],darkturquoise:[0,.81,.82],azure:[.94,1,1],lightcyan:[.88,1,1],paleturquoise:[.69,.93,.93],aqua:[0,1,1],darkcyan:[0,.55,.55],teal:[0,.5,.5],darkslategray:[.18,.31,.31],mediumturquoise:[.28,.82,.8],lightseagreen:[.13,.7,.67],turquoise:[.25,.88,.82],aquamarine:[.5,1,.83],mediumaquamarine:[.4,.8,.67],mediumspringgreen:[0,.98,.6],mintcream:[.96,1,.98],springgreen:[0,1,.5],mediumseagreen:[.24,.7,.44],seagreen:[.18,.55,.34],honeydew:[.94,1,.94],darkseagreen:[.56,.74,.56],palegreen:[.6,.98,.6],lightgreen:[.56,.93,.56],limegreen:[.2,.8,.2],lime:[0,1,0],forestgreen:[.13,.55,.13],green:[0,.5,0],darkgreen:[0,.39,0],lawngreen:[.49,.99,0],chartreuse:[.5,1,0],greenyellow:[.68,1,.18],darkolivegreen:[.33,.42,.18],yellowgreen:[.6,.8,.2],olivedrab:[.42,.56,.14],ivory:[1,1,.94],beige:[.96,.96,.86],lightyellow:[1,1,.88],lightgoldenrodyellow:[.98,.98,.82],yellow:[1,1,0],olive:[.5,.5,0],darkkhaki:[.74,.72,.42],palegoldenrod:[.93,.91,.67],lemonchiffon:[1,.98,.8],khaki:[.94,.9,.55],gold:[1,.84,0],cornsilk:[1,.97,.86],goldenrod:[.85,.65,.13],darkgoldenrod:[.72,.53,.04],floralwhite:[1,.98,.94],oldlace:[.99,.96,.9],wheat:[.96,.87,.07],orange:[1,.65,0],moccasin:[1,.89,.71],papayawhip:[1,.94,.84],blanchedalmond:[1,.92,.8],navajowhite:[1,.87,.68],antiquewhite:[.98,.92,.84],tan:[.82,.71,.55],burlywood:[.87,.72,.53],darkorange:[1,.55,0],bisque:[1,.89,.77],linen:[.98,.94,.9],peru:[.8,.52,.25],peachpuff:[1,.85,.73],sandybrown:[.96,.64,.38],chocolate:[.82,.41,.12],saddlebrown:[.55,.27,.07],seashell:[1,.96,.93],sienna:[.63,.32,.18],lightsalmon:[1,.63,.48],coral:[1,.5,.31],orangered:[1,.27,0],darksalmon:[.91,.59,.48],tomato:[1,.39,.28],salmon:[.98,.5,.45],mistyrose:[1,.89,.88],lightcoral:[.94,.5,.5],snow:[1,.98,.98],rosybrown:[.74,.56,.56],indianred:[.8,.36,.36],red:[1,0,0],brown:[.65,.16,.16],firebrick:[.7,.13,.13],darkred:[.55,0,0],maroon:[.5,0,0],white:[1,1,1],whitesmoke:[.96,.96,.96],gainsboro:[.86,.86,.86],lightgrey:[.83,.83,.83],silver:[.75,.75,.75],darkgray:[.66,.66,.66],gray:[.5,.5,.5],grey:[.5,.5,.5],dimgray:[.41,.41,.41],dimgrey:[.41,.41,.41],black:[0,0,0],cyan:[0,.68,.94],transparent:[0,0,0,0],bark:[.25,.19,.13]},color.rgb2hex=function(e,r,a){return"#"+toHex(Math.round(255*e))+toHex(Math.round(255*r))+toHex(Math.round(255*a))},color.rgba2hex=function(e,r,a,o){return"#"+toHex(Math.round(255*e))+toHex(Math.round(255*r))+toHex(Math.round(255*a))+toHex(Math.round(255*o))},color.hex2rgb=function(e){var r,a,o;if(e=e.replace(/^#/,""),3!==e.length&&6!==e.length||!/^[0-9a-fA-F]*$/.test(e))throw new Error("Invalid hex value: #"+e);return 3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),r=parseInt(e.substr(0,2),16)/255,a=parseInt(e.substr(2,2),16)/255,o=parseInt(e.substr(4,2),16)/255,[r,a,o]},color.rgb2hsb=function(e,r,a){var o=0,l=0,n=Math.max(e,r,a),t=n-Math.min(e,r,a);return 0!==n&&(l=t/n),0!==l&&(o=e===n?0+(r-a)/t:r===n?2+(a-e)/t:4+(e-r)/t),o*=60/360,o<0&&(o+=1),[o,l,n]},color.hsb2rgb=function(e,r,a){if(0===r)return[a,a,a];e=e%1*6;var o=Math.floor(e),l=e-o,n=a*(1-r),t=a*(1-r*l),i=a*(1-r*(1-l));return o>4?[a,n,t]:[[a,i,n],[t,a,n],[n,a,i],[n,t,a],[i,n,a]][parseInt(o,10)]},color.rgb2hsl=function(e,r,a){var o,l,n,t=Math.min(e,r,a),i=Math.max(e,r,a),u=i-t;return i===t?o=0:e===i?o=(r-a)/u:r===i?o=2+(a-e)/u:a===i&&(o=4+(e-r)/u),o=Math.min(60*o,360),o<0&&(o+=360),n=(t+i)/2,l=i===t?0:n<=.5?u/(i+t):u/(2-i-t),[o/360,l,n]},color.hsl2rgb=function(e,r,a){var o,l,n,t,i;if(0===r)return i=a,[i,i,i];l=a<.5?a*(1+r):a+r-a*r,o=2*a-l,t=[0,0,0];for(var u=0;u<3;u++)n=e+1/3*-(u-1),n<0&&(n+=1),n>1&&(n-=1),i=6*n<1?o+6*(l-o)*n:2*n<1?l:3*n<2?o+(l-o)*(2/3-n)*6:o,t[u]=i;return t},module.exports=color;

},{}],44:[function(require,module,exports){
"use strict";var math=require("../util/math"),Point=require("../objects/point"),geo={};geo.angle=function(t,n,e,o){return math.degrees(Math.atan2(o-n,e-t))},geo.distance=function(t,n,e,o){return Math.sqrt(Math.pow(e-t,2)+Math.pow(o-n,2))},geo.coordinates=function(t,n,e,o){var a=t+Math.cos(math.radians(e))*o,r=n+Math.sin(math.radians(e))*o;return new Point(a,r)},geo.pointInPolygon=function(t,n,e){var o,a,r,i,u,h,s=!1,g=t.length;for(o=0;o<g;o+=1)a=o<g-1?o+1:0,r=t[o].x,i=t[o].y,u=t[a].x,h=t[a].y,(i<e&&h>=e||h<e&&i>=e)&&r+(e-i)/(h-i)*(u-r)<n&&(s=!s);return s},module.exports=geo;

},{"../objects/point":36,"../util/math":46}],45:[function(require,module,exports){
"use strict";exports.defineAlias=function(t,e,n){Object.defineProperty(t.prototype,n,{get:function(){return this[e]},set:function(t){this[e]=t}})},exports.defineGetter=function(t,e,n){Object.defineProperty(t.prototype,e,{get:n})};

},{}],46:[function(require,module,exports){
"use strict";function _fade(r){return r*r*r*(r*(6*r-15)+10)}function _grad(r,t,n,a){var e,o,u;return e=15&r,o=e<8?t:n,u=e<4?n:12===e||14===e?t:a,(0===(1&e)?o:-o)+(0===(2&e)?u:-u)}function _scale(r){return(1+r)/2}var math={};math.sum=function(r){var t,n=r.length,a=0;for(t=0;t<n;t+=1)a+=r[t];return a},math.round=function(r,t){return t?Math.round(r*Math.pow(10,t))/Math.pow(10,t):Math.round(r)},math.sign=function(r){return r<0?-1:r>0?1:0},math.degrees=function(r){return 180*r/Math.PI},math.radians=function(r){return r/180*Math.PI},math.clamp=function(r,t,n){return t<n?r<t?t:r>n?n:r:r<n?n:r>t?t:r},math.snap=function(r,t,n){return n=void 0!==n?n:1,r*(1-n)+n*Math.round(r/t)*t},math.dot=function(r,t){var n,a=Math.min(r.length,t.length),e=0;for(n=0;n<a;n+=1)e+=r[n]*t[n];return e};var _lerp=math.mix=math.lerp=function(r,t,n,a){if(a){if(n<0)return r;if(n>1)return t}return r+(t-r)*n},_permutation=function(){var r,t,n;for(r=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],t=new Uint8Array(512),n=0;n<256;n+=1)t[256+n]=t[n]=r[n];return t}();math.noise=function(r,t,n){var a=_permutation,e=255&Math.floor(r),o=255&Math.floor(t),u=255&Math.floor(n);r-=Math.floor(r),t-=Math.floor(t),n-=Math.floor(n);var f=_fade(r),h=_fade(t),i=_fade(n),_=a[e]+o,d=a[_]+u,l=a[_+1]+u,m=a[e+1]+o,c=a[m]+u,p=a[m+1]+u;return _scale(_lerp(_lerp(_lerp(_grad(a[d],r,t,n),_grad(a[c],r-1,t,n),f),_lerp(_grad(a[l],r,t-1,n),_grad(a[p],r-1,t-1,n),f),h),_lerp(_lerp(_grad(a[d+1],r,t,n-1),_grad(a[c+1],r-1,t,n-1),f),_lerp(_grad(a[l+1],r,t-1,n-1),_grad(a[p+1],r-1,t-1,n-1),f),h),i))},module.exports=math;

},{}],47:[function(require,module,exports){
"use strict";function generator(r){if(r<0){for(var e=generator(Math.abs(r)),t=0;t<23;t+=1)e();return generator(e(0,1e4))}return function(e,t){e=e||0,t=t||1,r=(9301*r+49297)%233280;var n=r/233280;return e+n*(t-e)}}exports.generator=generator;

},{}],48:[function(require,module,exports){
"use strict";var xmldom=require("xmldom"),Color=require("../objects/color"),Group=require("../objects/group"),Path=require("../objects/path"),Point=require("../objects/point"),Transform=require("../objects/transform"),trim=function(t){return t.replace(/^\s+|\s+$/g,"")},compressSpaces=function(t){return t.replace(/[\s\r\t\n]+/gm," ")},toNumberArray=function(t){var e,r=trim(compressSpaces((t||"").replace(/,/g," "))).split(" ");for(e=0;e<r.length;e+=1)r[e]=parseFloat(r[e]);return r},readSvgAttributes=function(t,e){var r,a,o,n,i,s,c,l,u,d,p,m;m=e?Object.create(e):{},l=[],u={},u.translate=function(t){var e=toNumberArray(t),r=e[0],a=e[1]||0;return(new Transform).translate(r,a)},u.scale=function(t){var e=toNumberArray(t),r=e[0],a=e[1]||r;return(new Transform).scale(r,a)},u.rotate=function(t){var e,r=toNumberArray(t),a=r[0],o=r[1]||0,n=r[2]||0;return e=new Transform,e=e.translate(o,n),e=e.rotate(a),e=e.translate(-o,-n)},u.matrix=function(t){var e=toNumberArray(t);return new Transform([e[0],e[1],0,e[2],e[3],0,e[4],e[5],1])};for(var h,v,g,f,b,y,A,C=0;C<t.attributes.length;C+=1)switch(h=t.attributes[C],h.nodeName){case"transform":for(v=trim(compressSpaces(h.nodeValue)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),p=0;p<v.length;p+=1)g=trim(v[p].split("(")[0]),f=v[p].split("(")[1].replace(")",""),d=u[g](f),l.push(d);break;case"visibility":break;case"stroke-linecap":break;case"stroke-linejoin":break;case"stroke-miterlimit":break;case"stroke-width":i=parseFloat(h.nodeValue);break;case"stroke-opacity":n=parseFloat(h.nodeValue);break;case"fill-opacity":a=parseFloat(h.nodeValue);break;case"fill":r=h.nodeValue;break;case"stroke":o=h.nodeValue;break;case"opacity":s=parseFloat(h.nodeValue);break;case"color":c=h.nodeValue;break;case"style":for(b={},y=h.nodeValue.split(";"),p=0;p<y.length;p+=1)A=y[p].split(":"),b[A[0].trim()]=A[1];b.fill&&(r=b.fill),b.stroke&&(o=b.stroke),void 0!==b["stroke-width"]&&(i=parseFloat(b["stroke-width"])),void 0!==b["stroke-opacity"]&&(n=parseFloat(b["stroke-opacity"])),void 0!==b["fill-opacity"]&&(a=parseFloat(b["fill-opacity"])),void 0!==b.opacity&&(s=parseFloat(b.opacity)),b.color&&(c=b.color)}if(void 0!==r&&(m.fill=r),void 0!==o&&(m.stroke=o),void 0!==a&&(m.fillOpacity=a),void 0!==n&&(m.strokeOpacity=n),void 0!==i&&(m.strokeWidth=i),void 0!==s&&(m.opacity=s),void 0!==c&&"currentColor"!==c&&(m.color=c),l.length>0){for(d=new Transform,p=0;p<l.length;p+=1)d=d.append(l[p]);d.isIdentity()||(m.transform?m.transform=m.transform.append(d):m.transform=d)}return m},applySvgAttributes=function(t,e){var r=e.fill;t.commands&&t.commands.length>0&&void 0===r&&(r="black");var a=e.fillOpacity,o=e.stroke,n=e.strokeOpacity,i=e.opacity,s=e.strokeWidth,c=e.transform,l=e.color;"currentColor"===r&&(r=void 0===l?"black":l),void 0!==r&&(r=Color.parse(r),void 0!==a&&(r.a*=a),void 0!==i&&(r.a*=i)),"currentColor"===o&&(o=void 0===l?"black":l),void 0!==o&&(o=Color.parse(o),void 0!==n&&(o.a*=n),void 0!==i&&(o.a*=i));var u;u=c?c.transformShape(t).commands:t.commands;var d=void 0===r?t.fill:r,p=void 0===o?t.stroke:o,m=void 0===s?t.strokeWidth:s;return void 0!==m&&void 0!==c&&(m*=c.m[0]),new Path(u,d,p,m)},arcToSegments=function(t,e,r,a,o,n,i,s,c){var l,u,d,p,m,h,v,g,f,b,y,A,C,k,x,S,P,w,M,T,F,E,q,$,O,V,L;for(l=i*(Math.PI/180),u=Math.sin(l),d=Math.cos(l),r=Math.abs(r),a=Math.abs(a),p=d*(s-t)*.5+u*(c-e)*.5,m=d*(c-e)*.5-u*(s-t)*.5,h=p*p/(r*r)+m*m/(a*a),h>1&&(h=Math.sqrt(h),r*=h,a*=h),v=d/r,g=u/r,f=-u/a,b=d/a,y=v*s+g*c,A=f*s+b*c,C=v*t+g*e,k=f*t+b*e,x=(C-y)*(C-y)+(k-A)*(k-A),S=1/x-.25,S<0&&(S=0),P=Math.sqrt(S),n===o&&(P=-P),w=.5*(y+C)-P*(k-A),M=.5*(A+k)+P*(C-y),T=Math.atan2(A-M,y-w),F=Math.atan2(k-M,C-w),E=F-T,E<0&&1===n?E+=2*Math.PI:E>0&&0===n&&(E-=2*Math.PI),q=Math.ceil(Math.abs(E/(.5*Math.PI+.001))),$=[],L=0;L<q;L+=1)O=T+L*E/q,V=T+(L+1)*E/q,$[L]=[w,M,O,V,r,a,u,d];return $},segmentToBezier=function(t,e,r,a,o,n,i,s){var c=s*o,l=-i*n,u=i*o,d=s*n,p=.5*(a-r),m=8/3*Math.sin(.5*p)*Math.sin(.5*p)/Math.sin(p),h=t+Math.cos(r)-m*Math.sin(r),v=e+Math.sin(r)+m*Math.cos(r),g=t+Math.cos(a),f=e+Math.sin(a),b=g+m*Math.sin(a),y=f-m*Math.cos(a);return[c*h+l*v,u*h+d*v,c*b+l*y,u*b+d*y,c*g+l*f,u*g+d*f]},read={svg:function(){return read.g.apply(this,arguments)},g:function(t,e){for(var r,a,o,n,i=[],s=readSvgAttributes(t,e),c=0;c<t.childNodes.length;c+=1){if(r=t.childNodes[c],a=r.nodeName,!a)return;o=a.replace(/svg\:/gi,"").toLowerCase(),void 0!==read[o]&&(n=read[o].call(this,r,s),i.push(n))}return new Group(i)},_polyline:function(t){var e=t.getAttribute("points"),r=new Path;return e.replace(/([\d\.?]+),([\d\.?]+)/g,function(t,e,a){var o=parseFloat(e),n=parseFloat(a);0===r.commands.length?r.moveTo(o,n):r.lineTo(o,n)}),r},polygon:function(t,e){var r=readSvgAttributes(t,e),a=read._polyline(t);return a.close(),applySvgAttributes(a,r)},polyline:function(t,e){var r=readSvgAttributes(t,e),a=read._polyline(t);return applySvgAttributes(a,r)},rect:function(t,e){var r=readSvgAttributes(t,e),a=parseFloat(t.getAttribute("x")),o=parseFloat(t.getAttribute("y"));a||(a=0),o||(o=0);var n=parseFloat(t.getAttribute("width")),i=parseFloat(t.getAttribute("height"));n||(n=0),i||(i=0),n<0&&(console.error('Error: invalid negative value for <rect> attribute width="'+n+'"'),n=0),i<0&&(console.error('Error: invalid negative value for <rect> attribute height="'+i+'"'),i=0);var s=parseFloat(t.getAttribute("rx")),c=parseFloat(t.getAttribute("ry"));s||(s=0),c||(c=0),s<0&&(console.error('Error: invalid negative value for <rect> attribute rx="'+s+'"'),s=0),c<0&&(console.error('Error: invalid negative value for <rect> attribute ry="'+c+'"'),c=0),s&&c||(s=c=Math.max(s,c)),s>n/2&&(s=n/2),c>i/2&&(c=i/2);var l=new Path;return s&&c?l.addRoundedRect(a,o,n,i,s,c):l.addRect(a,o,n,i),applySvgAttributes(l,r)},ellipse:function(t,e){var r=readSvgAttributes(t,e),a=parseFloat(t.getAttribute("cx")),o=parseFloat(t.getAttribute("cy"));a||(a=0),o||(o=0);var n=parseFloat(t.getAttribute("rx")),i=parseFloat(t.getAttribute("ry"));n||(n=0),i||(i=0),n<0&&(console.error('Error: invalid negative value for <ellipse> attribute rx="'+n+'"'),n=0),i<0&&(console.error('Error: invalid negative value for <ellipse> attribute ry="'+i+'"'),i=0);var s=new Path;return s.addEllipse(a-n,o-i,2*n,2*i),applySvgAttributes(s,r)},circle:function(t,e){var r=readSvgAttributes(t,e),a=parseFloat(t.getAttribute("cx")),o=parseFloat(t.getAttribute("cy"));a||(a=0),o||(o=0);var n=parseFloat(t.getAttribute("r"));n||(n=0),n<0&&(console.error('Error: invalid negative value for <circle> attribute r="'+n+'"'),n=0);var i=new Path;return i.addEllipse(a-n,o-n,2*n,2*n),applySvgAttributes(i,r)},line:function(t,e){var r=readSvgAttributes(t,e),a=parseFloat(t.getAttribute("x1")),o=parseFloat(t.getAttribute("y1")),n=parseFloat(t.getAttribute("x2")),i=parseFloat(t.getAttribute("y2"));a||(a=0),o||(o=0),n||(n=0),i||(i=0);var s=new Path;return s.addLine(a,o,n,i),applySvgAttributes(s,r)},path:function(t,e){var r,a,o,n,i,s,c,l,u,d,p,m,h,v,g,f,b,y,A,C,k,x,S,P=readSvgAttributes(t,e);r=t.getAttribute("d"),r=r.replace(/,/gm," "),r=r.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),r=r.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),r=r.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),r=r.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),r=r.replace(/([0-9])([+\-])/gm,"$1 $2"),r=r.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),r=r.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),r=compressSpaces(r),r=trim(r),a=function(t){this.tokens=t.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new Point(0,0),this.control=new Point(0,0),this.current=new Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!==this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i+=1,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var t=new Point(this.getScalar(),this.getScalar());return this.makeAbsolute(t)},this.getAsControlPoint=function(){var t=this.getPoint();return this.control=t,t},this.getAsCurrentPoint=function(){var t=this.getPoint();return this.current=t,t},this.getReflectedControlPoint=function(){if("c"!==this.previousCommand.toLowerCase()&&"s"!==this.previousCommand.toLowerCase()&&"q"!==this.previousCommand.toLowerCase()&&"t"!==this.previousCommand.toLowerCase())return this.current;var t=new Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return t},this.makeAbsolute=function(t){return this.isRelativeCommand()?new Point(t.x+this.current.x,t.y+this.current.y):t}};var w=new Path;for(o=new a(r),o.reset();!o.isEnd();)switch(o.nextCommand(),o.command){case"M":case"m":for(n=o.getAsCurrentPoint(),w.moveTo(n.x,n.y),o.start=o.current;!o.isCommandOrEnd();)n=o.getAsCurrentPoint(),w.lineTo(n.x,n.y);break;case"L":case"l":for(;!o.isCommandOrEnd();)n=o.getAsCurrentPoint(),w.lineTo(n.x,n.y);break;case"H":case"h":for(;!o.isCommandOrEnd();)i=new Point((o.isRelativeCommand()?o.current.x:0)+o.getScalar(),o.current.y),o.current=i,w.lineTo(o.current.x,o.current.y);break;case"V":case"v":for(;!o.isCommandOrEnd();)i=new Point(o.current.x,(o.isRelativeCommand()?o.current.y:0)+o.getScalar()),o.current=i,w.lineTo(o.current.x,o.current.y);break;case"C":case"c":for(;!o.isCommandOrEnd();)s=o.current,c=o.getPoint(),l=o.getAsControlPoint(),u=o.getAsCurrentPoint(),w.curveTo(c.x,c.y,l.x,l.y,u.x,u.y);break;case"S":case"s":for(;!o.isCommandOrEnd();)s=o.current,c=o.getReflectedControlPoint(),l=o.getAsControlPoint(),u=o.getAsCurrentPoint(),w.curveTo(c.x,c.y,l.x,l.y,u.x,u.y);break;case"Q":case"q":for(;!o.isCommandOrEnd();)s=o.current,l=o.getAsControlPoint(),u=o.getAsCurrentPoint(),d=s.x+2/3*(l.x-s.x),p=s.y+2/3*(l.y-s.y),m=d+1/3*(u.x-s.x),h=p+1/3*(u.y-s.y),w.curveTo(d,p,m,h,u.x,u.y);break;case"T":case"t":for(;!o.isCommandOrEnd();)s=o.current,l=o.getReflectedControlPoint(),o.control=l,u=o.getAsCurrentPoint(),d=s.x+2/3*(l.x-s.x),p=s.y+2/3*(l.y-s.y),m=d+1/3*(u.x-s.x),h=p+1/3*(u.y-s.y),w.curveTo(d,p,m,h,u.x,u.y);break;case"A":case"a":for(;!o.isCommandOrEnd();)for(s=o.current,v=o.getScalar(),g=o.getScalar(),f=o.getScalar(),b=o.getScalar(),y=o.getScalar(),u=o.getAsCurrentPoint(),A=u.x,C=u.y,k=arcToSegments(A,C,v,g,b,y,f,s.x,s.y),x=0;x<k.length;x+=1)S=segmentToBezier.apply(this,k[x]),w.curveTo.apply(w,S);break;case"Z":case"z":w.close(),o.current=o.start}return applySvgAttributes(w,P)}};exports.interpret=function(t){var e,r=t.tagName.toLowerCase();return void 0===read[r]?null:e=read[r].call(this,t)},exports.parseString=function(t){var e=new xmldom.DOMParser({errorHandler:function(e,r){throw new Error('Could not parse string "'+String(t)+'": '+r)}}).parseFromString(t);return e?exports.interpret(e.documentElement):null};

},{"../objects/color":32,"../objects/group":33,"../objects/path":35,"../objects/point":36,"../objects/transform":39,"xmldom":10}],49:[function(require,module,exports){
"use strict";function importCommands(r){for(var e in r)vg[e]=r[e]}var assignIn=require("lodash.assignin"),vg={};vg.bezier=require("./util/bezier"),vg.color=require("./util/color"),vg.geo=require("./util/geo"),vg.math=require("./util/math"),vg.random=require("./util/random"),vg.svg=require("./util/svg"),vg.Color=require("./objects/color"),vg.Group=require("./objects/group"),vg.Matrix4=require("./objects/matrix4"),vg.Path=require("./objects/path"),vg.Point=vg.Vec2=require("./objects/point"),vg.Rect=require("./objects/rect"),vg.Text=require("./objects/text"),vg.Transform=vg.Matrix3=require("./objects/transform"),vg.Vec3=require("./objects/vec3");var Transformable=require("./objects/transformable");assignIn(vg.Point.prototype,Transformable),assignIn(vg.Path.prototype,Transformable),assignIn(vg.Group.prototype,Transformable),assignIn(vg.Text.prototype,Transformable),importCommands(require("./commands/draw")),importCommands(require("./commands/filters")),importCommands(require("./commands/shapes")),module.exports=vg;

},{"./commands/draw":29,"./commands/filters":30,"./commands/shapes":31,"./objects/color":32,"./objects/group":33,"./objects/matrix4":34,"./objects/path":35,"./objects/point":36,"./objects/rect":37,"./objects/text":38,"./objects/transform":39,"./objects/transformable":40,"./objects/vec3":41,"./util/bezier":42,"./util/color":43,"./util/geo":44,"./util/math":46,"./util/random":47,"./util/svg":48,"lodash.assignin":2}],50:[function(require,module,exports){
!function(){"use strict";function t(t,e,i){Kt.biginteger_used=1,null!=t&&("number"==typeof t&&"undefined"==typeof e?this.fromInt(t):"number"==typeof t?this.fromNumber(t,e,i):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function e(){return new t(null,void 0,void 0)}function i(t,e,i,n,r,o){for(;--o>=0;){var s=e*this[t++]+i[n]+r;r=Math.floor(s/67108864),i[n++]=67108863&s}return r}function n(t,e,i,n,r,o){for(var s=32767&e,l=e>>15;--o>=0;){var p=32767&this[t],h=this[t++]>>15,u=l*p+h*s;p=s*p+((32767&u)<<15)+i[n]+(1073741823&r),r=(p>>>30)+(u>>>15)+l*h+(r>>>30),i[n++]=1073741823&p}return r}function r(t,e,i,n,r,o){for(var s=16383&e,l=e>>14;--o>=0;){var p=16383&this[t],h=this[t++]>>14,u=l*p+h*s;p=s*p+((16383&u)<<14)+i[n]+r,r=(p>>28)+(u>>14)+l*h,i[n++]=268435455&p}return r}function o(t){return he.charAt(t)}function s(t,e){var i=ue[t.charCodeAt(e)];return null==i?-1:i}function l(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function p(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function h(t){var i=e();return i.fromInt(t),i}function u(e,i){var n;if(16==i)n=4;else if(8==i)n=3;else if(256==i)n=8;else if(2==i)n=1;else if(32==i)n=5;else{if(4!=i)return void this.fromRadix(e,i);n=2}this.t=0,this.s=0;for(var r=e.length,o=!1,l=0;--r>=0;){var p=8==n?255&e[r]:s(e,r);p<0?"-"==e.charAt(r)&&(o=!0):(o=!1,0==l?this[this.t++]=p:l+n>this.DB?(this[this.t-1]|=(p&(1<<this.DB-l)-1)<<l,this[this.t++]=p>>this.DB-l):this[this.t-1]|=p<<l,l+=n,l>=this.DB&&(l-=this.DB))}8==n&&0!=(128&e[0])&&(this.s=-1,l>0&&(this[this.t-1]|=(1<<this.DB-l)-1<<l)),this.clamp(),o&&t.ZERO.subTo(this,this)}function a(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function f(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var i,n=(1<<e)-1,r=!1,s="",l=this.t,p=this.DB-l*this.DB%e;if(l-- >0)for(p<this.DB&&(i=this[l]>>p)>0&&(r=!0,s=o(i));l>=0;)p<e?(i=(this[l]&(1<<p)-1)<<e-p,i|=this[--l]>>(p+=this.DB-e)):(i=this[l]>>(p-=e)&n,p<=0&&(p+=this.DB,--l)),i>0&&(r=!0),r&&(s+=o(i));return r?s:"0"}function d(){var i=e();return t.ZERO.subTo(this,i),i}function P(){return this.s<0?this.negate():this}function m(t){var e=this.s-t.s;if(0!=e)return e;var i=this.t;if(e=i-t.t,0!=e)return this.s<0?-e:e;for(;--i>=0;)if(0!=(e=this[i]-t[i]))return e;return 0}function y(t){var e,i=1;return 0!=(e=t>>>16)&&(t=e,i+=16),0!=(e=t>>8)&&(t=e,i+=8),0!=(e=t>>4)&&(t=e,i+=4),0!=(e=t>>2)&&(t=e,i+=2),0!=(e=t>>1)&&(t=e,i+=1),i}function c(){return this.t<=0?0:this.DB*(this.t-1)+y(this[this.t-1]^this.s&this.DM)}function v(t,e){var i;for(i=this.t-1;i>=0;--i)e[i+t]=this[i];for(i=t-1;i>=0;--i)e[i]=0;e.t=this.t+t,e.s=this.s}function C(t,e){for(var i=t;i<this.t;++i)e[i-t]=this[i];e.t=Math.max(this.t-t,0),e.s=this.s}function I(t,e){var i,n=t%this.DB,r=this.DB-n,o=(1<<r)-1,s=Math.floor(t/this.DB),l=this.s<<n&this.DM;for(i=this.t-1;i>=0;--i)e[i+s+1]=this[i]>>r|l,l=(this[i]&o)<<n;for(i=s-1;i>=0;--i)e[i]=0;e[s]=l,e.t=this.t+s+1,e.s=this.s,e.clamp()}function _(t,e){e.s=this.s;var i=Math.floor(t/this.DB);if(i>=this.t)return void(e.t=0);var n=t%this.DB,r=this.DB-n,o=(1<<n)-1;e[0]=this[i]>>n;for(var s=i+1;s<this.t;++s)e[s-i-1]|=(this[s]&o)<<r,e[s-i]=this[s]>>n;n>0&&(e[this.t-i-1]|=(this.s&o)<<r),e.t=this.t-i,e.clamp()}function x(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]-t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n-=t[i],e[i++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e[i++]=this.DV+n:n>0&&(e[i++]=n),e.t=i,e.clamp()}function L(e,i){var n=this.abs(),r=e.abs(),o=n.t;for(i.t=o+r.t;--o>=0;)i[o]=0;for(o=0;o<r.t;++o)i[o+n.t]=n.am(0,r[o],i,o,0,n.t);i.s=0,i.clamp(),this.s!=e.s&&t.ZERO.subTo(i,i)}function E(t){for(var e=this.abs(),i=t.t=2*e.t;--i>=0;)t[i]=0;for(i=0;i<e.t-1;++i){var n=e.am(i,e[i],t,2*i,0,1);(t[i+e.t]+=e.am(i+1,2*e[i],t,2*i+1,n,e.t-i-1))>=e.DV&&(t[i+e.t]-=e.DV,t[i+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(i,e[i],t,2*i,0,1)),t.s=0,t.clamp()}function T(i,n,r){var o=i.abs();if(!(o.t<=0)){var s=this.abs();if(s.t<o.t)return null!=n&&n.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=e());var l=e(),p=this.s,h=i.s,u=this.DB-y(o[o.t-1]);u>0?(o.lShiftTo(u,l),s.lShiftTo(u,r)):(o.copyTo(l),s.copyTo(r));var a=l.t,f=l[a-1];if(0!=f){var d=f*(1<<this.F1)+(a>1?l[a-2]>>this.F2:0),P=this.FV/d,m=(1<<this.F1)/d,c=1<<this.F2,v=r.t,C=v-a,I=null==n?e():n;for(l.dlShiftTo(C,I),r.compareTo(I)>=0&&(r[r.t++]=1,r.subTo(I,r)),t.ONE.dlShiftTo(a,I),I.subTo(l,l);l.t<a;)l[l.t++]=0;for(;--C>=0;){var _=r[--v]==f?this.DM:Math.floor(r[v]*P+(r[v-1]+c)*m);if((r[v]+=l.am(0,_,r,C,0,a))<_)for(l.dlShiftTo(C,I),r.subTo(I,r);r[v]<--_;)r.subTo(I,r)}null!=n&&(r.drShiftTo(a,n),p!=h&&t.ZERO.subTo(n,n)),r.t=a,r.clamp(),u>0&&r.rShiftTo(u,r),p<0&&t.ZERO.subTo(r,r)}}}function g(i){var n=e();return this.abs().divRemTo(i,null,n),this.s<0&&n.compareTo(t.ZERO)>0&&i.subTo(n,n),n}function X(t){this.m=t}function Y(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function N(t){return t}function O(t){t.divRemTo(this.m,null,t)}function S(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function A(t,e){t.squareTo(e),this.reduce(e)}function B(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function D(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function b(i){var n=e();return i.abs().dlShiftTo(this.m.t,n),n.divRemTo(this.m,null,n),i.s<0&&n.compareTo(t.ZERO)>0&&this.m.subTo(n,n),n}function w(t){var i=e();return t.copyTo(i),this.reduce(i),i}function R(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var i=32767&t[e],n=i*this.mpl+((i*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(i=e+this.m.t,t[i]+=this.m.am(0,n,t,e,0,this.m.t);t[i]>=t.DV;)t[i]-=t.DV,t[++i]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function M(t,e){t.squareTo(e),this.reduce(e)}function F(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function W(){return 0==(this.t>0?1&this[0]:this.s)}function q(i,n){if(i>4294967295||i<1)return t.ONE;var r=e(),o=e(),s=n.convert(this),l=y(i)-1;for(s.copyTo(r);--l>=0;)if(n.sqrTo(r,o),(i&1<<l)>0)n.mulTo(o,s,r);else{var p=r;r=o,o=p}return n.revert(r)}function Z(t,e){var i;return i=t<256||e.isEven()?new X(e):new D(e),this.exp(t,i)}function z(){var t=e();return this.copyTo(t),t}function H(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function k(){return 0==this.t?this.s:this[0]<<24>>24}function U(){return 0==this.t?this.s:this[0]<<16>>16}function J(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function j(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function G(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var i=this.chunkSize(t),n=Math.pow(t,i),r=h(n),o=e(),s=e(),l="";for(this.divRemTo(r,o,s);o.signum()>0;)l=(n+s.intValue()).toString(t).substr(1)+l,o.divRemTo(r,o,s);return s.intValue().toString(t)+l}function V(e,i){this.fromInt(0),null==i&&(i=10);for(var n=this.chunkSize(i),r=Math.pow(i,n),o=!1,l=0,p=0,h=0;h<e.length;++h){var u=s(e,h);u<0?"-"==e.charAt(h)&&0==this.signum()&&(o=!0):(p=i*p+u,++l>=n&&(this.dMultiply(r),this.dAddOffset(p,0),l=0,p=0))}l>0&&(this.dMultiply(Math.pow(i,l)),this.dAddOffset(p,0)),o&&t.ZERO.subTo(this,this)}function $(e,i,n){if("number"==typeof i)if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(t.ONE.shiftLeft(e-1),ot,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(i);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(t.ONE.shiftLeft(e-1),this);else{var r=new Array,o=7&e;r.length=(e>>3)+1,i.nextBytes(r),o>0?r[0]&=(1<<o)-1:r[0]=0,this.fromString(r,256)}}function K(){var t=this.t,e=new Array;e[0]=this.s;var i,n=this.DB-t*this.DB%8,r=0;if(t-- >0)for(n<this.DB&&(i=this[t]>>n)!=(this.s&this.DM)>>n&&(e[r++]=i|this.s<<this.DB-n);t>=0;)n<8?(i=(this[t]&(1<<n)-1)<<8-n,i|=this[--t]>>(n+=this.DB-8)):(i=this[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),0!=(128&i)&&(i|=-256),0==r&&(128&this.s)!=(128&i)&&++r,(r>0||i!=this.s)&&(e[r++]=i);return e}function Q(t){return 0==this.compareTo(t)}function tt(t){return this.compareTo(t)<0?this:t}function et(t){return this.compareTo(t)>0?this:t}function it(t,e,i){var n,r,o=Math.min(t.t,this.t);for(n=0;n<o;++n)i[n]=e(this[n],t[n]);if(t.t<this.t){for(r=t.s&this.DM,n=o;n<this.t;++n)i[n]=e(this[n],r);i.t=this.t}else{for(r=this.s&this.DM,n=o;n<t.t;++n)i[n]=e(r,t[n]);i.t=t.t}i.s=e(this.s,t.s),i.clamp()}function nt(t,e){return t&e}function rt(t){var i=e();return this.bitwiseTo(t,nt,i),i}function ot(t,e){return t|e}function st(t){var i=e();return this.bitwiseTo(t,ot,i),i}function lt(t,e){return t^e}function pt(t){var i=e();return this.bitwiseTo(t,lt,i),i}function ht(t,e){return t&~e}function ut(t){var i=e();return this.bitwiseTo(t,ht,i),i}function at(){for(var t=e(),i=0;i<this.t;++i)t[i]=this.DM&~this[i];return t.t=this.t,t.s=~this.s,t}function ft(t){var i=e();return t<0?this.rShiftTo(-t,i):this.lShiftTo(t,i),i}function dt(t){var i=e();return t<0?this.lShiftTo(-t,i):this.rShiftTo(t,i),i}function Pt(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function mt(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+Pt(this[t]);return this.s<0?this.t*this.DB:-1}function yt(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function ct(){for(var t=0,e=this.s&this.DM,i=0;i<this.t;++i)t+=yt(this[i]^e);return t}function vt(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function Ct(e,i){var n=t.ONE.shiftLeft(e);return this.bitwiseTo(n,i,n),n}function It(t){return this.changeBit(t,ot)}function _t(t){return this.changeBit(t,ht)}function xt(t){return this.changeBit(t,lt)}function Lt(t,e){for(var i=0,n=0,r=Math.min(t.t,this.t);i<r;)n+=this[i]+t[i],e[i++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;i<this.t;)n+=this[i],e[i++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;i<t.t;)n+=t[i],e[i++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e[i++]=n:n<-1&&(e[i++]=this.DV+n),e.t=i,e.clamp()}function Et(t){var i=e();return this.addTo(t,i),i}function Tt(t){var i=e();return this.subTo(t,i),i}function gt(t){var i=e();return this.multiplyTo(t,i),i}function Xt(){var t=e();return this.squareTo(t),t}function Yt(t){var i=e();return this.divRemTo(t,i,null),i}function Nt(t){var i=e();return this.divRemTo(t,null,i),i}function Ot(t){var i=e(),n=e();return this.divRemTo(t,i,n),new Array(i,n)}function St(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function At(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Bt(){}function Dt(t){return t}function bt(t,e,i){t.multiplyTo(e,i)}function wt(t,e){t.squareTo(e)}function Rt(t){return this.exp(t,new Bt)}function Mt(t,e,i){var n=Math.min(this.t+t.t,e);for(i.s=0,i.t=n;n>0;)i[--n]=0;var r;for(r=i.t-this.t;n<r;++n)i[n+this.t]=this.am(0,t[n],i,n,0,this.t);for(r=Math.min(t.t,e);n<r;++n)this.am(0,t[n],i,n,0,e-n);i.clamp()}function Ft(t,e,i){--e;var n=i.t=this.t+t.t-e;for(i.s=0;--n>=0;)i[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)i[this.t+n-e]=this.am(e-n,t[n],i,0,0,this.t+n-e);i.clamp(),i.drShiftTo(1,i)}function Wt(i){this.r2=e(),this.q3=e(),t.ONE.dlShiftTo(2*i.t,this.r2),this.mu=this.r2.divide(i),this.m=i}function qt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var i=e();return t.copyTo(i),this.reduce(i),i}function Zt(t){return t}function zt(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Ht(t,e){t.squareTo(e),this.reduce(e)}function kt(t,e,i){t.multiplyTo(e,i),this.reduce(i)}function Ut(t,i){var n,r,o=t.bitLength(),s=h(1);if(o<=0)return s;n=o<18?1:o<48?3:o<144?4:o<768?5:6,r=o<8?new X(i):i.isEven()?new Wt(i):new D(i);var l=new Array,p=3,u=n-1,a=(1<<n)-1;if(l[1]=r.convert(this),n>1){var f=e();for(r.sqrTo(l[1],f);p<=a;)l[p]=e(),r.mulTo(f,l[p-2],l[p]),p+=2}var d,P,m=t.t-1,c=!0,v=e();for(o=y(t[m])-1;m>=0;){for(o>=u?d=t[m]>>o-u&a:(d=(t[m]&(1<<o+1)-1)<<u-o,m>0&&(d|=t[m-1]>>this.DB+o-u)),p=n;0==(1&d);)d>>=1,--p;if((o-=p)<0&&(o+=this.DB,--m),c)l[d].copyTo(s),c=!1;else{for(;p>1;)r.sqrTo(s,v),r.sqrTo(v,s),p-=2;p>0?r.sqrTo(s,v):(P=s,s=v,v=P),r.mulTo(v,l[d],s)}for(;m>=0&&0==(t[m]&1<<o);)r.sqrTo(s,v),P=s,s=v,v=P,--o<0&&(o=this.DB-1,--m)}return r.revert(s)}function Jt(t){var e=this.s<0?this.negate():this.clone(),i=t.s<0?t.negate():t.clone();if(e.compareTo(i)<0){var n=e;e=i,i=n}var r=e.getLowestSetBit(),o=i.getLowestSetBit();if(o<0)return e;for(r<o&&(o=r),o>0&&(e.rShiftTo(o,e),i.rShiftTo(o,i));e.signum()>0;)(r=e.getLowestSetBit())>0&&e.rShiftTo(r,e),(r=i.getLowestSetBit())>0&&i.rShiftTo(r,i),e.compareTo(i)>=0?(e.subTo(i,e),e.rShiftTo(1,e)):(i.subTo(e,i),i.rShiftTo(1,i));return o>0&&i.lShiftTo(o,i),i}function jt(t){if(t<=0)return 0;var e=this.DV%t,i=this.s<0?t-1:0;if(this.t>0)if(0==e)i=this[0]%t;else for(var n=this.t-1;n>=0;--n)i=(e*i+this[n])%t;return i}function Gt(e){var i=e.isEven();if(this.isEven()&&i||0==e.signum())return t.ZERO;for(var n=e.clone(),r=this.clone(),o=h(1),s=h(0),l=h(0),p=h(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),i?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(e,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;r.isEven();)r.rShiftTo(1,r),i?(l.isEven()&&p.isEven()||(l.addTo(this,l),p.subTo(e,p)),l.rShiftTo(1,l)):p.isEven()||p.subTo(e,p),p.rShiftTo(1,p);n.compareTo(r)>=0?(n.subTo(r,n),i&&o.subTo(l,o),s.subTo(p,s)):(r.subTo(n,r),i&&l.subTo(o,l),p.subTo(s,p))}return 0!=r.compareTo(t.ONE)?t.ZERO:p.compareTo(e)>=0?p.subtract(e):p.signum()<0?(p.addTo(e,p),p.signum()<0?p.add(e):p):p}function Vt(t){var e,i=this.abs();if(1==i.t&&i[0]<=ae[ae.length-1]){for(e=0;e<ae.length;++e)if(i[0]==ae[e])return!0;return!1}if(i.isEven())return!1;for(e=1;e<ae.length;){for(var n=ae[e],r=e+1;r<ae.length&&n<fe;)n*=ae[r++];for(n=i.modInt(n);e<r;)if(n%ae[e++]==0)return!1}return i.millerRabin(t)}function $t(i){var n=this.subtract(t.ONE),r=n.getLowestSetBit();if(r<=0)return!1;var o=n.shiftRight(r);i=i+1>>1,i>ae.length&&(i=ae.length);for(var s=e(),l=0;l<i;++l){s.fromInt(ae[Math.floor(Math.random()*ae.length)]);var p=s.modPow(o,this);if(0!=p.compareTo(t.ONE)&&0!=p.compareTo(n)){for(var h=1;h++<r&&0!=p.compareTo(n);)if(p=p.modPowInt(2,this),0==p.compareTo(t.ONE))return!1;if(0!=p.compareTo(n))return!1}}return!0}var Kt={};Kt.use_lines=!0,Kt.use_xyz=!1;var Qt=!1;"undefined"!=typeof module&&module.exports?(module.exports=Kt,Qt=!0):"undefined"!=typeof document?window.ClipperLib=Kt:self.ClipperLib=Kt;var te;if(Qt){var ee="chrome";te="Netscape"}else{var ee=navigator.userAgent.toString().toLowerCase();te=navigator.appName}var ie={};ee.indexOf("chrome")!=-1&&ee.indexOf("chromium")==-1?ie.chrome=1:ie.chrome=0,ee.indexOf("chromium")!=-1?ie.chromium=1:ie.chromium=0,ee.indexOf("safari")!=-1&&ee.indexOf("chrome")==-1&&ee.indexOf("chromium")==-1?ie.safari=1:ie.safari=0,ee.indexOf("firefox")!=-1?ie.firefox=1:ie.firefox=0,ee.indexOf("firefox/17")!=-1?ie.firefox17=1:ie.firefox17=0,ee.indexOf("firefox/15")!=-1?ie.firefox15=1:ie.firefox15=0,ee.indexOf("firefox/3")!=-1?ie.firefox3=1:ie.firefox3=0,ee.indexOf("opera")!=-1?ie.opera=1:ie.opera=0,ee.indexOf("msie 10")!=-1?ie.msie10=1:ie.msie10=0,ee.indexOf("msie 9")!=-1?ie.msie9=1:ie.msie9=0,ee.indexOf("msie 8")!=-1?ie.msie8=1:ie.msie8=0,ee.indexOf("msie 7")!=-1?ie.msie7=1:ie.msie7=0,ee.indexOf("msie ")!=-1?ie.msie=1:ie.msie=0,Kt.biginteger_used=null;var ne,re=0xdeadbeefcafe,oe=15715070==(16777215&re);oe&&"Microsoft Internet Explorer"==te?(t.prototype.am=n,ne=30):oe&&"Netscape"!=te?(t.prototype.am=i,ne=26):(t.prototype.am=r,ne=28),t.prototype.DB=ne,t.prototype.DM=(1<<ne)-1,t.prototype.DV=1<<ne;var se=52;t.prototype.FV=Math.pow(2,se),t.prototype.F1=se-ne,t.prototype.F2=2*ne-se;var le,pe,he="0123456789abcdefghijklmnopqrstuvwxyz",ue=new Array;for(le="0".charCodeAt(0),pe=0;pe<=9;++pe)ue[le++]=pe;for(le="a".charCodeAt(0),pe=10;pe<36;++pe)ue[le++]=pe;for(le="A".charCodeAt(0),pe=10;pe<36;++pe)ue[le++]=pe;X.prototype.convert=Y,X.prototype.revert=N,X.prototype.reduce=O,X.prototype.mulTo=S,X.prototype.sqrTo=A,D.prototype.convert=b,D.prototype.revert=w,D.prototype.reduce=R,D.prototype.mulTo=F,D.prototype.sqrTo=M,t.prototype.copyTo=l,t.prototype.fromInt=p,t.prototype.fromString=u,t.prototype.clamp=a,t.prototype.dlShiftTo=v,t.prototype.drShiftTo=C,t.prototype.lShiftTo=I,t.prototype.rShiftTo=_,t.prototype.subTo=x,t.prototype.multiplyTo=L,t.prototype.squareTo=E,t.prototype.divRemTo=T,t.prototype.invDigit=B,t.prototype.isEven=W,t.prototype.exp=q,t.prototype.toString=f,t.prototype.negate=d,t.prototype.abs=P,t.prototype.compareTo=m,t.prototype.bitLength=c,t.prototype.mod=g,t.prototype.modPowInt=Z,t.ZERO=h(0),t.ONE=h(1),Bt.prototype.convert=Dt,Bt.prototype.revert=Dt,Bt.prototype.mulTo=bt,Bt.prototype.sqrTo=wt,Wt.prototype.convert=qt,Wt.prototype.revert=Zt,Wt.prototype.reduce=zt,Wt.prototype.mulTo=kt,Wt.prototype.sqrTo=Ht;var ae=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],fe=(1<<26)/ae[ae.length-1];t.prototype.chunkSize=J,t.prototype.toRadix=G,t.prototype.fromRadix=V,t.prototype.fromNumber=$,t.prototype.bitwiseTo=it,t.prototype.changeBit=Ct,t.prototype.addTo=Lt,t.prototype.dMultiply=St,t.prototype.dAddOffset=At,t.prototype.multiplyLowerTo=Mt,t.prototype.multiplyUpperTo=Ft,t.prototype.modInt=jt,t.prototype.millerRabin=$t,t.prototype.clone=z,t.prototype.intValue=H,t.prototype.byteValue=k,t.prototype.shortValue=U,t.prototype.signum=j,t.prototype.toByteArray=K,t.prototype.equals=Q,t.prototype.min=tt,t.prototype.max=et,t.prototype.and=rt,t.prototype.or=st,t.prototype.xor=pt,t.prototype.andNot=ut,t.prototype.not=at,t.prototype.shiftLeft=ft,t.prototype.shiftRight=dt,t.prototype.getLowestSetBit=mt,t.prototype.bitCount=ct,t.prototype.testBit=vt,t.prototype.setBit=It,t.prototype.clearBit=_t,t.prototype.flipBit=xt,t.prototype.add=Et,t.prototype.subtract=Tt,t.prototype.multiply=gt,t.prototype.divide=Yt,t.prototype.remainder=Nt,t.prototype.divideAndRemainder=Ot,t.prototype.modPow=Ut,t.prototype.modInverse=Gt,t.prototype.pow=Rt,t.prototype.gcd=Jt,t.prototype.isProbablePrime=Vt,t.prototype.square=Xt;var de=t;de.prototype.IsNegative=function(){return this.compareTo(de.ZERO)==-1},de.op_Equality=function(t,e){return 0==t.compareTo(e)},de.op_Inequality=function(t,e){return 0!=t.compareTo(e)},de.op_GreaterThan=function(t,e){return t.compareTo(e)>0},de.op_LessThan=function(t,e){return t.compareTo(e)<0},de.op_Addition=function(t,e){return new de(t).add(new de(e))},de.op_Subtraction=function(t,e){return new de(t).subtract(new de(e))},de.Int128Mul=function(t,e){return new de(t).multiply(new de(e))},de.op_Division=function(t,e){return t.divide(e)},de.prototype.ToDouble=function(){return parseFloat(this.toString())};var Pe=function(t,e){var i;if("undefined"==typeof Object.getOwnPropertyNames){for(i in e.prototype)"undefined"!=typeof t.prototype[i]&&t.prototype[i]!=Object.prototype[i]||(t.prototype[i]=e.prototype[i]);for(i in e)"undefined"==typeof t[i]&&(t[i]=e[i]);t.$baseCtor=e}else{for(var n=Object.getOwnPropertyNames(e.prototype),r=0;r<n.length;r++)"undefined"==typeof Object.getOwnPropertyDescriptor(t.prototype,n[r])&&Object.defineProperty(t.prototype,n[r],Object.getOwnPropertyDescriptor(e.prototype,n[r]));for(i in e)"undefined"==typeof t[i]&&(t[i]=e[i]);t.$baseCtor=e}};Kt.Path=function(){return[]},Kt.Paths=function(){return[]},Kt.DoublePoint=function(){var t=arguments;this.X=0,this.Y=0,1==t.length?(this.X=t[0].X,this.Y=t[0].Y):2==t.length&&(this.X=t[0],this.Y=t[1])},Kt.DoublePoint0=function(){this.X=0,this.Y=0},Kt.DoublePoint1=function(t){this.X=t.X,this.Y=t.Y},Kt.DoublePoint2=function(t,e){this.X=t,this.Y=e},Kt.PolyNode=function(){this.m_Parent=null,this.m_polygon=new Kt.Path,this.m_Index=0,this.m_jointype=0,this.m_endtype=0,this.m_Childs=[],this.IsOpen=!1},Kt.PolyNode.prototype.IsHoleNode=function(){for(var t=!0,e=this.m_Parent;null!==e;)t=!t,e=e.m_Parent;return t},Kt.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length},Kt.PolyNode.prototype.Contour=function(){return this.m_polygon},Kt.PolyNode.prototype.AddChild=function(t){var e=this.m_Childs.length;this.m_Childs.push(t),t.m_Parent=this,t.m_Index=e},Kt.PolyNode.prototype.GetNext=function(){return this.m_Childs.length>0?this.m_Childs[0]:this.GetNextSiblingUp()},Kt.PolyNode.prototype.GetNextSiblingUp=function(){return null===this.m_Parent?null:this.m_Index==this.m_Parent.m_Childs.length-1?this.m_Parent.GetNextSiblingUp():this.m_Parent.m_Childs[this.m_Index+1]},Kt.PolyNode.prototype.Childs=function(){return this.m_Childs},Kt.PolyNode.prototype.Parent=function(){return this.m_Parent},Kt.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()},Kt.PolyTree=function(){this.m_AllPolys=[],Kt.PolyNode.call(this)},Kt.PolyTree.prototype.Clear=function(){for(var t=0,e=this.m_AllPolys.length;t<e;t++)this.m_AllPolys[t]=null;this.m_AllPolys.length=0,this.m_Childs.length=0},Kt.PolyTree.prototype.GetFirst=function(){return this.m_Childs.length>0?this.m_Childs[0]:null},Kt.PolyTree.prototype.Total=function(){var t=this.m_AllPolys.length;return t>0&&this.m_Childs[0]!=this.m_AllPolys[0]&&t--,t},Pe(Kt.PolyTree,Kt.PolyNode),Kt.Math_Abs_Int64=Kt.Math_Abs_Int32=Kt.Math_Abs_Double=function(t){return Math.abs(t)},Kt.Math_Max_Int32_Int32=function(t,e){return Math.max(t,e)},ie.msie||ie.opera||ie.safari?Kt.Cast_Int32=function(t){return 0|t}:Kt.Cast_Int32=function(t){return~~t},ie.chrome?Kt.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):~~t}:ie.firefox&&"function"==typeof Number.toInteger?Kt.Cast_Int64=function(t){return Number.toInteger(t)}:ie.msie7||ie.msie8?Kt.Cast_Int64=function(t){return parseInt(t,10)}:ie.msie?Kt.Cast_Int64=function(t){return t<-2147483648||t>2147483647?t<0?Math.ceil(t):Math.floor(t):0|t}:Kt.Cast_Int64=function(t){return t<0?Math.ceil(t):Math.floor(t)},Kt.Clear=function(t){t.length=0},Kt.PI=3.141592653589793,Kt.PI2=6.283185307179586,Kt.IntPoint=function(){var t=arguments,e=t.length;if(this.X=0,this.Y=0,Kt.use_xyz)if(this.Z=0,3==e)this.X=t[0],this.Y=t[1],this.Z=t[2];else if(2==e)this.X=t[0],this.Y=t[1],this.Z=0;else if(1==e)if(t[0]instanceof Kt.DoublePoint){var i=t[0];this.X=Kt.Clipper.Round(i.X),this.Y=Kt.Clipper.Round(i.Y),this.Z=0}else{var n=t[0];"undefined"==typeof n.Z&&(n.Z=0),this.X=n.X,this.Y=n.Y,this.Z=n.Z}else this.X=0,this.Y=0,this.Z=0;else if(2==e)this.X=t[0],this.Y=t[1];else if(1==e)if(t[0]instanceof Kt.DoublePoint){var i=t[0];this.X=Kt.Clipper.Round(i.X),this.Y=Kt.Clipper.Round(i.Y)}else{var n=t[0];this.X=n.X,this.Y=n.Y}else this.X=0,this.Y=0},Kt.IntPoint.op_Equality=function(t,e){return t.X==e.X&&t.Y==e.Y},Kt.IntPoint.op_Inequality=function(t,e){return t.X!=e.X||t.Y!=e.Y},Kt.use_xyz?(Kt.IntPoint0=function(){this.X=0,this.Y=0,this.Z=0},Kt.IntPoint1=function(t){this.X=t.X,this.Y=t.Y,this.Z=t.Z},Kt.IntPoint1dp=function(t){this.X=Kt.Clipper.Round(t.X),this.Y=Kt.Clipper.Round(t.Y),this.Z=0},Kt.IntPoint2=function(t,e){this.X=t,this.Y=e,this.Z=0},Kt.IntPoint3=function(t,e,i){this.X=t,this.Y=e,this.Z=i}):(Kt.IntPoint0=function(){this.X=0,this.Y=0},Kt.IntPoint1=function(t){this.X=t.X,this.Y=t.Y},Kt.IntPoint1dp=function(t){this.X=Kt.Clipper.Round(t.X),this.Y=Kt.Clipper.Round(t.Y)},Kt.IntPoint2=function(t,e){this.X=t,this.Y=e}),Kt.IntRect=function(){var t=arguments,e=t.length;4==e?(this.left=t[0],this.top=t[1],this.right=t[2],this.bottom=t[3]):1==e?(this.left=ir.left,this.top=ir.top,this.right=ir.right,this.bottom=ir.bottom):(this.left=0,this.top=0,this.right=0,this.bottom=0)},Kt.IntRect0=function(){this.left=0,this.top=0,this.right=0,this.bottom=0},Kt.IntRect1=function(t){this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom},Kt.IntRect4=function(t,e,i,n){this.left=t,this.top=e,this.right=i,this.bottom=n},Kt.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3},Kt.PolyType={ptSubject:0,ptClip:1},Kt.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3},Kt.JoinType={jtSquare:0,jtRound:1,jtMiter:2},Kt.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4},Kt.EdgeSide={esLeft:0,esRight:1},Kt.Direction={dRightToLeft:0,dLeftToRight:1},Kt.TEdge=function(){this.Bot=new Kt.IntPoint,this.Curr=new Kt.IntPoint,this.Top=new Kt.IntPoint,this.Delta=new Kt.IntPoint,this.Dx=0,this.PolyTyp=Kt.PolyType.ptSubject,this.Side=Kt.EdgeSide.esLeft,this.WindDelta=0,this.WindCnt=0,this.WindCnt2=0,this.OutIdx=0,this.Next=null,this.Prev=null,this.NextInLML=null,this.NextInAEL=null,this.PrevInAEL=null,this.NextInSEL=null,this.PrevInSEL=null},Kt.IntersectNode=function(){this.Edge1=null,this.Edge2=null,this.Pt=new Kt.IntPoint},Kt.MyIntersectNodeSort=function(){},Kt.MyIntersectNodeSort.Compare=function(t,e){var i=e.Pt.Y-t.Pt.Y;return i>0?1:i<0?-1:0},Kt.LocalMinima=function(){this.Y=0,this.LeftBound=null,this.RightBound=null,this.Next=null},Kt.Scanbeam=function(){this.Y=0,this.Next=null},Kt.OutRec=function(){this.Idx=0,this.IsHole=!1,this.IsOpen=!1,this.FirstLeft=null,this.Pts=null,this.BottomPt=null,this.PolyNode=null},Kt.OutPt=function(){this.Idx=0,this.Pt=new Kt.IntPoint,this.Next=null,this.Prev=null},Kt.Join=function(){this.OutPt1=null,this.OutPt2=null,this.OffPt=new Kt.IntPoint},Kt.ClipperBase=function(){this.m_MinimaList=null,this.m_CurrentLM=null,this.m_edges=new Array,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1,this.PreserveCollinear=!1,this.m_MinimaList=null,this.m_CurrentLM=null,this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},Kt.ClipperBase.horizontal=-9007199254740992,Kt.ClipperBase.Skip=-2,Kt.ClipperBase.Unassigned=-1,Kt.ClipperBase.tolerance=1e-20,Kt.ClipperBase.loRange=47453132,Kt.ClipperBase.hiRange=0xfffffffffffff,Kt.ClipperBase.near_zero=function(t){return t>-Kt.ClipperBase.tolerance&&t<Kt.ClipperBase.tolerance},Kt.ClipperBase.IsHorizontal=function(t){return 0===t.Delta.Y},Kt.ClipperBase.prototype.PointIsVertex=function(t,e){var i=e;do{if(Kt.IntPoint.op_Equality(i.Pt,t))return!0;i=i.Next}while(i!=e);return!1},Kt.ClipperBase.prototype.PointOnLineSegment=function(t,e,i,n){return n?t.X==e.X&&t.Y==e.Y||t.X==i.X&&t.Y==i.Y||t.X>e.X==t.X<i.X&&t.Y>e.Y==t.Y<i.Y&&de.op_Equality(de.Int128Mul(t.X-e.X,i.Y-e.Y),de.Int128Mul(i.X-e.X,t.Y-e.Y)):t.X==e.X&&t.Y==e.Y||t.X==i.X&&t.Y==i.Y||t.X>e.X==t.X<i.X&&t.Y>e.Y==t.Y<i.Y&&(t.X-e.X)*(i.Y-e.Y)==(i.X-e.X)*(t.Y-e.Y)},Kt.ClipperBase.prototype.PointOnPolygon=function(t,e,i){for(var n=e;;){if(this.PointOnLineSegment(t,n.Pt,n.Next.Pt,i))return!0;if(n=n.Next,n==e)break}return!1},Kt.ClipperBase.prototype.SlopesEqual=Kt.ClipperBase.SlopesEqual=function(){var t,e,i,n,r,o,s,l=arguments,p=l.length;return 3==p?(t=l[0],e=l[1],s=l[2],s?de.op_Equality(de.Int128Mul(t.Delta.Y,e.Delta.X),de.Int128Mul(t.Delta.X,e.Delta.Y)):Kt.Cast_Int64(t.Delta.Y*e.Delta.X)==Kt.Cast_Int64(t.Delta.X*e.Delta.Y)):4==p?(i=l[0],n=l[1],r=l[2],s=l[3],s?de.op_Equality(de.Int128Mul(i.Y-n.Y,n.X-r.X),de.Int128Mul(i.X-n.X,n.Y-r.Y)):Kt.Cast_Int64((i.Y-n.Y)*(n.X-r.X))-Kt.Cast_Int64((i.X-n.X)*(n.Y-r.Y))===0):(i=l[0],n=l[1],r=l[2],o=l[3],s=l[4],s?de.op_Equality(de.Int128Mul(i.Y-n.Y,r.X-o.X),de.Int128Mul(i.X-n.X,r.Y-o.Y)):Kt.Cast_Int64((i.Y-n.Y)*(r.X-o.X))-Kt.Cast_Int64((i.X-n.X)*(r.Y-o.Y))===0)},Kt.ClipperBase.SlopesEqual3=function(t,e,i){return i?de.op_Equality(de.Int128Mul(t.Delta.Y,e.Delta.X),de.Int128Mul(t.Delta.X,e.Delta.Y)):Kt.Cast_Int64(t.Delta.Y*e.Delta.X)==Kt.Cast_Int64(t.Delta.X*e.Delta.Y)},Kt.ClipperBase.SlopesEqual4=function(t,e,i,n){return n?de.op_Equality(de.Int128Mul(t.Y-e.Y,e.X-i.X),de.Int128Mul(t.X-e.X,e.Y-i.Y)):Kt.Cast_Int64((t.Y-e.Y)*(e.X-i.X))-Kt.Cast_Int64((t.X-e.X)*(e.Y-i.Y))===0},Kt.ClipperBase.SlopesEqual5=function(t,e,i,n,r){return r?de.op_Equality(de.Int128Mul(t.Y-e.Y,i.X-n.X),de.Int128Mul(t.X-e.X,i.Y-n.Y)):Kt.Cast_Int64((t.Y-e.Y)*(i.X-n.X))-Kt.Cast_Int64((t.X-e.X)*(i.Y-n.Y))===0},Kt.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var t=0,e=this.m_edges.length;t<e;++t){for(var i=0,n=this.m_edges[t].length;i<n;++i)this.m_edges[t][i]=null;Kt.Clear(this.m_edges[t])}Kt.Clear(this.m_edges),this.m_UseFullRange=!1,this.m_HasOpenPaths=!1},Kt.ClipperBase.prototype.DisposeLocalMinimaList=function(){for(;null!==this.m_MinimaList;){var t=this.m_MinimaList.Next;this.m_MinimaList=null,this.m_MinimaList=t}this.m_CurrentLM=null},Kt.ClipperBase.prototype.RangeTest=function(t,e){e.Value?(t.X>Kt.ClipperBase.hiRange||t.Y>Kt.ClipperBase.hiRange||-t.X>Kt.ClipperBase.hiRange||-t.Y>Kt.ClipperBase.hiRange)&&Kt.Error("Coordinate outside allowed range in RangeTest()."):(t.X>Kt.ClipperBase.loRange||t.Y>Kt.ClipperBase.loRange||-t.X>Kt.ClipperBase.loRange||-t.Y>Kt.ClipperBase.loRange)&&(e.Value=!0,this.RangeTest(t,e))},Kt.ClipperBase.prototype.InitEdge=function(t,e,i,n){t.Next=e,t.Prev=i,t.Curr.X=n.X,t.Curr.Y=n.Y,Kt.use_xyz&&(t.Curr.Z=n.Z),t.OutIdx=-1},Kt.ClipperBase.prototype.InitEdge2=function(t,e){t.Curr.Y>=t.Next.Curr.Y?(t.Bot.X=t.Curr.X,t.Bot.Y=t.Curr.Y,Kt.use_xyz&&(t.Bot.Z=t.Curr.Z),t.Top.X=t.Next.Curr.X,t.Top.Y=t.Next.Curr.Y,Kt.use_xyz&&(t.Top.Z=t.Next.Curr.Z)):(t.Top.X=t.Curr.X,t.Top.Y=t.Curr.Y,Kt.use_xyz&&(t.Top.Z=t.Curr.Z),t.Bot.X=t.Next.Curr.X,t.Bot.Y=t.Next.Curr.Y,Kt.use_xyz&&(t.Bot.Z=t.Next.Curr.Z)),this.SetDx(t),t.PolyTyp=e},Kt.ClipperBase.prototype.FindNextLocMin=function(t){for(var e;;){for(;Kt.IntPoint.op_Inequality(t.Bot,t.Prev.Bot)||Kt.IntPoint.op_Equality(t.Curr,t.Top);)t=t.Next;if(t.Dx!=Kt.ClipperBase.horizontal&&t.Prev.Dx!=Kt.ClipperBase.horizontal)break;for(;t.Prev.Dx==Kt.ClipperBase.horizontal;)t=t.Prev;for(e=t;t.Dx==Kt.ClipperBase.horizontal;)t=t.Next;if(t.Top.Y!=t.Prev.Bot.Y){e.Prev.Bot.X<t.Bot.X&&(t=e);break}}return t},Kt.ClipperBase.prototype.ProcessBound=function(t,e){var i,n,r=t;if(r.OutIdx==Kt.ClipperBase.Skip){if(t=r,e){for(;t.Top.Y==t.Next.Bot.Y;)t=t.Next;for(;t!=r&&t.Dx==Kt.ClipperBase.horizontal;)t=t.Prev}else{for(;t.Top.Y==t.Prev.Bot.Y;)t=t.Prev;for(;t!=r&&t.Dx==Kt.ClipperBase.horizontal;)t=t.Next}if(t==r)r=e?t.Next:t.Prev;else{t=e?r.Next:r.Prev;var o=new Kt.LocalMinima;o.Next=null,o.Y=t.Bot.Y,o.LeftBound=null,o.RightBound=t,t.WindDelta=0,r=this.ProcessBound(t,e),this.InsertLocalMinima(o)}return r}if(t.Dx==Kt.ClipperBase.horizontal&&(i=e?t.Prev:t.Next,i.OutIdx!=Kt.ClipperBase.Skip&&(i.Dx==Kt.ClipperBase.horizontal?i.Bot.X!=t.Bot.X&&i.Top.X!=t.Bot.X&&this.ReverseHorizontal(t):i.Bot.X!=t.Bot.X&&this.ReverseHorizontal(t))),i=t,e){for(;r.Top.Y==r.Next.Bot.Y&&r.Next.OutIdx!=Kt.ClipperBase.Skip;)r=r.Next;if(r.Dx==Kt.ClipperBase.horizontal&&r.Next.OutIdx!=Kt.ClipperBase.Skip){for(n=r;n.Prev.Dx==Kt.ClipperBase.horizontal;)n=n.Prev;n.Prev.Top.X==r.Next.Top.X?e||(r=n.Prev):n.Prev.Top.X>r.Next.Top.X&&(r=n.Prev)}for(;t!=r;)t.NextInLML=t.Next,t.Dx==Kt.ClipperBase.horizontal&&t!=i&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),t=t.Next;t.Dx==Kt.ClipperBase.horizontal&&t!=i&&t.Bot.X!=t.Prev.Top.X&&this.ReverseHorizontal(t),r=r.Next;
}else{for(;r.Top.Y==r.Prev.Bot.Y&&r.Prev.OutIdx!=Kt.ClipperBase.Skip;)r=r.Prev;if(r.Dx==Kt.ClipperBase.horizontal&&r.Prev.OutIdx!=Kt.ClipperBase.Skip){for(n=r;n.Next.Dx==Kt.ClipperBase.horizontal;)n=n.Next;n.Next.Top.X==r.Prev.Top.X?e||(r=n.Next):n.Next.Top.X>r.Prev.Top.X&&(r=n.Next)}for(;t!=r;)t.NextInLML=t.Prev,t.Dx==Kt.ClipperBase.horizontal&&t!=i&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),t=t.Prev;t.Dx==Kt.ClipperBase.horizontal&&t!=i&&t.Bot.X!=t.Next.Top.X&&this.ReverseHorizontal(t),r=r.Prev}return r},Kt.ClipperBase.prototype.AddPath=function(t,e,i){Kt.use_lines?i||e!=Kt.PolyType.ptClip||Kt.Error("AddPath: Open paths must be subject."):i||Kt.Error("AddPath: Open paths have been disabled.");var n=t.length-1;if(i)for(;n>0&&Kt.IntPoint.op_Equality(t[n],t[0]);)--n;for(;n>0&&Kt.IntPoint.op_Equality(t[n],t[n-1]);)--n;if(i&&n<2||!i&&n<1)return!1;for(var r=new Array,o=0;o<=n;o++)r.push(new Kt.TEdge);var s=!0;r[1].Curr.X=t[1].X,r[1].Curr.Y=t[1].Y,Kt.use_xyz&&(r[1].Curr.Z=t[1].Z);var l={Value:this.m_UseFullRange};this.RangeTest(t[0],l),this.m_UseFullRange=l.Value,l.Value=this.m_UseFullRange,this.RangeTest(t[n],l),this.m_UseFullRange=l.Value,this.InitEdge(r[0],r[1],r[n],t[0]),this.InitEdge(r[n],r[0],r[n-1],t[n]);for(var o=n-1;o>=1;--o)l.Value=this.m_UseFullRange,this.RangeTest(t[o],l),this.m_UseFullRange=l.Value,this.InitEdge(r[o],r[o+1],r[o-1],t[o]);for(var p=r[0],h=p,u=p;;)if(h.Curr!=h.Next.Curr||!i&&h.Next==p){if(h.Prev==h.Next)break;if(!i||!Kt.ClipperBase.SlopesEqual(h.Prev.Curr,h.Curr,h.Next.Curr,this.m_UseFullRange)||this.PreserveCollinear&&this.Pt2IsBetweenPt1AndPt3(h.Prev.Curr,h.Curr,h.Next.Curr)){if(h=h.Next,h==u||!i&&h.Next==p)break}else h==p&&(p=h.Next),h=this.RemoveEdge(h),h=h.Prev,u=h}else{if(h==h.Next)break;h==p&&(p=h.Next),h=this.RemoveEdge(h),u=h}if(!i&&h==h.Next||i&&h.Prev==h.Next)return!1;i||(this.m_HasOpenPaths=!0,p.Prev.OutIdx=Kt.ClipperBase.Skip),h=p;do this.InitEdge2(h,e),h=h.Next,s&&h.Curr.Y!=p.Curr.Y&&(s=!1);while(h!=p);if(s){if(i)return!1;h.Prev.OutIdx=Kt.ClipperBase.Skip,h.Prev.Bot.X<h.Prev.Top.X&&this.ReverseHorizontal(h.Prev);var a=new Kt.LocalMinima;for(a.Next=null,a.Y=h.Bot.Y,a.LeftBound=null,a.RightBound=h,a.RightBound.Side=Kt.EdgeSide.esRight,a.RightBound.WindDelta=0;h.Next.OutIdx!=Kt.ClipperBase.Skip;)h.NextInLML=h.Next,h.Bot.X!=h.Prev.Top.X&&this.ReverseHorizontal(h),h=h.Next;return this.InsertLocalMinima(a),this.m_edges.push(r),!0}this.m_edges.push(r);var f,d=null;for(Kt.IntPoint.op_Equality(h.Prev.Bot,h.Prev.Top)&&(h=h.Next);h=this.FindNextLocMin(h),h!=d;){null==d&&(d=h);var a=new Kt.LocalMinima;a.Next=null,a.Y=h.Bot.Y,h.Dx<h.Prev.Dx?(a.LeftBound=h.Prev,a.RightBound=h,f=!1):(a.LeftBound=h,a.RightBound=h.Prev,f=!0),a.LeftBound.Side=Kt.EdgeSide.esLeft,a.RightBound.Side=Kt.EdgeSide.esRight,i?a.LeftBound.Next==a.RightBound?a.LeftBound.WindDelta=-1:a.LeftBound.WindDelta=1:a.LeftBound.WindDelta=0,a.RightBound.WindDelta=-a.LeftBound.WindDelta,h=this.ProcessBound(a.LeftBound,f),h.OutIdx==Kt.ClipperBase.Skip&&(h=this.ProcessBound(h,f));var P=this.ProcessBound(a.RightBound,!f);P.OutIdx==Kt.ClipperBase.Skip&&(P=this.ProcessBound(P,!f)),a.LeftBound.OutIdx==Kt.ClipperBase.Skip?a.LeftBound=null:a.RightBound.OutIdx==Kt.ClipperBase.Skip&&(a.RightBound=null),this.InsertLocalMinima(a),f||(h=P)}return!0},Kt.ClipperBase.prototype.AddPaths=function(t,e,i){for(var n=!1,r=0,o=t.length;r<o;++r)this.AddPath(t[r],e,i)&&(n=!0);return n},Kt.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(t,e,i){return!(Kt.IntPoint.op_Equality(t,i)||Kt.IntPoint.op_Equality(t,e)||Kt.IntPoint.op_Equality(i,e))&&(t.X!=i.X?e.X>t.X==e.X<i.X:e.Y>t.Y==e.Y<i.Y)},Kt.ClipperBase.prototype.RemoveEdge=function(t){t.Prev.Next=t.Next,t.Next.Prev=t.Prev;var e=t.Next;return t.Prev=null,e},Kt.ClipperBase.prototype.SetDx=function(t){t.Delta.X=t.Top.X-t.Bot.X,t.Delta.Y=t.Top.Y-t.Bot.Y,0===t.Delta.Y?t.Dx=Kt.ClipperBase.horizontal:t.Dx=t.Delta.X/t.Delta.Y},Kt.ClipperBase.prototype.InsertLocalMinima=function(t){if(null===this.m_MinimaList)this.m_MinimaList=t;else if(t.Y>=this.m_MinimaList.Y)t.Next=this.m_MinimaList,this.m_MinimaList=t;else{for(var e=this.m_MinimaList;null!==e.Next&&t.Y<e.Next.Y;)e=e.Next;t.Next=e.Next,e.Next=t}},Kt.ClipperBase.prototype.PopLocalMinima=function(){null!==this.m_CurrentLM&&(this.m_CurrentLM=this.m_CurrentLM.Next)},Kt.ClipperBase.prototype.ReverseHorizontal=function(t){var e=t.Top.X;t.Top.X=t.Bot.X,t.Bot.X=e,Kt.use_xyz&&(e=t.Top.Z,t.Top.Z=t.Bot.Z,t.Bot.Z=e)},Kt.ClipperBase.prototype.Reset=function(){if(this.m_CurrentLM=this.m_MinimaList,null!=this.m_CurrentLM)for(var t=this.m_MinimaList;null!=t;){var e=t.LeftBound;null!=e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,Kt.use_xyz&&(e.Curr.Z=e.Bot.Z),e.Side=Kt.EdgeSide.esLeft,e.OutIdx=Kt.ClipperBase.Unassigned),e=t.RightBound,null!=e&&(e.Curr.X=e.Bot.X,e.Curr.Y=e.Bot.Y,Kt.use_xyz&&(e.Curr.Z=e.Bot.Z),e.Side=Kt.EdgeSide.esRight,e.OutIdx=Kt.ClipperBase.Unassigned),t=t.Next}},Kt.Clipper=function(t){"undefined"==typeof t&&(t=0),this.m_PolyOuts=null,this.m_ClipType=Kt.ClipType.ctIntersection,this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=null,this.m_IntersectNodeComparer=null,this.m_ExecuteLocked=!1,this.m_ClipFillType=Kt.PolyFillType.pftEvenOdd,this.m_SubjFillType=Kt.PolyFillType.pftEvenOdd,this.m_Joins=null,this.m_GhostJoins=null,this.m_UsingPolyTree=!1,this.ReverseSolution=!1,this.StrictlySimple=!1,Kt.ClipperBase.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null,this.m_IntersectList=new Array,this.m_IntersectNodeComparer=Kt.MyIntersectNodeSort.Compare,this.m_ExecuteLocked=!1,this.m_UsingPolyTree=!1,this.m_PolyOuts=new Array,this.m_Joins=new Array,this.m_GhostJoins=new Array,this.ReverseSolution=0!==(1&t),this.StrictlySimple=0!==(2&t),this.PreserveCollinear=0!==(4&t),Kt.use_xyz&&(this.ZFillFunction=null)},Kt.Clipper.ioReverseSolution=1,Kt.Clipper.ioStrictlySimple=2,Kt.Clipper.ioPreserveCollinear=4,Kt.Clipper.prototype.Clear=function(){0!==this.m_edges.length&&(this.DisposeAllPolyPts(),Kt.ClipperBase.prototype.Clear.call(this))},Kt.Clipper.prototype.DisposeScanbeamList=function(){for(;null!==this.m_Scanbeam;){var t=this.m_Scanbeam.Next;this.m_Scanbeam=null,this.m_Scanbeam=t}},Kt.Clipper.prototype.Reset=function(){Kt.ClipperBase.prototype.Reset.call(this),this.m_Scanbeam=null,this.m_ActiveEdges=null,this.m_SortedEdges=null;for(var t=this.m_MinimaList;null!==t;)this.InsertScanbeam(t.Y),t=t.Next},Kt.Clipper.prototype.InsertScanbeam=function(t){if(null===this.m_Scanbeam)this.m_Scanbeam=new Kt.Scanbeam,this.m_Scanbeam.Next=null,this.m_Scanbeam.Y=t;else if(t>this.m_Scanbeam.Y){var e=new Kt.Scanbeam;e.Y=t,e.Next=this.m_Scanbeam,this.m_Scanbeam=e}else{for(var i=this.m_Scanbeam;null!==i.Next&&t<=i.Next.Y;)i=i.Next;if(t==i.Y)return;var e=new Kt.Scanbeam;e.Y=t,e.Next=i.Next,i.Next=e}},Kt.Clipper.prototype.Execute=function(){var t=arguments,e=t.length,i=t[1]instanceof Kt.PolyTree;if(4==e&&!i){var n=t[0],r=t[1],o=t[2],s=t[3];if(this.m_ExecuteLocked)return!1;this.m_HasOpenPaths&&Kt.Error("Error: PolyTree struct is need for open path clipping."),this.m_ExecuteLocked=!0,Kt.Clear(r),this.m_SubjFillType=o,this.m_ClipFillType=s,this.m_ClipType=n,this.m_UsingPolyTree=!1;try{var l=this.ExecuteInternal();l&&this.BuildResult(r)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return l}if(4==e&&i){var n=t[0],p=t[1],o=t[2],s=t[3];if(this.m_ExecuteLocked)return!1;this.m_ExecuteLocked=!0,this.m_SubjFillType=o,this.m_ClipFillType=s,this.m_ClipType=n,this.m_UsingPolyTree=!0;try{var l=this.ExecuteInternal();l&&this.BuildResult2(p)}finally{this.DisposeAllPolyPts(),this.m_ExecuteLocked=!1}return l}if(2==e&&!i){var n=t[0],r=t[1];return this.Execute(n,r,Kt.PolyFillType.pftEvenOdd,Kt.PolyFillType.pftEvenOdd)}if(2==e&&i){var n=t[0],p=t[1];return this.Execute(n,p,Kt.PolyFillType.pftEvenOdd,Kt.PolyFillType.pftEvenOdd)}},Kt.Clipper.prototype.FixHoleLinkage=function(t){if(null!==t.FirstLeft&&(t.IsHole==t.FirstLeft.IsHole||null===t.FirstLeft.Pts)){for(var e=t.FirstLeft;null!==e&&(e.IsHole==t.IsHole||null===e.Pts);)e=e.FirstLeft;t.FirstLeft=e}},Kt.Clipper.prototype.ExecuteInternal=function(){try{if(this.Reset(),null===this.m_CurrentLM)return!1;var t=this.PopScanbeam();do{if(this.InsertLocalMinimaIntoAEL(t),Kt.Clear(this.m_GhostJoins),this.ProcessHorizontals(!1),null===this.m_Scanbeam)break;var e=this.PopScanbeam();if(!this.ProcessIntersections(e))return!1;this.ProcessEdgesAtTopOfScanbeam(e),t=e}while(null!==this.m_Scanbeam||null!==this.m_CurrentLM);for(var i=0,n=this.m_PolyOuts.length;i<n;i++){var r=this.m_PolyOuts[i];null===r.Pts||r.IsOpen||(r.IsHole^this.ReverseSolution)==this.Area(r)>0&&this.ReversePolyPtLinks(r.Pts)}this.JoinCommonEdges();for(var i=0,n=this.m_PolyOuts.length;i<n;i++){var r=this.m_PolyOuts[i];null===r.Pts||r.IsOpen||this.FixupOutPolygon(r)}return this.StrictlySimple&&this.DoSimplePolygons(),!0}finally{Kt.Clear(this.m_Joins),Kt.Clear(this.m_GhostJoins)}},Kt.Clipper.prototype.PopScanbeam=function(){var t=this.m_Scanbeam.Y;return this.m_Scanbeam=this.m_Scanbeam.Next,t},Kt.Clipper.prototype.DisposeAllPolyPts=function(){for(var t=0,e=this.m_PolyOuts.length;t<e;++t)this.DisposeOutRec(t);Kt.Clear(this.m_PolyOuts)},Kt.Clipper.prototype.DisposeOutRec=function(t){var e=this.m_PolyOuts[t];e.Pts=null,e=null,this.m_PolyOuts[t]=null},Kt.Clipper.prototype.AddJoin=function(t,e,i){var n=new Kt.Join;n.OutPt1=t,n.OutPt2=e,n.OffPt.X=i.X,n.OffPt.Y=i.Y,Kt.use_xyz&&(n.OffPt.Z=i.Z),this.m_Joins.push(n)},Kt.Clipper.prototype.AddGhostJoin=function(t,e){var i=new Kt.Join;i.OutPt1=t,i.OffPt.X=e.X,i.OffPt.Y=e.Y,Kt.use_xyz&&(i.OffPt.Z=e.Z),this.m_GhostJoins.push(i)},Kt.Clipper.prototype.SetZ=function(t,e,i){if(null!==this.ZFillFunction){if(0!=t.Z||null===this.ZFillFunction)return;Kt.IntPoint.op_Equality(t,e.Bot)?t.Z=e.Bot.Z:Kt.IntPoint.op_Equality(t,e.Top)?t.Z=e.Top.Z:Kt.IntPoint.op_Equality(t,i.Bot)?t.Z=i.Bot.Z:Kt.IntPoint.op_Equality(t,i.Top)?t.Z=i.Top.Z:this.ZFillFunction(e.Bot,e.Top,i.Bot,i.Top,t)}},Kt.Clipper.prototype.InsertLocalMinimaIntoAEL=function(t){for(;null!==this.m_CurrentLM&&this.m_CurrentLM.Y==t;){var e=this.m_CurrentLM.LeftBound,i=this.m_CurrentLM.RightBound;this.PopLocalMinima();var n=null;if(null===e?(this.InsertEdgeIntoAEL(i,null),this.SetWindingCount(i),this.IsContributing(i)&&(n=this.AddOutPt(i,i.Bot))):null==i?(this.InsertEdgeIntoAEL(e,null),this.SetWindingCount(e),this.IsContributing(e)&&(n=this.AddOutPt(e,e.Bot)),this.InsertScanbeam(e.Top.Y)):(this.InsertEdgeIntoAEL(e,null),this.InsertEdgeIntoAEL(i,e),this.SetWindingCount(e),i.WindCnt=e.WindCnt,i.WindCnt2=e.WindCnt2,this.IsContributing(e)&&(n=this.AddLocalMinPoly(e,i,e.Bot)),this.InsertScanbeam(e.Top.Y)),null!=i&&(Kt.ClipperBase.IsHorizontal(i)?this.AddEdgeToSEL(i):this.InsertScanbeam(i.Top.Y)),null!=e&&null!=i){if(null!==n&&Kt.ClipperBase.IsHorizontal(i)&&this.m_GhostJoins.length>0&&0!==i.WindDelta)for(var r=0,o=this.m_GhostJoins.length;r<o;r++){var s=this.m_GhostJoins[r];this.HorzSegmentsOverlap(s.OutPt1.Pt.X,s.OffPt.X,i.Bot.X,i.Top.X)&&this.AddJoin(s.OutPt1,n,s.OffPt)}if(e.OutIdx>=0&&null!==e.PrevInAEL&&e.PrevInAEL.Curr.X==e.Bot.X&&e.PrevInAEL.OutIdx>=0&&Kt.ClipperBase.SlopesEqual(e.PrevInAEL,e,this.m_UseFullRange)&&0!==e.WindDelta&&0!==e.PrevInAEL.WindDelta){var l=this.AddOutPt(e.PrevInAEL,e.Bot);this.AddJoin(n,l,e.Top)}if(e.NextInAEL!=i){if(i.OutIdx>=0&&i.PrevInAEL.OutIdx>=0&&Kt.ClipperBase.SlopesEqual(i.PrevInAEL,i,this.m_UseFullRange)&&0!==i.WindDelta&&0!==i.PrevInAEL.WindDelta){var l=this.AddOutPt(i.PrevInAEL,i.Bot);this.AddJoin(n,l,i.Top)}var p=e.NextInAEL;if(null!==p)for(;p!=i;)this.IntersectEdges(i,p,e.Curr,!1),p=p.NextInAEL}}}},Kt.Clipper.prototype.InsertEdgeIntoAEL=function(t,e){if(null===this.m_ActiveEdges)t.PrevInAEL=null,t.NextInAEL=null,this.m_ActiveEdges=t;else if(null===e&&this.E2InsertsBeforeE1(this.m_ActiveEdges,t))t.PrevInAEL=null,t.NextInAEL=this.m_ActiveEdges,this.m_ActiveEdges.PrevInAEL=t,this.m_ActiveEdges=t;else{for(null===e&&(e=this.m_ActiveEdges);null!==e.NextInAEL&&!this.E2InsertsBeforeE1(e.NextInAEL,t);)e=e.NextInAEL;t.NextInAEL=e.NextInAEL,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=t),t.PrevInAEL=e,e.NextInAEL=t}},Kt.Clipper.prototype.E2InsertsBeforeE1=function(t,e){return e.Curr.X==t.Curr.X?e.Top.Y>t.Top.Y?e.Top.X<Kt.Clipper.TopX(t,e.Top.Y):t.Top.X>Kt.Clipper.TopX(e,t.Top.Y):e.Curr.X<t.Curr.X},Kt.Clipper.prototype.IsEvenOddFillType=function(t){return t.PolyTyp==Kt.PolyType.ptSubject?this.m_SubjFillType==Kt.PolyFillType.pftEvenOdd:this.m_ClipFillType==Kt.PolyFillType.pftEvenOdd},Kt.Clipper.prototype.IsEvenOddAltFillType=function(t){return t.PolyTyp==Kt.PolyType.ptSubject?this.m_ClipFillType==Kt.PolyFillType.pftEvenOdd:this.m_SubjFillType==Kt.PolyFillType.pftEvenOdd},Kt.Clipper.prototype.IsContributing=function(t){var e,i;switch(t.PolyTyp==Kt.PolyType.ptSubject?(e=this.m_SubjFillType,i=this.m_ClipFillType):(e=this.m_ClipFillType,i=this.m_SubjFillType),e){case Kt.PolyFillType.pftEvenOdd:if(0===t.WindDelta&&1!=t.WindCnt)return!1;break;case Kt.PolyFillType.pftNonZero:if(1!=Math.abs(t.WindCnt))return!1;break;case Kt.PolyFillType.pftPositive:if(1!=t.WindCnt)return!1;break;default:if(t.WindCnt!=-1)return!1}switch(this.m_ClipType){case Kt.ClipType.ctIntersection:switch(i){case Kt.PolyFillType.pftEvenOdd:case Kt.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case Kt.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case Kt.ClipType.ctUnion:switch(i){case Kt.PolyFillType.pftEvenOdd:case Kt.PolyFillType.pftNonZero:return 0===t.WindCnt2;case Kt.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}case Kt.ClipType.ctDifference:if(t.PolyTyp==Kt.PolyType.ptSubject)switch(i){case Kt.PolyFillType.pftEvenOdd:case Kt.PolyFillType.pftNonZero:return 0===t.WindCnt2;case Kt.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}else switch(i){case Kt.PolyFillType.pftEvenOdd:case Kt.PolyFillType.pftNonZero:return 0!==t.WindCnt2;case Kt.PolyFillType.pftPositive:return t.WindCnt2>0;default:return t.WindCnt2<0}case Kt.ClipType.ctXor:if(0!==t.WindDelta)return!0;switch(i){case Kt.PolyFillType.pftEvenOdd:case Kt.PolyFillType.pftNonZero:return 0===t.WindCnt2;case Kt.PolyFillType.pftPositive:return t.WindCnt2<=0;default:return t.WindCnt2>=0}}return!0},Kt.Clipper.prototype.SetWindingCount=function(t){for(var e=t.PrevInAEL;null!==e&&(e.PolyTyp!=t.PolyTyp||0===e.WindDelta);)e=e.PrevInAEL;if(null===e)t.WindCnt=0===t.WindDelta?1:t.WindDelta,t.WindCnt2=0,e=this.m_ActiveEdges;else if(0===t.WindDelta&&this.m_ClipType!=Kt.ClipType.ctUnion)t.WindCnt=1,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;else if(this.IsEvenOddFillType(t)){if(0===t.WindDelta){for(var i=!0,n=e.PrevInAEL;null!==n;)n.PolyTyp==e.PolyTyp&&0!==n.WindDelta&&(i=!i),n=n.PrevInAEL;t.WindCnt=i?0:1}else t.WindCnt=t.WindDelta;t.WindCnt2=e.WindCnt2,e=e.NextInAEL}else e.WindCnt*e.WindDelta<0?Math.abs(e.WindCnt)>1?e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta:t.WindCnt=0===t.WindDelta?1:t.WindDelta:0===t.WindDelta?t.WindCnt=e.WindCnt<0?e.WindCnt-1:e.WindCnt+1:e.WindDelta*t.WindDelta<0?t.WindCnt=e.WindCnt:t.WindCnt=e.WindCnt+t.WindDelta,t.WindCnt2=e.WindCnt2,e=e.NextInAEL;if(this.IsEvenOddAltFillType(t))for(;e!=t;)0!==e.WindDelta&&(t.WindCnt2=0===t.WindCnt2?1:0),e=e.NextInAEL;else for(;e!=t;)t.WindCnt2+=e.WindDelta,e=e.NextInAEL},Kt.Clipper.prototype.AddEdgeToSEL=function(t){null===this.m_SortedEdges?(this.m_SortedEdges=t,t.PrevInSEL=null,t.NextInSEL=null):(t.NextInSEL=this.m_SortedEdges,t.PrevInSEL=null,this.m_SortedEdges.PrevInSEL=t,this.m_SortedEdges=t)},Kt.Clipper.prototype.CopyAELToSEL=function(){var t=this.m_ActiveEdges;for(this.m_SortedEdges=t;null!==t;)t.PrevInSEL=t.PrevInAEL,t.NextInSEL=t.NextInAEL,t=t.NextInAEL},Kt.Clipper.prototype.SwapPositionsInAEL=function(t,e){if(t.NextInAEL!=t.PrevInAEL&&e.NextInAEL!=e.PrevInAEL){if(t.NextInAEL==e){var i=e.NextInAEL;null!==i&&(i.PrevInAEL=t);var n=t.PrevInAEL;null!==n&&(n.NextInAEL=e),e.PrevInAEL=n,e.NextInAEL=t,t.PrevInAEL=e,t.NextInAEL=i}else if(e.NextInAEL==t){var i=t.NextInAEL;null!==i&&(i.PrevInAEL=e);var n=e.PrevInAEL;null!==n&&(n.NextInAEL=t),t.PrevInAEL=n,t.NextInAEL=e,e.PrevInAEL=t,e.NextInAEL=i}else{var i=t.NextInAEL,n=t.PrevInAEL;t.NextInAEL=e.NextInAEL,null!==t.NextInAEL&&(t.NextInAEL.PrevInAEL=t),t.PrevInAEL=e.PrevInAEL,null!==t.PrevInAEL&&(t.PrevInAEL.NextInAEL=t),e.NextInAEL=i,null!==e.NextInAEL&&(e.NextInAEL.PrevInAEL=e),e.PrevInAEL=n,null!==e.PrevInAEL&&(e.PrevInAEL.NextInAEL=e)}null===t.PrevInAEL?this.m_ActiveEdges=t:null===e.PrevInAEL&&(this.m_ActiveEdges=e)}},Kt.Clipper.prototype.SwapPositionsInSEL=function(t,e){if(!(null===t.NextInSEL&&null===t.PrevInSEL||null===e.NextInSEL&&null===e.PrevInSEL)){if(t.NextInSEL==e){var i=e.NextInSEL;null!==i&&(i.PrevInSEL=t);var n=t.PrevInSEL;null!==n&&(n.NextInSEL=e),e.PrevInSEL=n,e.NextInSEL=t,t.PrevInSEL=e,t.NextInSEL=i}else if(e.NextInSEL==t){var i=t.NextInSEL;null!==i&&(i.PrevInSEL=e);var n=e.PrevInSEL;null!==n&&(n.NextInSEL=t),t.PrevInSEL=n,t.NextInSEL=e,e.PrevInSEL=t,e.NextInSEL=i}else{var i=t.NextInSEL,n=t.PrevInSEL;t.NextInSEL=e.NextInSEL,null!==t.NextInSEL&&(t.NextInSEL.PrevInSEL=t),t.PrevInSEL=e.PrevInSEL,null!==t.PrevInSEL&&(t.PrevInSEL.NextInSEL=t),e.NextInSEL=i,null!==e.NextInSEL&&(e.NextInSEL.PrevInSEL=e),e.PrevInSEL=n,null!==e.PrevInSEL&&(e.PrevInSEL.NextInSEL=e)}null===t.PrevInSEL?this.m_SortedEdges=t:null===e.PrevInSEL&&(this.m_SortedEdges=e)}},Kt.Clipper.prototype.AddLocalMaxPoly=function(t,e,i){this.AddOutPt(t,i),0==e.WindDelta&&this.AddOutPt(e,i),t.OutIdx==e.OutIdx?(t.OutIdx=-1,e.OutIdx=-1):t.OutIdx<e.OutIdx?this.AppendPolygon(t,e):this.AppendPolygon(e,t)},Kt.Clipper.prototype.AddLocalMinPoly=function(t,e,i){var n,r,o;if(Kt.ClipperBase.IsHorizontal(e)||t.Dx>e.Dx?(n=this.AddOutPt(t,i),e.OutIdx=t.OutIdx,t.Side=Kt.EdgeSide.esLeft,e.Side=Kt.EdgeSide.esRight,r=t,o=r.PrevInAEL==e?e.PrevInAEL:r.PrevInAEL):(n=this.AddOutPt(e,i),t.OutIdx=e.OutIdx,t.Side=Kt.EdgeSide.esRight,e.Side=Kt.EdgeSide.esLeft,r=e,o=r.PrevInAEL==t?t.PrevInAEL:r.PrevInAEL),null!==o&&o.OutIdx>=0&&Kt.Clipper.TopX(o,i.Y)==Kt.Clipper.TopX(r,i.Y)&&Kt.ClipperBase.SlopesEqual(r,o,this.m_UseFullRange)&&0!==r.WindDelta&&0!==o.WindDelta){var s=this.AddOutPt(o,i);this.AddJoin(n,s,r.Top)}return n},Kt.Clipper.prototype.CreateOutRec=function(){var t=new Kt.OutRec;return t.Idx=-1,t.IsHole=!1,t.IsOpen=!1,t.FirstLeft=null,t.Pts=null,t.BottomPt=null,t.PolyNode=null,this.m_PolyOuts.push(t),t.Idx=this.m_PolyOuts.length-1,t},Kt.Clipper.prototype.AddOutPt=function(t,e){var i=t.Side==Kt.EdgeSide.esLeft;if(t.OutIdx<0){var n=this.CreateOutRec();n.IsOpen=0===t.WindDelta;var r=new Kt.OutPt;return n.Pts=r,r.Idx=n.Idx,r.Pt.X=e.X,r.Pt.Y=e.Y,Kt.use_xyz&&(r.Pt.Z=e.Z),r.Next=r,r.Prev=r,n.IsOpen||this.SetHoleState(t,n),t.OutIdx=n.Idx,r}var n=this.m_PolyOuts[t.OutIdx],o=n.Pts;if(i&&Kt.IntPoint.op_Equality(e,o.Pt))return o;if(!i&&Kt.IntPoint.op_Equality(e,o.Prev.Pt))return o.Prev;var r=new Kt.OutPt;return r.Idx=n.Idx,r.Pt.X=e.X,r.Pt.Y=e.Y,Kt.use_xyz&&(r.Pt.Z=e.Z),r.Next=o,r.Prev=o.Prev,r.Prev.Next=r,o.Prev=r,i&&(n.Pts=r),r},Kt.Clipper.prototype.SwapPoints=function(t,e){var i=new Kt.IntPoint(t.Value);t.Value.X=e.Value.X,t.Value.Y=e.Value.Y,Kt.use_xyz&&(t.Value.Z=e.Value.Z),e.Value.X=i.X,e.Value.Y=i.Y,Kt.use_xyz&&(e.Value.Z=i.Z)},Kt.Clipper.prototype.HorzSegmentsOverlap=function(t,e,i,n){var r;return t>e&&(r=t,t=e,e=r),i>n&&(r=i,i=n,n=r),t<n&&i<e},Kt.Clipper.prototype.SetHoleState=function(t,e){for(var i=!1,n=t.PrevInAEL;null!==n;)n.OutIdx>=0&&0!=n.WindDelta&&(i=!i,null===e.FirstLeft&&(e.FirstLeft=this.m_PolyOuts[n.OutIdx])),n=n.PrevInAEL;i&&(e.IsHole=!0)},Kt.Clipper.prototype.GetDx=function(t,e){return t.Y==e.Y?Kt.ClipperBase.horizontal:(e.X-t.X)/(e.Y-t.Y)},Kt.Clipper.prototype.FirstIsBottomPt=function(t,e){for(var i=t.Prev;Kt.IntPoint.op_Equality(i.Pt,t.Pt)&&i!=t;)i=i.Prev;var n=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=t.Next;Kt.IntPoint.op_Equality(i.Pt,t.Pt)&&i!=t;)i=i.Next;var r=Math.abs(this.GetDx(t.Pt,i.Pt));for(i=e.Prev;Kt.IntPoint.op_Equality(i.Pt,e.Pt)&&i!=e;)i=i.Prev;var o=Math.abs(this.GetDx(e.Pt,i.Pt));for(i=e.Next;Kt.IntPoint.op_Equality(i.Pt,e.Pt)&&i!=e;)i=i.Next;var s=Math.abs(this.GetDx(e.Pt,i.Pt));return n>=o&&n>=s||r>=o&&r>=s},Kt.Clipper.prototype.GetBottomPt=function(t){for(var e=null,i=t.Next;i!=t;)i.Pt.Y>t.Pt.Y?(t=i,e=null):i.Pt.Y==t.Pt.Y&&i.Pt.X<=t.Pt.X&&(i.Pt.X<t.Pt.X?(e=null,t=i):i.Next!=t&&i.Prev!=t&&(e=i)),i=i.Next;if(null!==e)for(;e!=i;)for(this.FirstIsBottomPt(i,e)||(t=e),e=e.Next;Kt.IntPoint.op_Inequality(e.Pt,t.Pt);)e=e.Next;return t},Kt.Clipper.prototype.GetLowermostRec=function(t,e){null===t.BottomPt&&(t.BottomPt=this.GetBottomPt(t.Pts)),null===e.BottomPt&&(e.BottomPt=this.GetBottomPt(e.Pts));var i=t.BottomPt,n=e.BottomPt;return i.Pt.Y>n.Pt.Y?t:i.Pt.Y<n.Pt.Y?e:i.Pt.X<n.Pt.X?t:i.Pt.X>n.Pt.X?e:i.Next==i?e:n.Next==n?t:this.FirstIsBottomPt(i,n)?t:e},Kt.Clipper.prototype.Param1RightOfParam2=function(t,e){do if(t=t.FirstLeft,t==e)return!0;while(null!==t);return!1},Kt.Clipper.prototype.GetOutRec=function(t){for(var e=this.m_PolyOuts[t];e!=this.m_PolyOuts[e.Idx];)e=this.m_PolyOuts[e.Idx];return e},Kt.Clipper.prototype.AppendPolygon=function(t,e){var i,n=this.m_PolyOuts[t.OutIdx],r=this.m_PolyOuts[e.OutIdx];i=this.Param1RightOfParam2(n,r)?r:this.Param1RightOfParam2(r,n)?n:this.GetLowermostRec(n,r);var o,s=n.Pts,l=s.Prev,p=r.Pts,h=p.Prev;t.Side==Kt.EdgeSide.esLeft?(e.Side==Kt.EdgeSide.esLeft?(this.ReversePolyPtLinks(p),p.Next=s,s.Prev=p,l.Next=h,h.Prev=l,n.Pts=h):(h.Next=s,s.Prev=h,p.Prev=l,l.Next=p,n.Pts=p),o=Kt.EdgeSide.esLeft):(e.Side==Kt.EdgeSide.esRight?(this.ReversePolyPtLinks(p),l.Next=h,h.Prev=l,p.Next=s,s.Prev=p):(l.Next=p,p.Prev=l,s.Prev=h,h.Next=s),o=Kt.EdgeSide.esRight),n.BottomPt=null,i==r&&(r.FirstLeft!=n&&(n.FirstLeft=r.FirstLeft),n.IsHole=r.IsHole),r.Pts=null,r.BottomPt=null,r.FirstLeft=n;var u=t.OutIdx,a=e.OutIdx;t.OutIdx=-1,e.OutIdx=-1;for(var f=this.m_ActiveEdges;null!==f;){if(f.OutIdx==a){f.OutIdx=u,f.Side=o;break}f=f.NextInAEL}r.Idx=n.Idx},Kt.Clipper.prototype.ReversePolyPtLinks=function(t){if(null!==t){var e,i;e=t;do i=e.Next,e.Next=e.Prev,e.Prev=i,e=i;while(e!=t)}},Kt.Clipper.SwapSides=function(t,e){var i=t.Side;t.Side=e.Side,e.Side=i},Kt.Clipper.SwapPolyIndexes=function(t,e){var i=t.OutIdx;t.OutIdx=e.OutIdx,e.OutIdx=i},Kt.Clipper.prototype.IntersectEdges=function(t,e,i){var n=t.OutIdx>=0,r=e.OutIdx>=0;if(Kt.use_xyz&&this.SetZ(i,t,e),Kt.use_lines&&(0===t.WindDelta||0===e.WindDelta)){if(0==t.WindDelta&&0==e.WindDelta)return;return void(t.PolyTyp==e.PolyTyp&&t.WindDelta!=e.WindDelta&&this.m_ClipType==Kt.ClipType.ctUnion?0===t.WindDelta?r&&(this.AddOutPt(t,i),n&&(t.OutIdx=-1)):n&&(this.AddOutPt(e,i),r&&(e.OutIdx=-1)):t.PolyTyp!=e.PolyTyp&&(0!==t.WindDelta||1!=Math.abs(e.WindCnt)||this.m_ClipType==Kt.ClipType.ctUnion&&0!==e.WindCnt2?0!==e.WindDelta||1!=Math.abs(t.WindCnt)||this.m_ClipType==Kt.ClipType.ctUnion&&0!==t.WindCnt2||(this.AddOutPt(e,i),r&&(e.OutIdx=-1)):(this.AddOutPt(t,i),n&&(t.OutIdx=-1))))}if(t.PolyTyp==e.PolyTyp)if(this.IsEvenOddFillType(t)){var o=t.WindCnt;t.WindCnt=e.WindCnt,e.WindCnt=o}else t.WindCnt+e.WindDelta===0?t.WindCnt=-t.WindCnt:t.WindCnt+=e.WindDelta,e.WindCnt-t.WindDelta===0?e.WindCnt=-e.WindCnt:e.WindCnt-=t.WindDelta;else this.IsEvenOddFillType(e)?t.WindCnt2=0===t.WindCnt2?1:0:t.WindCnt2+=e.WindDelta,this.IsEvenOddFillType(t)?e.WindCnt2=0===e.WindCnt2?1:0:e.WindCnt2-=t.WindDelta;var s,l,p,h;t.PolyTyp==Kt.PolyType.ptSubject?(s=this.m_SubjFillType,p=this.m_ClipFillType):(s=this.m_ClipFillType,p=this.m_SubjFillType),e.PolyTyp==Kt.PolyType.ptSubject?(l=this.m_SubjFillType,h=this.m_ClipFillType):(l=this.m_ClipFillType,h=this.m_SubjFillType);var u,a;switch(s){case Kt.PolyFillType.pftPositive:u=t.WindCnt;break;case Kt.PolyFillType.pftNegative:u=-t.WindCnt;break;default:u=Math.abs(t.WindCnt)}switch(l){case Kt.PolyFillType.pftPositive:a=e.WindCnt;break;case Kt.PolyFillType.pftNegative:a=-e.WindCnt;break;default:a=Math.abs(e.WindCnt)}if(n&&r)0!=u&&1!=u||0!=a&&1!=a||t.PolyTyp!=e.PolyTyp&&this.m_ClipType!=Kt.ClipType.ctXor?this.AddLocalMaxPoly(t,e,i):(this.AddOutPt(t,i),this.AddOutPt(e,i),Kt.Clipper.SwapSides(t,e),Kt.Clipper.SwapPolyIndexes(t,e));else if(n)0!==a&&1!=a||(this.AddOutPt(t,i),Kt.Clipper.SwapSides(t,e),Kt.Clipper.SwapPolyIndexes(t,e));else if(r)0!==u&&1!=u||(this.AddOutPt(e,i),Kt.Clipper.SwapSides(t,e),Kt.Clipper.SwapPolyIndexes(t,e));else if(!(0!=u&&1!=u||0!=a&&1!=a)){var f,d;switch(p){case Kt.PolyFillType.pftPositive:f=t.WindCnt2;break;case Kt.PolyFillType.pftNegative:f=-t.WindCnt2;break;default:f=Math.abs(t.WindCnt2)}switch(h){case Kt.PolyFillType.pftPositive:d=e.WindCnt2;break;case Kt.PolyFillType.pftNegative:d=-e.WindCnt2;break;default:d=Math.abs(e.WindCnt2)}if(t.PolyTyp!=e.PolyTyp)this.AddLocalMinPoly(t,e,i);else if(1==u&&1==a)switch(this.m_ClipType){case Kt.ClipType.ctIntersection:f>0&&d>0&&this.AddLocalMinPoly(t,e,i);break;case Kt.ClipType.ctUnion:f<=0&&d<=0&&this.AddLocalMinPoly(t,e,i);break;case Kt.ClipType.ctDifference:(t.PolyTyp==Kt.PolyType.ptClip&&f>0&&d>0||t.PolyTyp==Kt.PolyType.ptSubject&&f<=0&&d<=0)&&this.AddLocalMinPoly(t,e,i);break;case Kt.ClipType.ctXor:this.AddLocalMinPoly(t,e,i)}else Kt.Clipper.SwapSides(t,e)}},Kt.Clipper.prototype.DeleteFromAEL=function(t){var e=t.PrevInAEL,i=t.NextInAEL;null===e&&null===i&&t!=this.m_ActiveEdges||(null!==e?e.NextInAEL=i:this.m_ActiveEdges=i,null!==i&&(i.PrevInAEL=e),t.NextInAEL=null,t.PrevInAEL=null)},Kt.Clipper.prototype.DeleteFromSEL=function(t){var e=t.PrevInSEL,i=t.NextInSEL;null===e&&null===i&&t!=this.m_SortedEdges||(null!==e?e.NextInSEL=i:this.m_SortedEdges=i,null!==i&&(i.PrevInSEL=e),t.NextInSEL=null,t.PrevInSEL=null)},Kt.Clipper.prototype.UpdateEdgeIntoAEL=function(t){null===t.NextInLML&&Kt.Error("UpdateEdgeIntoAEL: invalid call");var e=t.PrevInAEL,i=t.NextInAEL;return t.NextInLML.OutIdx=t.OutIdx,null!==e?e.NextInAEL=t.NextInLML:this.m_ActiveEdges=t.NextInLML,null!==i&&(i.PrevInAEL=t.NextInLML),t.NextInLML.Side=t.Side,t.NextInLML.WindDelta=t.WindDelta,t.NextInLML.WindCnt=t.WindCnt,t.NextInLML.WindCnt2=t.WindCnt2,t=t.NextInLML,t.Curr.X=t.Bot.X,t.Curr.Y=t.Bot.Y,Kt.use_xyz&&(t.Curr.Z=t.Bot.Z),t.PrevInAEL=e,t.NextInAEL=i,Kt.ClipperBase.IsHorizontal(t)||this.InsertScanbeam(t.Top.Y),t},Kt.Clipper.prototype.ProcessHorizontals=function(t){for(var e=this.m_SortedEdges;null!==e;)this.DeleteFromSEL(e),this.ProcessHorizontal(e,t),e=this.m_SortedEdges},Kt.Clipper.prototype.GetHorzDirection=function(t,e){t.Bot.X<t.Top.X?(e.Left=t.Bot.X,e.Right=t.Top.X,e.Dir=Kt.Direction.dLeftToRight):(e.Left=t.Top.X,e.Right=t.Bot.X,e.Dir=Kt.Direction.dRightToLeft)},Kt.Clipper.prototype.ProcessHorizontal=function(t,e){var i={Dir:null,Left:null,Right:null};this.GetHorzDirection(t,i);for(var n=i.Dir,r=i.Left,o=i.Right,s=t,l=null;null!==s.NextInLML&&Kt.ClipperBase.IsHorizontal(s.NextInLML);)s=s.NextInLML;for(null===s.NextInLML&&(l=this.GetMaximaPair(s));;){for(var p=t==s,h=this.GetNextInAEL(t,n);null!==h&&!(h.Curr.X==t.Top.X&&null!==t.NextInLML&&h.Dx<t.NextInLML.Dx);){var u=this.GetNextInAEL(h,n);if(n==Kt.Direction.dLeftToRight&&h.Curr.X<=o||n==Kt.Direction.dRightToLeft&&h.Curr.X>=r){if(h==l&&p){if(t.OutIdx>=0){for(var a=this.AddOutPt(t,t.Top),f=this.m_SortedEdges;null!==f;){if(f.OutIdx>=0&&this.HorzSegmentsOverlap(t.Bot.X,t.Top.X,f.Bot.X,f.Top.X)){var d=this.AddOutPt(f,f.Bot);this.AddJoin(d,a,f.Top)}f=f.NextInSEL}this.AddGhostJoin(a,t.Bot),this.AddLocalMaxPoly(t,l,t.Top)}return this.DeleteFromAEL(t),void this.DeleteFromAEL(l)}if(n==Kt.Direction.dLeftToRight){var P=new Kt.IntPoint(h.Curr.X,t.Curr.Y);this.IntersectEdges(t,h,P)}else{var P=new Kt.IntPoint(h.Curr.X,t.Curr.Y);this.IntersectEdges(h,t,P)}this.SwapPositionsInAEL(t,h)}else if(n==Kt.Direction.dLeftToRight&&h.Curr.X>=o||n==Kt.Direction.dRightToLeft&&h.Curr.X<=r)break;h=u}if(null===t.NextInLML||!Kt.ClipperBase.IsHorizontal(t.NextInLML))break;t=this.UpdateEdgeIntoAEL(t),t.OutIdx>=0&&this.AddOutPt(t,t.Bot);var i={Dir:n,Left:r,Right:o};this.GetHorzDirection(t,i),n=i.Dir,r=i.Left,o=i.Right}if(null!==t.NextInLML)if(t.OutIdx>=0){var a=this.AddOutPt(t,t.Top);if(e&&this.AddGhostJoin(a,t.Bot),t=this.UpdateEdgeIntoAEL(t),0===t.WindDelta)return;var m=t.PrevInAEL,u=t.NextInAEL;if(null!==m&&m.Curr.X==t.Bot.X&&m.Curr.Y==t.Bot.Y&&0!==m.WindDelta&&m.OutIdx>=0&&m.Curr.Y>m.Top.Y&&Kt.ClipperBase.SlopesEqual(t,m,this.m_UseFullRange)){var d=this.AddOutPt(m,t.Bot);this.AddJoin(a,d,t.Top)}else if(null!==u&&u.Curr.X==t.Bot.X&&u.Curr.Y==t.Bot.Y&&0!==u.WindDelta&&u.OutIdx>=0&&u.Curr.Y>u.Top.Y&&Kt.ClipperBase.SlopesEqual(t,u,this.m_UseFullRange)){var d=this.AddOutPt(u,t.Bot);this.AddJoin(a,d,t.Top)}}else t=this.UpdateEdgeIntoAEL(t);else t.OutIdx>=0&&this.AddOutPt(t,t.Top),this.DeleteFromAEL(t)},Kt.Clipper.prototype.GetNextInAEL=function(t,e){return e==Kt.Direction.dLeftToRight?t.NextInAEL:t.PrevInAEL},Kt.Clipper.prototype.IsMinima=function(t){return null!==t&&t.Prev.NextInLML!=t&&t.Next.NextInLML!=t},Kt.Clipper.prototype.IsMaxima=function(t,e){return null!==t&&t.Top.Y==e&&null===t.NextInLML},Kt.Clipper.prototype.IsIntermediate=function(t,e){return t.Top.Y==e&&null!==t.NextInLML},Kt.Clipper.prototype.GetMaximaPair=function(t){var e=null;return Kt.IntPoint.op_Equality(t.Next.Top,t.Top)&&null===t.Next.NextInLML?e=t.Next:Kt.IntPoint.op_Equality(t.Prev.Top,t.Top)&&null===t.Prev.NextInLML&&(e=t.Prev),null===e||e.OutIdx!=-2&&(e.NextInAEL!=e.PrevInAEL||Kt.ClipperBase.IsHorizontal(e))?e:null},Kt.Clipper.prototype.ProcessIntersections=function(t){if(null==this.m_ActiveEdges)return!0;try{if(this.BuildIntersectList(t),0==this.m_IntersectList.length)return!0;if(1!=this.m_IntersectList.length&&!this.FixupIntersectionOrder())return!1;this.ProcessIntersectList()}catch(t){this.m_SortedEdges=null,this.m_IntersectList.length=0,Kt.Error("ProcessIntersections error")}return this.m_SortedEdges=null,!0},Kt.Clipper.prototype.BuildIntersectList=function(t){if(null!==this.m_ActiveEdges){var e=this.m_ActiveEdges;for(this.m_SortedEdges=e;null!==e;)e.PrevInSEL=e.PrevInAEL,e.NextInSEL=e.NextInAEL,e.Curr.X=Kt.Clipper.TopX(e,t),e=e.NextInAEL;for(var i=!0;i&&null!==this.m_SortedEdges;){for(i=!1,e=this.m_SortedEdges;null!==e.NextInSEL;){var n=e.NextInSEL,r=new Kt.IntPoint;if(e.Curr.X>n.Curr.X){this.IntersectPoint(e,n,r);var o=new Kt.IntersectNode;o.Edge1=e,o.Edge2=n,o.Pt.X=r.X,o.Pt.Y=r.Y,Kt.use_xyz&&(o.Pt.Z=r.Z),this.m_IntersectList.push(o),this.SwapPositionsInSEL(e,n),i=!0}else e=n}if(null===e.PrevInSEL)break;e.PrevInSEL.NextInSEL=null}this.m_SortedEdges=null}},Kt.Clipper.prototype.EdgesAdjacent=function(t){return t.Edge1.NextInSEL==t.Edge2||t.Edge1.PrevInSEL==t.Edge2},Kt.Clipper.IntersectNodeSort=function(t,e){return e.Pt.Y-t.Pt.Y},Kt.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer),this.CopyAELToSEL();for(var t=this.m_IntersectList.length,e=0;e<t;e++){if(!this.EdgesAdjacent(this.m_IntersectList[e])){for(var i=e+1;i<t&&!this.EdgesAdjacent(this.m_IntersectList[i]);)i++;if(i==t)return!1;var n=this.m_IntersectList[e];this.m_IntersectList[e]=this.m_IntersectList[i],this.m_IntersectList[i]=n}this.SwapPositionsInSEL(this.m_IntersectList[e].Edge1,this.m_IntersectList[e].Edge2)}return!0},Kt.Clipper.prototype.ProcessIntersectList=function(){for(var t=0,e=this.m_IntersectList.length;t<e;t++){var i=this.m_IntersectList[t];this.IntersectEdges(i.Edge1,i.Edge2,i.Pt),this.SwapPositionsInAEL(i.Edge1,i.Edge2)}this.m_IntersectList.length=0};var me=function(t){return t<0?Math.ceil(t-.5):Math.round(t)},ye=function(t){return t<0?Math.ceil(t-.5):Math.floor(t+.5)},ce=function(t){return t<0?-Math.round(Math.abs(t)):Math.round(t)},ve=function(t){return t<0?(t-=.5,t<-2147483648?Math.ceil(t):0|t):(t+=.5,t>2147483647?Math.floor(t):0|t)};ie.msie?Kt.Clipper.Round=me:ie.chromium?Kt.Clipper.Round=ce:ie.safari?Kt.Clipper.Round=ve:Kt.Clipper.Round=ye,Kt.Clipper.TopX=function(t,e){return e==t.Top.Y?t.Top.X:t.Bot.X+Kt.Clipper.Round(t.Dx*(e-t.Bot.Y))},Kt.Clipper.prototype.IntersectPoint=function(t,e,i){i.X=0,i.Y=0;var n,r;if(t.Dx==e.Dx)return i.Y=t.Curr.Y,void(i.X=Kt.Clipper.TopX(t,i.Y));if(0===t.Delta.X)i.X=t.Bot.X,Kt.ClipperBase.IsHorizontal(e)?i.Y=e.Bot.Y:(r=e.Bot.Y-e.Bot.X/e.Dx,
i.Y=Kt.Clipper.Round(i.X/e.Dx+r));else if(0===e.Delta.X)i.X=e.Bot.X,Kt.ClipperBase.IsHorizontal(t)?i.Y=t.Bot.Y:(n=t.Bot.Y-t.Bot.X/t.Dx,i.Y=Kt.Clipper.Round(i.X/t.Dx+n));else{n=t.Bot.X-t.Bot.Y*t.Dx,r=e.Bot.X-e.Bot.Y*e.Dx;var o=(r-n)/(t.Dx-e.Dx);i.Y=Kt.Clipper.Round(o),Math.abs(t.Dx)<Math.abs(e.Dx)?i.X=Kt.Clipper.Round(t.Dx*o+n):i.X=Kt.Clipper.Round(e.Dx*o+r)}if(i.Y<t.Top.Y||i.Y<e.Top.Y){if(t.Top.Y>e.Top.Y)return i.Y=t.Top.Y,i.X=Kt.Clipper.TopX(e,t.Top.Y),i.X<t.Top.X;i.Y=e.Top.Y,Math.abs(t.Dx)<Math.abs(e.Dx)?i.X=Kt.Clipper.TopX(t,i.Y):i.X=Kt.Clipper.TopX(e,i.Y)}i.Y>t.Curr.Y&&(i.Y=t.Curr.Y,Math.abs(t.Dx)>Math.abs(e.Dx)?i.X=Kt.Clipper.TopX(e,i.Y):i.X=Kt.Clipper.TopX(t,i.Y))},Kt.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(t){for(var e=this.m_ActiveEdges;null!==e;){var i=this.IsMaxima(e,t);if(i){var n=this.GetMaximaPair(e);i=null===n||!Kt.ClipperBase.IsHorizontal(n)}if(i){var r=e.PrevInAEL;this.DoMaxima(e),e=null===r?this.m_ActiveEdges:r.NextInAEL}else{if(this.IsIntermediate(e,t)&&Kt.ClipperBase.IsHorizontal(e.NextInLML)?(e=this.UpdateEdgeIntoAEL(e),e.OutIdx>=0&&this.AddOutPt(e,e.Bot),this.AddEdgeToSEL(e)):(e.Curr.X=Kt.Clipper.TopX(e,t),e.Curr.Y=t),this.StrictlySimple){var r=e.PrevInAEL;if(e.OutIdx>=0&&0!==e.WindDelta&&null!==r&&r.OutIdx>=0&&r.Curr.X==e.Curr.X&&0!==r.WindDelta){var o=new Kt.IntPoint(e.Curr);Kt.use_xyz&&this.SetZ(o,r,e);var s=this.AddOutPt(r,o),l=this.AddOutPt(e,o);this.AddJoin(s,l,o)}}e=e.NextInAEL}}for(this.ProcessHorizontals(!0),e=this.m_ActiveEdges;null!==e;){if(this.IsIntermediate(e,t)){var s=null;e.OutIdx>=0&&(s=this.AddOutPt(e,e.Top)),e=this.UpdateEdgeIntoAEL(e);var r=e.PrevInAEL,p=e.NextInAEL;if(null!==r&&r.Curr.X==e.Bot.X&&r.Curr.Y==e.Bot.Y&&null!==s&&r.OutIdx>=0&&r.Curr.Y>r.Top.Y&&Kt.ClipperBase.SlopesEqual(e,r,this.m_UseFullRange)&&0!==e.WindDelta&&0!==r.WindDelta){var l=this.AddOutPt(r,e.Bot);this.AddJoin(s,l,e.Top)}else if(null!==p&&p.Curr.X==e.Bot.X&&p.Curr.Y==e.Bot.Y&&null!==s&&p.OutIdx>=0&&p.Curr.Y>p.Top.Y&&Kt.ClipperBase.SlopesEqual(e,p,this.m_UseFullRange)&&0!==e.WindDelta&&0!==p.WindDelta){var l=this.AddOutPt(p,e.Bot);this.AddJoin(s,l,e.Top)}}e=e.NextInAEL}},Kt.Clipper.prototype.DoMaxima=function(t){var e=this.GetMaximaPair(t);if(null===e)return t.OutIdx>=0&&this.AddOutPt(t,t.Top),void this.DeleteFromAEL(t);for(var i=t.NextInAEL;null!==i&&i!=e;)this.IntersectEdges(t,i,t.Top),this.SwapPositionsInAEL(t,i),i=t.NextInAEL;t.OutIdx==-1&&e.OutIdx==-1?(this.DeleteFromAEL(t),this.DeleteFromAEL(e)):t.OutIdx>=0&&e.OutIdx>=0?(t.OutIdx>=0&&this.AddLocalMaxPoly(t,e,t.Top),this.DeleteFromAEL(t),this.DeleteFromAEL(e)):Kt.use_lines&&0===t.WindDelta?(t.OutIdx>=0&&(this.AddOutPt(t,t.Top),t.OutIdx=-1),this.DeleteFromAEL(t),e.OutIdx>=0&&(this.AddOutPt(e,t.Top),e.OutIdx=-1),this.DeleteFromAEL(e)):Kt.Error("DoMaxima error")},Kt.Clipper.ReversePaths=function(t){for(var e=0,i=t.length;e<i;e++)t[e].reverse()},Kt.Clipper.Orientation=function(t){return Kt.Clipper.Area(t)>=0},Kt.Clipper.prototype.PointCount=function(t){if(null===t)return 0;var e=0,i=t;do e++,i=i.Next;while(i!=t);return e},Kt.Clipper.prototype.BuildResult=function(t){Kt.Clear(t);for(var e=0,i=this.m_PolyOuts.length;e<i;e++){var n=this.m_PolyOuts[e];if(null!==n.Pts){var r=n.Pts.Prev,o=this.PointCount(r);if(!(o<2)){for(var s=new Array(o),l=0;l<o;l++)s[l]=r.Pt,r=r.Prev;t.push(s)}}}},Kt.Clipper.prototype.BuildResult2=function(t){t.Clear();for(var e=0,i=this.m_PolyOuts.length;e<i;e++){var n=this.m_PolyOuts[e],r=this.PointCount(n.Pts);if(!(n.IsOpen&&r<2||!n.IsOpen&&r<3)){this.FixHoleLinkage(n);var o=new Kt.PolyNode;t.m_AllPolys.push(o),n.PolyNode=o,o.m_polygon.length=r;for(var s=n.Pts.Prev,l=0;l<r;l++)o.m_polygon[l]=s.Pt,s=s.Prev}}for(var e=0,i=this.m_PolyOuts.length;e<i;e++){var n=this.m_PolyOuts[e];null!==n.PolyNode&&(n.IsOpen?(n.PolyNode.IsOpen=!0,t.AddChild(n.PolyNode)):null!==n.FirstLeft&&null!=n.FirstLeft.PolyNode?n.FirstLeft.PolyNode.AddChild(n.PolyNode):t.AddChild(n.PolyNode))}},Kt.Clipper.prototype.FixupOutPolygon=function(t){var e=null;t.BottomPt=null;for(var i=t.Pts;;){if(i.Prev==i||i.Prev==i.Next)return void(t.Pts=null);if(Kt.IntPoint.op_Equality(i.Pt,i.Next.Pt)||Kt.IntPoint.op_Equality(i.Pt,i.Prev.Pt)||Kt.ClipperBase.SlopesEqual(i.Prev.Pt,i.Pt,i.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(i.Prev.Pt,i.Pt,i.Next.Pt)))e=null,i.Prev.Next=i.Next,i.Next.Prev=i.Prev,i=i.Prev;else{if(i==e)break;null===e&&(e=i),i=i.Next}}t.Pts=i},Kt.Clipper.prototype.DupOutPt=function(t,e){var i=new Kt.OutPt;return i.Pt.X=t.Pt.X,i.Pt.Y=t.Pt.Y,Kt.use_xyz&&(i.Pt.Z=t.Pt.Z),i.Idx=t.Idx,e?(i.Next=t.Next,i.Prev=t,t.Next.Prev=i,t.Next=i):(i.Prev=t.Prev,i.Next=t,t.Prev.Next=i,t.Prev=i),i},Kt.Clipper.prototype.GetOverlap=function(t,e,i,n,r){return t<e?i<n?(r.Left=Math.max(t,i),r.Right=Math.min(e,n)):(r.Left=Math.max(t,n),r.Right=Math.min(e,i)):i<n?(r.Left=Math.max(e,i),r.Right=Math.min(t,n)):(r.Left=Math.max(e,n),r.Right=Math.min(t,i)),r.Left<r.Right},Kt.Clipper.prototype.JoinHorz=function(t,e,i,n,r,o){var s=t.Pt.X>e.Pt.X?Kt.Direction.dRightToLeft:Kt.Direction.dLeftToRight,l=i.Pt.X>n.Pt.X?Kt.Direction.dRightToLeft:Kt.Direction.dLeftToRight;if(s==l)return!1;if(s==Kt.Direction.dLeftToRight){for(;t.Next.Pt.X<=r.X&&t.Next.Pt.X>=t.Pt.X&&t.Next.Pt.Y==r.Y;)t=t.Next;o&&t.Pt.X!=r.X&&(t=t.Next),e=this.DupOutPt(t,!o),Kt.IntPoint.op_Inequality(e.Pt,r)&&(t=e,t.Pt.X=r.X,t.Pt.Y=r.Y,Kt.use_xyz&&(t.Pt.Z=r.Z),e=this.DupOutPt(t,!o))}else{for(;t.Next.Pt.X>=r.X&&t.Next.Pt.X<=t.Pt.X&&t.Next.Pt.Y==r.Y;)t=t.Next;o||t.Pt.X==r.X||(t=t.Next),e=this.DupOutPt(t,o),Kt.IntPoint.op_Inequality(e.Pt,r)&&(t=e,t.Pt.X=r.X,t.Pt.Y=r.Y,Kt.use_xyz&&(t.Pt.Z=r.Z),e=this.DupOutPt(t,o))}if(l==Kt.Direction.dLeftToRight){for(;i.Next.Pt.X<=r.X&&i.Next.Pt.X>=i.Pt.X&&i.Next.Pt.Y==r.Y;)i=i.Next;o&&i.Pt.X!=r.X&&(i=i.Next),n=this.DupOutPt(i,!o),Kt.IntPoint.op_Inequality(n.Pt,r)&&(i=n,i.Pt.X=r.X,i.Pt.Y=r.Y,Kt.use_xyz&&(i.Pt.Z=r.Z),n=this.DupOutPt(i,!o))}else{for(;i.Next.Pt.X>=r.X&&i.Next.Pt.X<=i.Pt.X&&i.Next.Pt.Y==r.Y;)i=i.Next;o||i.Pt.X==r.X||(i=i.Next),n=this.DupOutPt(i,o),Kt.IntPoint.op_Inequality(n.Pt,r)&&(i=n,i.Pt.X=r.X,i.Pt.Y=r.Y,Kt.use_xyz&&(i.Pt.Z=r.Z),n=this.DupOutPt(i,o))}return s==Kt.Direction.dLeftToRight==o?(t.Prev=i,i.Next=t,e.Next=n,n.Prev=e):(t.Next=i,i.Prev=t,e.Prev=n,n.Next=e),!0},Kt.Clipper.prototype.JoinPoints=function(t,e,i){var n=t.OutPt1,r=new Kt.OutPt,o=t.OutPt2,s=new Kt.OutPt,l=t.OutPt1.Pt.Y==t.OffPt.Y;if(l&&Kt.IntPoint.op_Equality(t.OffPt,t.OutPt1.Pt)&&Kt.IntPoint.op_Equality(t.OffPt,t.OutPt2.Pt)){if(e!=i)return!1;for(r=t.OutPt1.Next;r!=n&&Kt.IntPoint.op_Equality(r.Pt,t.OffPt);)r=r.Next;var p=r.Pt.Y>t.OffPt.Y;for(s=t.OutPt2.Next;s!=o&&Kt.IntPoint.op_Equality(s.Pt,t.OffPt);)s=s.Next;var h=s.Pt.Y>t.OffPt.Y;return p!=h&&(p?(r=this.DupOutPt(n,!1),s=this.DupOutPt(o,!0),n.Prev=o,o.Next=n,r.Next=s,s.Prev=r,t.OutPt1=n,t.OutPt2=r,!0):(r=this.DupOutPt(n,!0),s=this.DupOutPt(o,!1),n.Next=o,o.Prev=n,r.Prev=s,s.Next=r,t.OutPt1=n,t.OutPt2=r,!0))}if(l){for(r=n;n.Prev.Pt.Y==n.Pt.Y&&n.Prev!=r&&n.Prev!=o;)n=n.Prev;for(;r.Next.Pt.Y==r.Pt.Y&&r.Next!=n&&r.Next!=o;)r=r.Next;if(r.Next==n||r.Next==o)return!1;for(s=o;o.Prev.Pt.Y==o.Pt.Y&&o.Prev!=s&&o.Prev!=r;)o=o.Prev;for(;s.Next.Pt.Y==s.Pt.Y&&s.Next!=o&&s.Next!=n;)s=s.Next;if(s.Next==o||s.Next==n)return!1;var u={Left:null,Right:null};if(!this.GetOverlap(n.Pt.X,r.Pt.X,o.Pt.X,s.Pt.X,u))return!1;var a,f=u.Left,d=u.Right,P=new Kt.IntPoint;return n.Pt.X>=f&&n.Pt.X<=d?(P.X=n.Pt.X,P.Y=n.Pt.Y,Kt.use_xyz&&(P.Z=n.Pt.Z),a=n.Pt.X>r.Pt.X):o.Pt.X>=f&&o.Pt.X<=d?(P.X=o.Pt.X,P.Y=o.Pt.Y,Kt.use_xyz&&(P.Z=o.Pt.Z),a=o.Pt.X>s.Pt.X):r.Pt.X>=f&&r.Pt.X<=d?(P.X=r.Pt.X,P.Y=r.Pt.Y,Kt.use_xyz&&(P.Z=r.Pt.Z),a=r.Pt.X>n.Pt.X):(P.X=s.Pt.X,P.Y=s.Pt.Y,Kt.use_xyz&&(P.Z=s.Pt.Z),a=s.Pt.X>o.Pt.X),t.OutPt1=n,t.OutPt2=o,this.JoinHorz(n,r,o,s,P,a)}for(r=n.Next;Kt.IntPoint.op_Equality(r.Pt,n.Pt)&&r!=n;)r=r.Next;var m=r.Pt.Y>n.Pt.Y||!Kt.ClipperBase.SlopesEqual(n.Pt,r.Pt,t.OffPt,this.m_UseFullRange);if(m){for(r=n.Prev;Kt.IntPoint.op_Equality(r.Pt,n.Pt)&&r!=n;)r=r.Prev;if(r.Pt.Y>n.Pt.Y||!Kt.ClipperBase.SlopesEqual(n.Pt,r.Pt,t.OffPt,this.m_UseFullRange))return!1}for(s=o.Next;Kt.IntPoint.op_Equality(s.Pt,o.Pt)&&s!=o;)s=s.Next;var y=s.Pt.Y>o.Pt.Y||!Kt.ClipperBase.SlopesEqual(o.Pt,s.Pt,t.OffPt,this.m_UseFullRange);if(y){for(s=o.Prev;Kt.IntPoint.op_Equality(s.Pt,o.Pt)&&s!=o;)s=s.Prev;if(s.Pt.Y>o.Pt.Y||!Kt.ClipperBase.SlopesEqual(o.Pt,s.Pt,t.OffPt,this.m_UseFullRange))return!1}return r!=n&&s!=o&&r!=s&&(e!=i||m!=y)&&(m?(r=this.DupOutPt(n,!1),s=this.DupOutPt(o,!0),n.Prev=o,o.Next=n,r.Next=s,s.Prev=r,t.OutPt1=n,t.OutPt2=r,!0):(r=this.DupOutPt(n,!0),s=this.DupOutPt(o,!1),n.Next=o,o.Prev=n,r.Prev=s,s.Next=r,t.OutPt1=n,t.OutPt2=r,!0))},Kt.Clipper.GetBounds=function(t){for(var e=0,i=t.length;e<i&&0==t[e].length;)e++;if(e==i)return new Kt.IntRect(0,0,0,0);var n=new Kt.IntRect;for(n.left=t[e][0].X,n.right=n.left,n.top=t[e][0].Y,n.bottom=n.top;e<i;e++)for(var r=0,o=t[e].length;r<o;r++)t[e][r].X<n.left?n.left=t[e][r].X:t[e][r].X>n.right&&(n.right=t[e][r].X),t[e][r].Y<n.top?n.top=t[e][r].Y:t[e][r].Y>n.bottom&&(n.bottom=t[e][r].Y);return n},Kt.Clipper.prototype.GetBounds2=function(t){var e=t,i=new Kt.IntRect;for(i.left=t.Pt.X,i.right=t.Pt.X,i.top=t.Pt.Y,i.bottom=t.Pt.Y,t=t.Next;t!=e;)t.Pt.X<i.left&&(i.left=t.Pt.X),t.Pt.X>i.right&&(i.right=t.Pt.X),t.Pt.Y<i.top&&(i.top=t.Pt.Y),t.Pt.Y>i.bottom&&(i.bottom=t.Pt.Y),t=t.Next;return i},Kt.Clipper.PointInPolygon=function(t,e){var i=0,n=e.length;if(n<3)return 0;for(var r=e[0],o=1;o<=n;++o){var s=o==n?e[0]:e[o];if(s.Y==t.Y&&(s.X==t.X||r.Y==t.Y&&s.X>t.X==r.X<t.X))return-1;if(r.Y<t.Y!=s.Y<t.Y)if(r.X>=t.X)if(s.X>t.X)i=1-i;else{var l=(r.X-t.X)*(s.Y-t.Y)-(s.X-t.X)*(r.Y-t.Y);if(0==l)return-1;l>0==s.Y>r.Y&&(i=1-i)}else if(s.X>t.X){var l=(r.X-t.X)*(s.Y-t.Y)-(s.X-t.X)*(r.Y-t.Y);if(0==l)return-1;l>0==s.Y>r.Y&&(i=1-i)}r=s}return i},Kt.Clipper.prototype.PointInPolygon=function(t,e){var i=0,n=e,r=t.X,o=t.Y,s=e.Pt.X,l=e.Pt.Y;do{e=e.Next;var p=e.Pt.X,h=e.Pt.Y;if(h==o&&(p==r||l==o&&p>r==s<r))return-1;if(l<o!=h<o)if(s>=r)if(p>r)i=1-i;else{var u=(s-r)*(h-o)-(p-r)*(l-o);if(0==u)return-1;u>0==h>l&&(i=1-i)}else if(p>r){var u=(s-r)*(h-o)-(p-r)*(l-o);if(0==u)return-1;u>0==h>l&&(i=1-i)}s=p,l=h}while(n!=e);return i},Kt.Clipper.prototype.Poly2ContainsPoly1=function(t,e){var i=t;do{var n=this.PointInPolygon(i.Pt,e);if(n>=0)return n>0;i=i.Next}while(i!=t);return!0},Kt.Clipper.prototype.FixupFirstLefts1=function(t,e){for(var i=0,n=this.m_PolyOuts.length;i<n;i++){var r=this.m_PolyOuts[i];if(null!=r.Pts&&null!=r.FirstLeft){var o=this.ParseFirstLeft(r.FirstLeft);o==t&&this.Poly2ContainsPoly1(r.Pts,e.Pts)&&(r.FirstLeft=e)}}},Kt.Clipper.prototype.FixupFirstLefts2=function(t,e){for(var i=0,n=this.m_PolyOuts,r=n.length,o=n[i];i<r;i++,o=n[i])o.FirstLeft==t&&(o.FirstLeft=e)},Kt.Clipper.ParseFirstLeft=function(t){for(;null!=t&&null==t.Pts;)t=t.FirstLeft;return t},Kt.Clipper.prototype.JoinCommonEdges=function(){for(var t=0,e=this.m_Joins.length;t<e;t++){var i=this.m_Joins[t],n=this.GetOutRec(i.OutPt1.Idx),r=this.GetOutRec(i.OutPt2.Idx);if(null!=n.Pts&&null!=r.Pts){var o;if(o=n==r?n:this.Param1RightOfParam2(n,r)?r:this.Param1RightOfParam2(r,n)?n:this.GetLowermostRec(n,r),this.JoinPoints(i,n,r))if(n==r){if(n.Pts=i.OutPt1,n.BottomPt=null,r=this.CreateOutRec(),r.Pts=i.OutPt2,this.UpdateOutPtIdxs(r),this.m_UsingPolyTree)for(var s=0,l=this.m_PolyOuts.length;s<l-1;s++){var p=this.m_PolyOuts[s];null!=p.Pts&&Kt.Clipper.ParseFirstLeft(p.FirstLeft)==n&&p.IsHole!=n.IsHole&&this.Poly2ContainsPoly1(p.Pts,i.OutPt2)&&(p.FirstLeft=r)}this.Poly2ContainsPoly1(r.Pts,n.Pts)?(r.IsHole=!n.IsHole,r.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,n),(r.IsHole^this.ReverseSolution)==this.Area(r)>0&&this.ReversePolyPtLinks(r.Pts)):this.Poly2ContainsPoly1(n.Pts,r.Pts)?(r.IsHole=n.IsHole,n.IsHole=!r.IsHole,r.FirstLeft=n.FirstLeft,n.FirstLeft=r,this.m_UsingPolyTree&&this.FixupFirstLefts2(n,r),(n.IsHole^this.ReverseSolution)==this.Area(n)>0&&this.ReversePolyPtLinks(n.Pts)):(r.IsHole=n.IsHole,r.FirstLeft=n.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(n,r))}else r.Pts=null,r.BottomPt=null,r.Idx=n.Idx,n.IsHole=o.IsHole,o==r&&(n.FirstLeft=r.FirstLeft),r.FirstLeft=n,this.m_UsingPolyTree&&this.FixupFirstLefts2(r,n)}}},Kt.Clipper.prototype.UpdateOutPtIdxs=function(t){var e=t.Pts;do e.Idx=t.Idx,e=e.Prev;while(e!=t.Pts)},Kt.Clipper.prototype.DoSimplePolygons=function(){for(var t=0;t<this.m_PolyOuts.length;){var e=this.m_PolyOuts[t++],i=e.Pts;if(null!=i&&!e.IsOpen)do{for(var n=i.Next;n!=e.Pts;){if(Kt.IntPoint.op_Equality(i.Pt,n.Pt)&&n.Next!=i&&n.Prev!=i){var r=i.Prev,o=n.Prev;i.Prev=o,o.Next=i,n.Prev=r,r.Next=n,e.Pts=i;var s=this.CreateOutRec();s.Pts=n,this.UpdateOutPtIdxs(s),this.Poly2ContainsPoly1(s.Pts,e.Pts)?(s.IsHole=!e.IsHole,s.FirstLeft=e,this.m_UsingPolyTree&&this.FixupFirstLefts2(s,e)):this.Poly2ContainsPoly1(e.Pts,s.Pts)?(s.IsHole=e.IsHole,e.IsHole=!s.IsHole,s.FirstLeft=e.FirstLeft,e.FirstLeft=s,this.m_UsingPolyTree&&this.FixupFirstLefts2(e,s)):(s.IsHole=e.IsHole,s.FirstLeft=e.FirstLeft,this.m_UsingPolyTree&&this.FixupFirstLefts1(e,s)),n=i}n=n.Next}i=i.Next}while(i!=e.Pts)}},Kt.Clipper.Area=function(t){var e=t.length;if(e<3)return 0;for(var i=0,n=0,r=e-1;n<e;++n)i+=(t[r].X+t[n].X)*(t[r].Y-t[n].Y),r=n;return.5*-i},Kt.Clipper.prototype.Area=function(t){var e=t.Pts;if(null==e)return 0;var i=0;do i+=(e.Prev.Pt.X+e.Pt.X)*(e.Prev.Pt.Y-e.Pt.Y),e=e.Next;while(e!=t.Pts);return.5*i},Kt.Clipper.SimplifyPolygon=function(t,e){var i=new Array,n=new Kt.Clipper(0);return n.StrictlySimple=!0,n.AddPath(t,Kt.PolyType.ptSubject,!0),n.Execute(Kt.ClipType.ctUnion,i,e,e),i},Kt.Clipper.SimplifyPolygons=function(t,e){"undefined"==typeof e&&(e=Kt.PolyFillType.pftEvenOdd);var i=new Array,n=new Kt.Clipper(0);return n.StrictlySimple=!0,n.AddPaths(t,Kt.PolyType.ptSubject,!0),n.Execute(Kt.ClipType.ctUnion,i,e,e),i},Kt.Clipper.DistanceSqrd=function(t,e){var i=t.X-e.X,n=t.Y-e.Y;return i*i+n*n},Kt.Clipper.DistanceFromLineSqrd=function(t,e,i){var n=e.Y-i.Y,r=i.X-e.X,o=n*e.X+r*e.Y;return o=n*t.X+r*t.Y-o,o*o/(n*n+r*r)},Kt.Clipper.SlopesNearCollinear=function(t,e,i,n){return Math.abs(t.X-e.X)>Math.abs(t.Y-e.Y)?t.X>e.X==t.X<i.X?Kt.Clipper.DistanceFromLineSqrd(t,e,i)<n:e.X>t.X==e.X<i.X?Kt.Clipper.DistanceFromLineSqrd(e,t,i)<n:Kt.Clipper.DistanceFromLineSqrd(i,t,e)<n:t.Y>e.Y==t.Y<i.Y?Kt.Clipper.DistanceFromLineSqrd(t,e,i)<n:e.Y>t.Y==e.Y<i.Y?Kt.Clipper.DistanceFromLineSqrd(e,t,i)<n:Kt.Clipper.DistanceFromLineSqrd(i,t,e)<n},Kt.Clipper.PointsAreClose=function(t,e,i){var n=t.X-e.X,r=t.Y-e.Y;return n*n+r*r<=i},Kt.Clipper.ExcludeOp=function(t){var e=t.Prev;return e.Next=t.Next,t.Next.Prev=e,e.Idx=0,e},Kt.Clipper.CleanPolygon=function(t,e){"undefined"==typeof e&&(e=1.415);var i=t.length;if(0==i)return new Array;for(var n=new Array(i),r=0;r<i;++r)n[r]=new Kt.OutPt;for(var r=0;r<i;++r)n[r].Pt=t[r],n[r].Next=n[(r+1)%i],n[r].Next.Prev=n[r],n[r].Idx=0;for(var o=e*e,s=n[0];0==s.Idx&&s.Next!=s.Prev;)Kt.Clipper.PointsAreClose(s.Pt,s.Prev.Pt,o)?(s=Kt.Clipper.ExcludeOp(s),i--):Kt.Clipper.PointsAreClose(s.Prev.Pt,s.Next.Pt,o)?(Kt.Clipper.ExcludeOp(s.Next),s=Kt.Clipper.ExcludeOp(s),i-=2):Kt.Clipper.SlopesNearCollinear(s.Prev.Pt,s.Pt,s.Next.Pt,o)?(s=Kt.Clipper.ExcludeOp(s),i--):(s.Idx=1,s=s.Next);i<3&&(i=0);for(var l=new Array(i),r=0;r<i;++r)l[r]=new Kt.IntPoint(s.Pt),s=s.Next;return n=null,l},Kt.Clipper.CleanPolygons=function(t,e){for(var i=new Array(t.length),n=0,r=t.length;n<r;n++)i[n]=Kt.Clipper.CleanPolygon(t[n],e);return i},Kt.Clipper.Minkowski=function(t,e,i,n){var r=n?1:0,o=t.length,s=e.length,l=new Array;if(i)for(var p=0;p<s;p++){for(var h=new Array(o),u=0,a=t.length,f=t[u];u<a;u++,f=t[u])h[u]=new Kt.IntPoint(e[p].X+f.X,e[p].Y+f.Y);l.push(h)}else for(var p=0;p<s;p++){for(var h=new Array(o),u=0,a=t.length,f=t[u];u<a;u++,f=t[u])h[u]=new Kt.IntPoint(e[p].X-f.X,e[p].Y-f.Y);l.push(h)}for(var d=new Array,p=0;p<s-1+r;p++)for(var u=0;u<o;u++){var P=new Array;P.push(l[p%s][u%o]),P.push(l[(p+1)%s][u%o]),P.push(l[(p+1)%s][(u+1)%o]),P.push(l[p%s][(u+1)%o]),Kt.Clipper.Orientation(P)||P.reverse(),d.push(P)}return d},Kt.Clipper.MinkowskiSum=function(t,e,i){if(e[0]instanceof Array){for(var n=e,r=new Kt.Paths,o=new Kt.Clipper,s=0;s<n.length;++s){var l=Kt.Clipper.Minkowski(t,n[s],!0,i);if(o.AddPaths(l,Kt.PolyType.ptSubject,!0),i){var p=Kt.Clipper.TranslatePath(n[s],t[0]);o.AddPath(p,Kt.PolyType.ptClip,!0)}}return o.Execute(Kt.ClipType.ctUnion,r,Kt.PolyFillType.pftNonZero,Kt.PolyFillType.pftNonZero),r}var p=e,n=Kt.Clipper.Minkowski(t,p,!0,i),o=new Kt.Clipper;return o.AddPaths(n,Kt.PolyType.ptSubject,!0),o.Execute(Kt.ClipType.ctUnion,n,Kt.PolyFillType.pftNonZero,Kt.PolyFillType.pftNonZero),n},Kt.Clipper.TranslatePath=function(t,e){for(var i=new Kt.Path,n=0;n<t.length;n++)i.push(new Kt.IntPoint(t[n].X+e.X,t[n].Y+e.Y));return i},Kt.Clipper.MinkowskiDiff=function(t,e){var i=Kt.Clipper.Minkowski(t,e,!1,!0),n=new Kt.Clipper;return n.AddPaths(i,Kt.PolyType.ptSubject,!0),n.Execute(Kt.ClipType.ctUnion,i,Kt.PolyFillType.pftNonZero,Kt.PolyFillType.pftNonZero),i},Kt.Clipper.PolyTreeToPaths=function(t){var e=new Array;return Kt.Clipper.AddPolyNodeToPaths(t,Kt.Clipper.NodeType.ntAny,e),e},Kt.Clipper.AddPolyNodeToPaths=function(t,e,i){var n=!0;switch(e){case Kt.Clipper.NodeType.ntOpen:return;case Kt.Clipper.NodeType.ntClosed:n=!t.IsOpen}t.m_polygon.length>0&&n&&i.push(t.m_polygon);for(var r=0,o=t.Childs(),s=o.length,l=o[r];r<s;r++,l=o[r])Kt.Clipper.AddPolyNodeToPaths(l,e,i)},Kt.Clipper.OpenPathsFromPolyTree=function(t){for(var e=new Kt.Paths,i=0,n=t.ChildCount();i<n;i++)t.Childs()[i].IsOpen&&e.push(t.Childs()[i].m_polygon);return e},Kt.Clipper.ClosedPathsFromPolyTree=function(t){var e=new Kt.Paths;return Kt.Clipper.AddPolyNodeToPaths(t,Kt.Clipper.NodeType.ntClosed,e),e},Pe(Kt.Clipper,Kt.ClipperBase),Kt.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2},Kt.ClipperOffset=function(t,e){"undefined"==typeof t&&(t=2),"undefined"==typeof e&&(e=Kt.ClipperOffset.def_arc_tolerance),this.m_destPolys=new Kt.Paths,this.m_srcPoly=new Kt.Path,this.m_destPoly=new Kt.Path,this.m_normals=new Array,this.m_delta=0,this.m_sinA=0,this.m_sin=0,this.m_cos=0,this.m_miterLim=0,this.m_StepsPerRad=0,this.m_lowest=new Kt.IntPoint,this.m_polyNodes=new Kt.PolyNode,this.MiterLimit=t,this.ArcTolerance=e,this.m_lowest.X=-1},Kt.ClipperOffset.two_pi=6.28318530717959,Kt.ClipperOffset.def_arc_tolerance=.25,Kt.ClipperOffset.prototype.Clear=function(){Kt.Clear(this.m_polyNodes.Childs()),this.m_lowest.X=-1},Kt.ClipperOffset.Round=Kt.Clipper.Round,Kt.ClipperOffset.prototype.AddPath=function(t,e,i){var n=t.length-1;if(!(n<0)){var r=new Kt.PolyNode;if(r.m_jointype=e,r.m_endtype=i,i==Kt.EndType.etClosedLine||i==Kt.EndType.etClosedPolygon)for(;n>0&&Kt.IntPoint.op_Equality(t[0],t[n]);)n--;r.m_polygon.push(t[0]);for(var o=0,s=0,l=1;l<=n;l++)Kt.IntPoint.op_Inequality(r.m_polygon[o],t[l])&&(o++,r.m_polygon.push(t[l]),(t[l].Y>r.m_polygon[s].Y||t[l].Y==r.m_polygon[s].Y&&t[l].X<r.m_polygon[s].X)&&(s=o));if(!(i==Kt.EndType.etClosedPolygon&&o<2)&&(this.m_polyNodes.AddChild(r),i==Kt.EndType.etClosedPolygon))if(this.m_lowest.X<0)this.m_lowest=new Kt.IntPoint(this.m_polyNodes.ChildCount()-1,s);else{var p=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];(r.m_polygon[s].Y>p.Y||r.m_polygon[s].Y==p.Y&&r.m_polygon[s].X<p.X)&&(this.m_lowest=new Kt.IntPoint(this.m_polyNodes.ChildCount()-1,s))}}},Kt.ClipperOffset.prototype.AddPaths=function(t,e,i){for(var n=0,r=t.length;n<r;n++)this.AddPath(t[n],e,i)},Kt.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!Kt.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon))for(var t=0;t<this.m_polyNodes.ChildCount();t++){var e=this.m_polyNodes.Childs()[t];(e.m_endtype==Kt.EndType.etClosedPolygon||e.m_endtype==Kt.EndType.etClosedLine&&Kt.Clipper.Orientation(e.m_polygon))&&e.m_polygon.reverse()}else for(var t=0;t<this.m_polyNodes.ChildCount();t++){var e=this.m_polyNodes.Childs()[t];e.m_endtype!=Kt.EndType.etClosedLine||Kt.Clipper.Orientation(e.m_polygon)||e.m_polygon.reverse()}},Kt.ClipperOffset.GetUnitNormal=function(t,e){var i=e.X-t.X,n=e.Y-t.Y;if(0==i&&0==n)return new Kt.DoublePoint(0,0);var r=1/Math.sqrt(i*i+n*n);return i*=r,n*=r,new Kt.DoublePoint(n,-i)},Kt.ClipperOffset.prototype.DoOffset=function(t){if(this.m_destPolys=new Array,this.m_delta=t,Kt.ClipperBase.near_zero(t))for(var e=0;e<this.m_polyNodes.ChildCount();e++){var i=this.m_polyNodes.Childs()[e];i.m_endtype==Kt.EndType.etClosedPolygon&&this.m_destPolys.push(i.m_polygon)}else{this.MiterLimit>2?this.m_miterLim=2/(this.MiterLimit*this.MiterLimit):this.m_miterLim=.5;var n;n=this.ArcTolerance<=0?Kt.ClipperOffset.def_arc_tolerance:this.ArcTolerance>Math.abs(t)*Kt.ClipperOffset.def_arc_tolerance?Math.abs(t)*Kt.ClipperOffset.def_arc_tolerance:this.ArcTolerance;var r=3.14159265358979/Math.acos(1-n/Math.abs(t));this.m_sin=Math.sin(Kt.ClipperOffset.two_pi/r),this.m_cos=Math.cos(Kt.ClipperOffset.two_pi/r),this.m_StepsPerRad=r/Kt.ClipperOffset.two_pi,t<0&&(this.m_sin=-this.m_sin);for(var e=0;e<this.m_polyNodes.ChildCount();e++){var i=this.m_polyNodes.Childs()[e];this.m_srcPoly=i.m_polygon;var o=this.m_srcPoly.length;if(!(0==o||t<=0&&(o<3||i.m_endtype!=Kt.EndType.etClosedPolygon)))if(this.m_destPoly=new Array,1!=o){this.m_normals.length=0;for(var s=0;s<o-1;s++)this.m_normals.push(Kt.ClipperOffset.GetUnitNormal(this.m_srcPoly[s],this.m_srcPoly[s+1]));if(i.m_endtype==Kt.EndType.etClosedLine||i.m_endtype==Kt.EndType.etClosedPolygon?this.m_normals.push(Kt.ClipperOffset.GetUnitNormal(this.m_srcPoly[o-1],this.m_srcPoly[0])):this.m_normals.push(new Kt.DoublePoint(this.m_normals[o-2])),i.m_endtype==Kt.EndType.etClosedPolygon){for(var l=o-1,s=0;s<o;s++)l=this.OffsetPoint(s,l,i.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(i.m_endtype==Kt.EndType.etClosedLine){for(var l=o-1,s=0;s<o;s++)l=this.OffsetPoint(s,l,i.m_jointype);this.m_destPolys.push(this.m_destPoly),this.m_destPoly=new Array;for(var p=this.m_normals[o-1],s=o-1;s>0;s--)this.m_normals[s]=new Kt.DoublePoint(-this.m_normals[s-1].X,-this.m_normals[s-1].Y);this.m_normals[0]=new Kt.DoublePoint(-p.X,-p.Y),l=0;for(var s=o-1;s>=0;s--)l=this.OffsetPoint(s,l,i.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{for(var l=0,s=1;s<o-1;++s)l=this.OffsetPoint(s,l,i.m_jointype);var h;if(i.m_endtype==Kt.EndType.etOpenButt){var s=o-1;h=new Kt.IntPoint(Kt.ClipperOffset.Round(this.m_srcPoly[s].X+this.m_normals[s].X*t),Kt.ClipperOffset.Round(this.m_srcPoly[s].Y+this.m_normals[s].Y*t)),this.m_destPoly.push(h),h=new Kt.IntPoint(Kt.ClipperOffset.Round(this.m_srcPoly[s].X-this.m_normals[s].X*t),Kt.ClipperOffset.Round(this.m_srcPoly[s].Y-this.m_normals[s].Y*t)),this.m_destPoly.push(h)}else{var s=o-1;l=o-2,this.m_sinA=0,this.m_normals[s]=new Kt.DoublePoint(-this.m_normals[s].X,-this.m_normals[s].Y),i.m_endtype==Kt.EndType.etOpenSquare?this.DoSquare(s,l):this.DoRound(s,l)}for(var s=o-1;s>0;s--)this.m_normals[s]=new Kt.DoublePoint(-this.m_normals[s-1].X,-this.m_normals[s-1].Y);this.m_normals[0]=new Kt.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y),l=o-1;for(var s=l-1;s>0;--s)l=this.OffsetPoint(s,l,i.m_jointype);i.m_endtype==Kt.EndType.etOpenButt?(h=new Kt.IntPoint(Kt.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*t),Kt.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*t)),this.m_destPoly.push(h),h=new Kt.IntPoint(Kt.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*t),Kt.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*t)),this.m_destPoly.push(h)):(l=1,this.m_sinA=0,i.m_endtype==Kt.EndType.etOpenSquare?this.DoSquare(0,1):this.DoRound(0,1)),this.m_destPolys.push(this.m_destPoly)}}else{if(i.m_jointype==Kt.JoinType.jtRound)for(var u=1,a=0,s=1;s<=r;s++){this.m_destPoly.push(new Kt.IntPoint(Kt.ClipperOffset.Round(this.m_srcPoly[0].X+u*t),Kt.ClipperOffset.Round(this.m_srcPoly[0].Y+a*t)));var f=u;u=u*this.m_cos-this.m_sin*a,a=f*this.m_sin+a*this.m_cos}else for(var u=-1,a=-1,s=0;s<4;++s)this.m_destPoly.push(new Kt.IntPoint(Kt.ClipperOffset.Round(this.m_srcPoly[0].X+u*t),Kt.ClipperOffset.Round(this.m_srcPoly[0].Y+a*t))),u<0?u=1:a<0?a=1:u=-1;this.m_destPolys.push(this.m_destPoly)}}}},Kt.ClipperOffset.prototype.Execute=function(){var t=arguments,e=t[0]instanceof Kt.PolyTree;if(e){var i=t[0],n=t[1];i.Clear(),this.FixOrientations(),this.DoOffset(n);var r=new Kt.Clipper(0);if(r.AddPaths(this.m_destPolys,Kt.PolyType.ptSubject,!0),n>0)r.Execute(Kt.ClipType.ctUnion,i,Kt.PolyFillType.pftPositive,Kt.PolyFillType.pftPositive);else{var o=Kt.Clipper.GetBounds(this.m_destPolys),s=new Kt.Path;if(s.push(new Kt.IntPoint(o.left-10,o.bottom+10)),s.push(new Kt.IntPoint(o.right+10,o.bottom+10)),s.push(new Kt.IntPoint(o.right+10,o.top-10)),s.push(new Kt.IntPoint(o.left-10,o.top-10)),r.AddPath(s,Kt.PolyType.ptSubject,!0),r.ReverseSolution=!0,r.Execute(Kt.ClipType.ctUnion,i,Kt.PolyFillType.pftNegative,Kt.PolyFillType.pftNegative),1==i.ChildCount()&&i.Childs()[0].ChildCount()>0){var l=i.Childs()[0];i.Childs()[0]=l.Childs()[0],i.Childs()[0].m_Parent=i;for(var p=1;p<l.ChildCount();p++)i.AddChild(l.Childs()[p])}else i.Clear()}}else{var i=t[0],n=t[1];Kt.Clear(i),this.FixOrientations(),this.DoOffset(n);var r=new Kt.Clipper(0);if(r.AddPaths(this.m_destPolys,Kt.PolyType.ptSubject,!0),n>0)r.Execute(Kt.ClipType.ctUnion,i,Kt.PolyFillType.pftPositive,Kt.PolyFillType.pftPositive);else{var o=Kt.Clipper.GetBounds(this.m_destPolys),s=new Kt.Path;s.push(new Kt.IntPoint(o.left-10,o.bottom+10)),s.push(new Kt.IntPoint(o.right+10,o.bottom+10)),s.push(new Kt.IntPoint(o.right+10,o.top-10)),s.push(new Kt.IntPoint(o.left-10,o.top-10)),r.AddPath(s,Kt.PolyType.ptSubject,!0),r.ReverseSolution=!0,r.Execute(Kt.ClipType.ctUnion,i,Kt.PolyFillType.pftNegative,Kt.PolyFillType.pftNegative),i.length>0&&i.splice(0,1)}}},Kt.ClipperOffset.prototype.OffsetPoint=function(t,e,i){if(this.m_sinA=this.m_normals[e].X*this.m_normals[t].Y-this.m_normals[t].X*this.m_normals[e].Y,Math.abs(this.m_sinA*this.m_delta)<1){var n=this.m_normals[e].X*this.m_normals[t].X+this.m_normals[t].Y*this.m_normals[e].Y;if(n>0)return this.m_destPoly.push(new Kt.IntPoint(Kt.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),Kt.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),e}else this.m_sinA>1?this.m_sinA=1:this.m_sinA<-1&&(this.m_sinA=-1);if(this.m_sinA*this.m_delta<0)this.m_destPoly.push(new Kt.IntPoint(Kt.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[e].X*this.m_delta),Kt.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[e].Y*this.m_delta))),this.m_destPoly.push(new Kt.IntPoint(this.m_srcPoly[t])),this.m_destPoly.push(new Kt.IntPoint(Kt.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),Kt.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)));else switch(i){case Kt.JoinType.jtMiter:var r=1+(this.m_normals[t].X*this.m_normals[e].X+this.m_normals[t].Y*this.m_normals[e].Y);r>=this.m_miterLim?this.DoMiter(t,e,r):this.DoSquare(t,e);break;case Kt.JoinType.jtSquare:this.DoSquare(t,e);break;case Kt.JoinType.jtRound:this.DoRound(t,e)}return e=t},Kt.ClipperOffset.prototype.DoSquare=function(t,e){var i=Math.tan(Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y)/4);this.m_destPoly.push(new Kt.IntPoint(Kt.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[e].X-this.m_normals[e].Y*i)),Kt.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[e].Y+this.m_normals[e].X*i)))),this.m_destPoly.push(new Kt.IntPoint(Kt.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_delta*(this.m_normals[t].X+this.m_normals[t].Y*i)),Kt.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_delta*(this.m_normals[t].Y-this.m_normals[t].X*i))))},Kt.ClipperOffset.prototype.DoMiter=function(t,e,i){var n=this.m_delta/i;this.m_destPoly.push(new Kt.IntPoint(Kt.ClipperOffset.Round(this.m_srcPoly[t].X+(this.m_normals[e].X+this.m_normals[t].X)*n),Kt.ClipperOffset.Round(this.m_srcPoly[t].Y+(this.m_normals[e].Y+this.m_normals[t].Y)*n)))},Kt.ClipperOffset.prototype.DoRound=function(t,e){for(var i,n=Math.atan2(this.m_sinA,this.m_normals[e].X*this.m_normals[t].X+this.m_normals[e].Y*this.m_normals[t].Y),r=Math.max(Kt.Cast_Int32(Kt.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(n))),1),o=this.m_normals[e].X,s=this.m_normals[e].Y,l=0;l<r;++l)this.m_destPoly.push(new Kt.IntPoint(Kt.ClipperOffset.Round(this.m_srcPoly[t].X+o*this.m_delta),Kt.ClipperOffset.Round(this.m_srcPoly[t].Y+s*this.m_delta))),i=o,o=o*this.m_cos-this.m_sin*s,s=i*this.m_sin+s*this.m_cos;this.m_destPoly.push(new Kt.IntPoint(Kt.ClipperOffset.Round(this.m_srcPoly[t].X+this.m_normals[t].X*this.m_delta),Kt.ClipperOffset.Round(this.m_srcPoly[t].Y+this.m_normals[t].Y*this.m_delta)))},Kt.Error=function(t){throw new Error(t)},Kt.JS={},Kt.JS.AreaOfPolygon=function(t,e){return e||(e=1),Kt.Clipper.Area(t)/(e*e)},Kt.JS.AreaOfPolygons=function(t,e){e||(e=1);for(var i=0,n=0;n<t.length;n++)i+=Kt.Clipper.Area(t[n]);return i/(e*e)},Kt.JS.BoundsOfPath=function(t,e){return Kt.JS.BoundsOfPaths([t],e)},Kt.JS.BoundsOfPaths=function(t,e){e||(e=1);var i=Kt.Clipper.GetBounds(t);return i.left/=e,i.bottom/=e,i.right/=e,i.top/=e,i},Kt.JS.Clean=function(t,e){if(!(t instanceof Array))return[];var i=t[0]instanceof Array,t=Kt.JS.Clone(t);if("number"!=typeof e||null===e)return Kt.Error("Delta is not a number in Clean()."),t;if(0===t.length||1==t.length&&0===t[0].length||e<0)return t;i||(t=[t]);for(var n,r,o,s,l,p,h,u=t.length,a=[],f=0;f<u;f++)if(r=t[f],n=r.length,0!==n)if(n<3)o=r,a.push(o);else{for(o=r,s=e*e,l=r[0],p=1,h=1;h<n;h++)(r[h].X-l.X)*(r[h].X-l.X)+(r[h].Y-l.Y)*(r[h].Y-l.Y)<=s||(o[p]=r[h],l=r[h],p++);l=r[p-1],(r[0].X-l.X)*(r[0].X-l.X)+(r[0].Y-l.Y)*(r[0].Y-l.Y)<=s&&p--,p<n&&o.splice(p,n-p),o.length&&a.push(o)}return!i&&a.length?a=a[0]:i||0!==a.length?i&&0===a.length&&(a=[[]]):a=[],a},Kt.JS.Clone=function(t){if(!(t instanceof Array))return[];if(0===t.length)return[];if(1==t.length&&0===t[0].length)return[[]];var e=t[0]instanceof Array;e||(t=[t]);var i,n,r,o,s=t.length,l=new Array(s);for(n=0;n<s;n++){for(i=t[n].length,o=new Array(i),r=0;r<i;r++)o[r]={X:t[n][r].X,Y:t[n][r].Y};l[n]=o}return e||(l=l[0]),l},Kt.JS.Lighten=function(t,e){if(!(t instanceof Array))return[];if("number"!=typeof e||null===e)return Kt.Error("Tolerance is not a number in Lighten()."),Kt.JS.Clone(t);if(0===t.length||1==t.length&&0===t[0].length||e<0)return Kt.JS.Clone(t);t[0]instanceof Array||(t=[t]);var i,n,r,o,s,l,p,h,u,a,f,d,P,m,y,c,v,C=t.length,I=e*e,_=[];for(i=0;i<C;i++)if(r=t[i],l=r.length,0!=l){for(o=0;o<1e6;o++){for(s=[],l=r.length,r[l-1].X!=r[0].X||r[l-1].Y!=r[0].Y?(d=1,r.push({X:r[0].X,Y:r[0].Y}),l=r.length):d=0,f=[],n=0;n<l-2;n++)p=r[n],u=r[n+1],h=r[n+2],c=p.X,v=p.Y,P=h.X-c,m=h.Y-v,0===P&&0===m||(y=((u.X-c)*P+(u.Y-v)*m)/(P*P+m*m),y>1?(c=h.X,v=h.Y):y>0&&(c+=P*y,v+=m*y)),P=u.X-c,m=u.Y-v,a=P*P+m*m,a<=I&&(f[n+1]=1,n++);for(s.push({X:r[0].X,Y:r[0].Y}),n=1;n<l-1;n++)f[n]||s.push({X:r[n].X,Y:r[n].Y});if(s.push({X:r[l-1].X,Y:r[l-1].Y}),d&&r.pop(),!f.length)break;r=s}l=s.length,s[l-1].X==s[0].X&&s[l-1].Y==s[0].Y&&s.pop(),s.length>2&&_.push(s)}return t[0]instanceof Array||(_=_[0]),"undefined"==typeof _&&(_=[[]]),_},Kt.JS.PerimeterOfPath=function(t,e,i){if("undefined"==typeof t)return 0;var n,r,o=Math.sqrt,s=0,l=0,p=0,h=0,u=0,a=t.length;if(a<2)return 0;for(e&&(t[a]=t[0],a++);--a;)n=t[a],l=n.X,p=n.Y,r=t[a-1],h=r.X,u=r.Y,s+=o((l-h)*(l-h)+(p-u)*(p-u));return e&&t.pop(),s/i},Kt.JS.PerimeterOfPaths=function(t,e,i){i||(i=1);for(var n=0,r=0;r<t.length;r++)n+=Kt.JS.PerimeterOfPath(t[r],e,i);return n},Kt.JS.ScaleDownPath=function(t,e){var i,n;for(e||(e=1),i=t.length;i--;)n=t[i],n.X=n.X/e,n.Y=n.Y/e},Kt.JS.ScaleDownPaths=function(t,e){var i,n,r;for(e||(e=1),i=t.length;i--;)for(n=t[i].length;n--;)r=t[i][n],r.X=r.X/e,r.Y=r.Y/e},Kt.JS.ScaleUpPath=function(t,e){var i,n,r=Math.round;for(e||(e=1),i=t.length;i--;)n=t[i],n.X=r(n.X*e),n.Y=r(n.Y*e)},Kt.JS.ScaleUpPaths=function(t,e){var i,n,r,o=Math.round;for(e||(e=1),i=t.length;i--;)for(n=t[i].length;n--;)r=t[i][n],r.X=o(r.X*e),r.Y=o(r.Y*e)},Kt.ExPolygons=function(){return[]},Kt.ExPolygon=function(){this.outer=null,
this.holes=null},Kt.JS.AddOuterPolyNodeToExPolygons=function(t,e){var i=new Kt.ExPolygon;i.outer=t.Contour();var n=t.Childs(),r=n.length;i.holes=new Array(r);var o,s,l,p,h,u;for(l=0;l<r;l++)for(o=n[l],i.holes[l]=o.Contour(),p=0,h=o.Childs(),u=h.length;p<u;p++)s=h[p],Kt.JS.AddOuterPolyNodeToExPolygons(s,e);e.push(i)},Kt.JS.ExPolygonsToPaths=function(t){var e,i,n,r,o=new Kt.Paths;for(e=0,n=t.length;e<n;e++)for(o.push(t[e].outer),i=0,r=t[e].holes.length;i<r;i++)o.push(t[e].holes[i]);return o},Kt.JS.PolyTreeToExPolygons=function(t){var e,i,n,r,o=new Kt.ExPolygons;for(i=0,n=t.Childs(),r=n.length;i<r;i++)e=n[i],Kt.JS.AddOuterPolyNodeToExPolygons(e,o);return o}}();
},{}]},{},[13])(13)
});